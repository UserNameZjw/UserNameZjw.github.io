<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://UserNameZjw.github.io</id>
    <title>ã€Œè°¨è¨€æ…è¡Œã€</title>
    <updated>2019-06-29T15:01:43.299Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://UserNameZjw.github.io"/>
    <link rel="self" href="https://UserNameZjw.github.io/atom.xml"/>
    <subtitle>ä¸€ä½å¹´è¿‘ä¸‰åçš„ä¸­å¹´æ²¹è…»è‚¥èƒ–è€ç”·äººçš„ä¸­å¹´å±æœº</subtitle>
    <logo>https://UserNameZjw.github.io/images/avatar.png</logo>
    <icon>https://UserNameZjw.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, ã€Œè°¨è¨€æ…è¡Œã€</rights>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ¨¡å‹ å¢ã€åˆ ã€æ”¹ã€æŸ¥]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-7</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-7">
        </link>
        <updated>2019-06-27T03:05:14.000Z</updated>
        <summary type="html"><![CDATA[<p>æ¨¡å‹çš„ å¢ã€åˆ ã€æ”¹ã€æŸ¥</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ¨¡å‹çš„ å¢ã€åˆ ã€æ”¹ã€æŸ¥</p>
<!-- more -->
<h3 id="å®šä¹‰">å®šä¹‰</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037580">TP6 æ¨¡å‹å®šä¹‰å®˜ç½‘æ–‡æ¡£</a><br>
app\index\controller\Index.php ä»£ç </p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $user = new Tp();
        $arr = $user-&gt;getId(2);
        dump($arr);
    }

}
</code></pre>
<p>app\index\model\Tp.php ä»£ç </p>
<pre><code>&lt;?php

namespace app\index\model;

use think\Model;

class Tp extends Model
{
    public function getUser($where = null){
        $arr = $this-&gt;where( ($where = null) ? &quot; id &gt;0 &quot; : $where);
        return $arr;
    }

    public function getId($id){

        $this-&gt;model = $this-&gt;getUser();
        return $this-&gt;model-&gt;find($id)-&gt;toArray();
    }

}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561606176769.png" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>æ¨¡å‹å®šä¹‰ï¼Œæœ€å¥½åœ¨å„è‡ªçš„åº”ç”¨ä¸‹çš„ model æ–‡ä»¶å¤¹ä¸‹ï¼Œ å¦‚ index æ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªåº”ç”¨</li>
<li>æ¨¡å‹å…¶å®å°±æ˜¯ Db:: ç±»çš„ä¸€ä¸ªå¢å¼ºï¼ŒDb:: ç±»çš„æ‰€æœ‰è¯­æ³•ï¼Œéƒ½å¯ä»¥åœ¨ model ä½¿ç”¨</li>
<li>æ¨¡å‹ä¸­è¿”å›çš„æ•°æ®å‡æ˜¯ ã€Œå¯¹è±¡ã€ æ ¼å¼ï¼Œè°ƒç”¨å…ƒç´ éœ€è¦ç”¨ç®­å¤´æŒ‡å‘ -&gt;</li>
<li>å¦‚æœéœ€è¦è¿”å›æ•°ç»„ï¼Œå¯ä»¥åœ¨æ¨¡å‹ä¸­ï¼Œè°ƒç”¨ toArray() è¿”å›æ•°ç»„å½¢å¼</li>
</ol>
</blockquote>
<h3 id="æ¨¡å‹å­—æ®µ">æ¨¡å‹å­—æ®µ</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037581">TP6 æ¨¡å‹å­—æ®µå®˜æ–¹æ–‡æ¡£</a></p>
<blockquote>
<p>å¦‚æœ‰éœ€æ±‚ï¼Œè‡ªè¡Œå‚è€ƒ</p>
</blockquote>
<h3 id="å¢">å¢</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037582">TP6 æ¨¡å‹-&gt;æ–°å¢ å®˜æ–¹æ–‡æ¡£</a></p>
<ol>
<li>save()  å•æ¡æ’å…¥æ•°æ®ï¼ŒæˆåŠŸè¿”å›true</li>
<li>saveAll() æ‰¹é‡æ’å…¥æ•°æ®ï¼ŒæˆåŠŸè¿”å›æ•°æ®é›†</li>
<li>é™æ€è°ƒç”¨ create() æˆåŠŸè¿”å›å¯¹è±¡æ•°æ®<br>
save() åŸºç¡€ç”¨æ³•ä»£ç </li>
</ol>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $user = new Tp();
        $data = [
            &quot;nickname&quot; =&gt; &quot;modelSave&quot;,
            &quot;email&quot; =&gt; &quot;modelSave@qq.com&quot;,
            &quot;age&quot; =&gt; 18
        ];
        $back = $user-&gt;save($data);
        dump($back);
    }

}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561607584749.jpg" alt=""></p>
<p>save() è·å–è‡ªå¢ä¸»é”®<br>
åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™ä¸ªçœŸçš„ç¹ç<br>
å¦‚æœä»…ä»…æ˜¯éœ€è¦è¿”å›ä¸»é”®ï¼Œå¯ä»¥ç›´æ¥ç”¨Db:: å†™æ³•è°ƒç”¨ insertGetId()</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $user = new Tp();
        $user-&gt;nickname = &quot;modelSave&quot;;
        $user-&gt;email = &quot;modelSave@qq.com&quot;;
        $user-&gt;age = 19;
        $user-&gt;save();
        //æ‰“å°å¯¹è±¡ id ä¸»é”®
        dump($user-&gt;id);
        //è¿”å›å¯¹è±¡
        return $user;
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561609920487.jpg" alt=""></p>
<p>saveAll() ä½¿ç”¨æ–¹æ³•</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $tp = new Tp();
        $data =
            [
                [
                    &quot;nickname&quot; =&gt; &quot;modelSave1&quot;,
                    &quot;email&quot; =&gt; &quot;modelSave@qq.com1&quot;,
                    &quot;age&quot; =&gt; 11
                ],
                [
                    &quot;nickname&quot; =&gt; &quot;modelSave2&quot;,
                    &quot;email&quot; =&gt; &quot;modelSave@qq.com2&quot;,
                    &quot;age&quot; =&gt; 12
                ],
                [
                    &quot;nickname&quot; =&gt; &quot;modelSave3&quot;,
                    &quot;email&quot; =&gt; &quot;modelSave@qq.com3&quot;,
                    &quot;age&quot; =&gt; 13
                ],
            ];
        $back = $tp-&gt;saveAll($data);
        //è¿”å›å¯¹è±¡
        return $back;
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561613350850.jpg" alt=""></p>
<p>é™æ€è°ƒç”¨ create()</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $data = [
            &quot;nickname&quot; =&gt; &quot;modelSave&quot;,
            &quot;email&quot; =&gt; &quot;modelSave@qq.com&quot;,
            &quot;age&quot; =&gt; 18
        ];
        //é™æ€è°ƒç”¨ï¼Œç¼–è¾‘å™¨ä¸æç¤ºå“¦
        $tp = Tp::create($data);
        //è¿”å›å¯¹è±¡
        return $tp;
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561612590741.jpg" alt=""></p>
<p>ç­›é€‰æ’å…¥</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $data = [
            &quot;nickname&quot; =&gt; &quot;ç­›é€‰æ’å…¥&quot;,
            &quot;email&quot; =&gt; &quot;ä¸è®¸æ’å…¥&quot;
        ];
        $tp = Tp::create($data,[&quot;nickname&quot;]);
        dump($tp);
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561809721324.jpg" alt=""></p>
<blockquote>
<ol>
<li>å…³äºè‡ªåŠ¨ç­›é€‰ä»¥åŠè‡ªåŠ¨æ’å…¥ï¼Œéƒ½ä¼šæœ‰ä¸ªæ“ä½œæ—¶é—´ï¼Œå¯ä»¥åœ¨ config/database/php è®¾ç½®</li>
<li>é»˜è®¤é…ç½® 'auto_timestamp'  =&gt; true æ„æ€æ˜¯è‡ªåŠ¨å®Œæˆã€‚å¦‚æœéœ€è¦ç‰¹åˆ«æŒ‡å®šï¼Œå¯ä»¥æŒ‰ç…§æ³¨é‡Šé…ç½®</li>
<li>create ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ•°ç»„å½¢å¼ï¼Œæ˜¯å…è®¸æ’å…¥çš„å­—æ®µ</li>
</ol>
</blockquote>
<p>æ€»ç»“ï¼šå°½é‡ç”¨ create() é™æ€æ–¹å¼æ–°å¢å•æ¡æ•°æ®ï¼Œæ‰¹é‡æ’å…¥é€‰æ‹© saveAll() ï¼Œé™¤äº† create() è‡ªå®šç­›é€‰æ’å…¥æ–¹å¼ç¿»è½¦ä»¥å¤–ï¼Œå…¶ä»–çš„æ’å…¥æ–¹æ³•ï¼Œå‡è‡ªåŠ¨å®Œæˆç­›é€‰ã€‚</p>
<h3 id="æ”¹">æ”¹</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037583">TP6 æ¨¡å‹-&gt; æ›´æ–° å®˜æ–¹æ–‡æ¡£</a></p>
<ol>
<li>save() ä½¿ç”¨æ–¹æ³•è‡ªè¡Œé¢†ä¼šï¼ŒæˆåŠŸè¿”å›true</li>
<li>saveAll() ä½¿ç”¨æ–¹æ³•åŒsave()ï¼ŒæˆåŠŸè¿”å›å¯¹è±¡æ•°æ®é›†</li>
<li>é™æ€è°ƒç”¨ update()  æˆåŠŸè¿”å›å¯¹è±¡æ•°æ®</li>
</ol>
<p>save() ä¸ saveAll() ä¸åšè¯¦è§£ ğŸ¤£ğŸ¤£ğŸ¤£</p>
<p>é™æ€è°ƒç”¨ update()</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        //å¦‚æœå˜æ›´æ•°æ®ä¸­æœ‰ä¸»é”®ï¼Œå¯ä»¥å…å†™ç¬¬äºŒå‚æ•° $where æ¡ä»¶
        $data = [
            &quot;nickname&quot; =&gt; &quot;upName&quot;,
            &quot;email&quot; =&gt; &quot;upEmail&quot;,
            &quot;id&quot; =&gt; 26
        ];
        return Tp::update($data);
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561617295249.jpg" alt=""></p>
<p>ç­›é€‰ä¿®æ”¹</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $data = [
            &quot;nickname&quot; =&gt; &quot;ç­›é€‰æ’å…¥&quot;,
            &quot;email&quot; =&gt; &quot;ä¸è®¸æ’å…¥&quot;
        ];
        $tp = Tp::update($data,[&quot;id&quot; =&gt; 26],[&quot;email&quot;]);
        return $tp;
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561812024566.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>å•æ¡ä¿®æ”¹ï¼Œä¾ç„¶æ¨èé™æ€è°ƒç”¨ update() ï¼Œå¤šæ¡æ¨è saveAll()</li>
<li>å¦‚æœä¿®æ”¹æ•°æ®ä¸­åŒ…å«å”¯ä¸€ä¸»é”®ï¼Œå¯ä»¥ä¸ä¼ é€’æ¡ä»¶å‚æ•°</li>
<li>æ¡ä»¶å‚æ•°ï¼Œæ•°ç»„å½¢å¼ ['id' =&gt; 26]</li>
<li>ç­›é€‰ä¿®æ”¹ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ•°ç»„å½¢å¼ï¼Œæ˜¯å…è®¸çš„å­—æ®µ</li>
</ol>
</blockquote>
<h3 id="æŸ¥">æŸ¥</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037585">TP6 æ¨¡å‹-&gt; æŸ¥è¯¢ å®˜æ–¹æ–‡æ¡£</a></p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        //å¯ä»¥ç”¨ Db ç±»æ‰€æœ‰å†™æ³•
        //é™æ€æŸ¥è¯¢
        echo &quot;æŸ¥è¯¢å•æ¡ find() é»˜è®¤æ¡ä»¶æŸ¥è¯¢æ˜¯å”¯ä¸€ä¸»é”® è¿”å›å¯¹è±¡&lt;br&gt;
               ç”¨toArray() è½¬æ•°ç»„æ ¼å¼&quot;;
        dump(Tp::find(26)-&gt;toArray());
        //æŸ¥è¯¢å¤šæ¡
        echo &quot;æŸ¥è¯¢å¤šæ¡ select() é»˜è®¤æ¡ä»¶æŸ¥è¯¢æ˜¯å”¯ä¸€ä¸»é”® è¿”å›å¯¹è±¡&lt;br&gt;
               ç”¨toArray() è½¬æ•°ç»„æ ¼å¼&quot;;
        dump(Tp::select([23,24])-&gt;toArray());

        //æŸ¥è¯¢å•æ¡
        echo &quot;æŸ¥è¯¢å•æ¡ find() é»˜è®¤æ¡ä»¶æŸ¥è¯¢æ˜¯å”¯ä¸€ä¸»é”® è¿”å›å¯¹è±¡&lt;br&gt;
               ç”¨toArray() è½¬æ•°ç»„æ ¼å¼&quot;;
        $tp = new Tp();
        dump($tp-&gt;find(26)-&gt;toArray());

        echo &quot;æŸ¥è¯¢å•æ¡ select() é»˜è®¤æ¡ä»¶æŸ¥è¯¢æ˜¯å”¯ä¸€ä¸»é”® è¿”å›å¯¹è±¡&lt;br&gt;
               ç”¨toArray() è½¬æ•°ç»„æ ¼å¼&quot;;
        dump($tp-&gt;select([23,24])-&gt;toArray());
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561619193582.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>ä¸ç®¡æ˜¯åœ¨ã€Œæ§åˆ¶å™¨ã€è¿˜æ˜¯åœ¨ã€Œæ¨¡å‹ã€ä¸­ï¼Œå‡æ”¯æŒ Db ç±»çš„æ‰€æœ‰å†™æ³•</li>
<li>ã€Œæ§åˆ¶å™¨ã€æ¨èé™æ€å†™æ³•ï¼Œå¦‚ Tp::where()-&gt;find()</li>
<li>ã€Œæ¨¡å‹ã€æ¨èå†™æ³•ï¼Œå¦‚ $this-&gt;where()-&gt;find()</li>
</ol>
</blockquote>
<p>å­—æ®µåŠ¨æ€æŸ¥è¯¢</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        //å¦‚æœæŸ¥è¯¢ä¸ºç©ºï¼Œä¸èƒ½æ¥toArray()
        $tp = Tp::getByNickname(&quot;snail&quot;)-&gt;toArray();
        dump($tp);

        $tp = Tp::getByAge(&quot;12&quot;)-&gt;toArray();
        dump($tp);

        $tp = Tp::getByEmail(&quot;668346&quot;)-&gt;toArray();
        dump($tp);
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561818889487.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>getBy æ¥ä½ çš„å­—æ®µï¼Œæ³¨æ„é©¼å³°å†™æ³•</li>
<li>ä¾‹ï¼šæŸ¥è¯¢ nickname å­—æ®µ éœ€è¦å†™æˆ getByNickname</li>
<li>æ¯”å¯¹ä½¿ç”¨çš„æ˜¯ = è¿ç®—ç¬¦</li>
<li>è¿”å›ç»“æœéƒ½æ˜¯å•æ¡æŸ¥è¯¢</li>
</ol>
</blockquote>
<h3 id="åˆ ">åˆ </h3>
<p>delete() æˆåŠŸè¿”å› true/false<br>
é™æ€è°ƒç”¨ destroy()<br>
é—­åŒ…åˆ é™¤</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        //ä¸‰ç§åˆ é™¤æ–¹æ³•
        // åŠ¨æ€ delete()
        $tp = new Tp();
        $back = $tp-&gt;where(&quot;id&quot;,&quot;=&quot;,18)-&gt;delete();

        //é™æ€è°ƒç”¨
        $del = Tp::destroy([26,27]);
        echo $del;

        //é—­åŒ…åˆ é™¤
        echo Tp::destroy(function ($query){
            $query-&gt;where(&quot;id&quot;,&quot;&gt;&quot;,&quot;20&quot;);
        });
    }
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>æ¨èé—­åŒ…åˆ é™¤</li>
<li>å•ç‹¬ä½¿ç”¨ destroy() åˆ é™¤ï¼Œä¼ å…¥ä¸»é”®ID ï¼Œæ•°ç»„å½¢å¼</li>
</ol>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ•°æ®åº“é“¾å¼æ“ä½œ]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-6</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-6">
        </link>
        <updated>2019-06-23T02:04:17.000Z</updated>
        <summary type="html"><![CDATA[<p>åŸç”ŸæŸ¥è¯¢  èšåˆæŸ¥è¯¢<br>
é«˜çº§æŸ¥è¯¢  è§†å›¾æŸ¥è¯¢<br>
å­æŸ¥è¯¢</p>
]]></summary>
        <content type="html"><![CDATA[<p>åŸç”ŸæŸ¥è¯¢  èšåˆæŸ¥è¯¢<br>
é«˜çº§æŸ¥è¯¢  è§†å›¾æŸ¥è¯¢<br>
å­æŸ¥è¯¢</p>
<!-- more -->
<h3 id="åŸç”ŸæŸ¥è¯¢">åŸç”ŸæŸ¥è¯¢</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037570">TP6 åŸç”ŸæŸ¥è¯¢å®˜æ–¹æ–‡æ¡£</a><br>
åŸç”ŸæŸ¥è¯¢å¯ä»¥è¯´æ˜¯è®©äººåˆçˆ±åˆæ¨<br>
ç®€å•çš„è¯­å¥ç”¨ä¸åˆ°ï¼Œå¤æ‚çš„è¯­å¥ç”¨TP6 çš„æ„é€ å™¨åˆæ›´éº»çƒ¦ï¼Œå¯¼è‡´æ— æ³•å½»åº•æŠ›å¼ƒåŸç”Ÿ<br>
query() å¯æ‰§è¡Œä»»ä½•åŸç”Ÿè¯­å¥<br>
execute() ä»…ç”¨äºæ›´æ–°ä»¥åŠå†™å…¥æ•°æ®ï¼Œä¸å¯åšå…¶ä»–ç”¨å¤„</p>
<blockquote>
<p>å› ä¸ºexecute() åœ¨SQLè¯­å¥æ— é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œä»…è¿”å›å—å½±å“æ¡æ•°ï¼Œå¦åˆ™è¿”å›false</p>
</blockquote>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //ä¸‹é¢ç”¨åŸç”ŸæŸ¥è¯¢ think_tp è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®
        $sql = &quot; SELECT * FROM think_tp &quot;;
        dump(Db::query($sql));

        //ç”¨execute() æ‰§è¡ŒæŸ¥è¯¢è¯­å¥
        dump(Db::execute($sql));
    }
}
</code></pre>
<p>å›¾â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561256581994.png" alt=""></p>
<h3 id="èšåˆæŸ¥è¯¢">èšåˆæŸ¥è¯¢</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037564">TP6 èšåˆæŸ¥è¯¢å®˜æ–¹æ–‡æ¡£</a><br>
åœ¨æŸ¥è¯¢ä¸­ï¼Œç»å¸¸ç”¨åˆ°ä¸€äº›éœ€è¦ç»Ÿè®¡æ•°æ®<br>
count()	ç»Ÿè®¡æ•°é‡ï¼Œå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„å­—æ®µåï¼ˆå¯é€‰ï¼‰<br>
max()	è·å–æœ€å¤§å€¼ï¼Œå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„å­—æ®µåï¼ˆå¿…é¡»ï¼‰<br>
min()	è·å–æœ€å°å€¼ï¼Œå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„å­—æ®µåï¼ˆå¿…é¡»ï¼‰<br>
avg()	è·å–å¹³å‡å€¼ï¼Œå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„å­—æ®µåï¼ˆå¿…é¡»ï¼‰<br>
sum()	è·å–æ€»å’Œï¼Œå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„å­—æ®µåï¼ˆå¿…é¡»ï¼‰</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //æŸ¥è¯¢ think_tp è¡¨æ•°æ®æ€»æ¡æ•°
        echo &quot;count() æŸ¥è¯¢æ€»æ¡æ•°&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;count());

        echo &quot;æŸ¥è¯¢ age æœ€å¤§å€¼&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;max(&quot;age&quot;));

        echo &quot;æŸ¥è¯¢ age æœ€å°å€¼&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;min(&quot;age&quot;));

        echo &quot;æŸ¥è¯¢ age å¹³å‡å€¼&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;avg(&quot;age&quot;));

        echo &quot;æŸ¥è¯¢ age æ€»å’Œ&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;sum(&quot;age&quot;));
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561257598179.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼šmax() min() æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯å¦å¼€å¯å¼ºåˆ¶è½¬æ¢ï¼Œå› ä¸ºæœ‰æ—¶å€™ï¼ŒæŸ¥è¯¢çš„å­—æ®µå¹¶ä¸éƒ½æ˜¯æ•°å€¼<br>
ç¬¬äºŒå€¼é»˜è®¤ä¸º true ï¼Œå¯ä¼ å…¥ false å…³é—­å¼ºåˆ¶è½¬æ¢</p>
</blockquote>
<h3 id="é«˜çº§æŸ¥è¯¢">é«˜çº§æŸ¥è¯¢</h3>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037566">TP6 é«˜çº§æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£</a></p>
<p>1.å¿«æ·æŸ¥è¯¢<br>
å¿«æ·æŸ¥è¯¢æ–¹å¼æ˜¯ä¸€ç§å¤šå­—æ®µç›¸åŒæŸ¥è¯¢æ¡ä»¶çš„ç®€åŒ–å†™æ³•<br>
| ä»£è¡¨ or ï¼Œ&amp; ä»£è¡¨ and</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //å¿«æ·æŸ¥è¯¢ | ä»£è¡¨or ï¼Œ&amp; ä»£è¡¨ and
        $back = Db::name(&quot;tp&quot;)
            -&gt;where(&quot;id|email&quot;,&quot;like&quot;,&quot;12%&quot;)
            -&gt;where(&quot;id&amp;age&quot;,&quot;&gt;&quot;,&quot;9&quot;)
            -&gt;select();

        echo Db::name(&quot;tp&quot;)
            -&gt;where(&quot;id|emali&quot;,&quot;like&quot;,&quot;12%&quot;)
            -&gt;where(&quot;id&amp;age&quot;,&quot;&gt;&quot;,&quot;9&quot;)
            -&gt;fetchSql()
            -&gt;select();

        dump($back);

    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561359487306.jpg" alt=""></p>
<p>2.æ‰¹é‡ï¼ˆå­—æ®µï¼‰æŸ¥è¯¢</p>
<p>åŸºç¡€ç”¨æ³•</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        $back = Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;&gt;&quot;,&quot;4&quot;]
            ])
            -&gt;select();

        echo Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;&gt;&quot;,&quot;4&quot;]
            ])
            -&gt;fetchSql()
            -&gt;select();

        dump($back);

    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561360542975.jpg" alt=""></p>
<p>exp BUGç–‘é—®<br>
æ­¤BUGï¼ˆæš‚åšBUGçœ‹ï¼‰å‘Šè¯‰æˆ‘ä»¬ï¼Œå­—æ®µä¸å­—æ®µæ¯”å¯¹ï¼Œå¿…é¡»exp<br>
whereExp()</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        $back = Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;&gt;&quot;,&quot;age&quot;]
            ])
            -&gt;select();
        echo Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;&gt;&quot;,&quot;age&quot;]
            ])
            -&gt;fetchSql()
            -&gt;select();
        
        $back2 = Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;exp&quot;,Db::raw(&quot;&gt;age&quot;)]
            ])
            -&gt;select();
        echo &quot;&lt;br&gt;&quot;.Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;exp&quot;,Db::raw(&quot;&gt;age&quot;)]
            ])
            -&gt;fetchSql()
            -&gt;select();

        dump($back);
        dump($back2);
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561363274133.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼šexp å¿…é¡»é…åˆ Db::raw() ä½¿ç”¨</p>
</blockquote>
<p>3.æ•°ç»„ç»„åˆæ–¹å¼ï¼Œç›´æ¥å˜é‡ç»„åˆ</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //æ•°ç»„æŸ¥è¯¢æ–¹å¼ï¼Œå˜é‡ç›´æ¥ç»„åˆ
        $email = &quot;Sn&quot;;
        $nick = &quot;s&quot;;
        $back = Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;],
                [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
            ])
            -&gt;select();

        echo Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;],
                [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
            ])
            -&gt;fetchSql()
            -&gt;select();
        dump($back);
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561366312794.jpg" alt=""></p>
<p>4.é—­åŒ…æŸ¥è¯¢</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //é—­åŒ…æŸ¥è¯¢
        $email = &quot;Sn&quot;;
        $nick = &quot;s&quot;;
        $back = Db::name(&quot;tp&quot;)
            -&gt;where(function ($query) use ($email,$nick){
                $query-&gt;where([
                        [&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;],
                        [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
                ]);
            })
            -&gt;select();

        echo Db::name(&quot;tp&quot;)
            -&gt;where(function ($query) use ($email,$nick){
                $query-&gt;where([
                    [&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;],
                    [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
                ]);
            })
            -&gt;fetchSql()
            -&gt;select();
        dump($back);
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561367263604.jpg" alt=""></p>
<p>5.æ··åˆæŸ¥è¯¢<br>
åªè¦ç¬¦åˆè¯­æ³•è§„åˆ™çš„å†™æ³•ï¼Œéƒ½èƒ½åŒæ—¶ä¸€èµ·å†™</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //æ··åˆæŸ¥è¯¢
        $email = &quot;Sn&quot;;
        $nick = &quot;s&quot;;
        $back = Db::name(&quot;tp&quot;)
            //å˜é‡ç»„åˆå†™æ³•
            -&gt;where(&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;)
            //é—­åŒ…å†™æ³•
            -&gt;where(function ($query) use ($email){
                $query-&gt;where([
                    [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
                ])
                //å­—ç¬¦ä¸²å†™æ³•
                -&gt;whereOr(&quot;age &gt; 0 and 1=1&quot;);
            })
            //å¿«æ·å†™æ³•
            -&gt;where(&quot;id|age&quot;,&quot;&gt;&quot;,0)
            //å­—ç¬¦ä¸²æ¡ä»¶æŸ¥è¯¢ï¼Œç»‘å®šå†™æ³•
            -&gt;whereRaw(&quot;email like :email&quot;,[&quot;email&quot; =&gt; $email.&quot;%&quot;])
            -&gt;select();

        echo Db::name(&quot;tp&quot;)
            -&gt;where(&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;)
            -&gt;where(function ($query) use ($email){
                $query-&gt;where([
                    [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
                ])
                    -&gt;whereOr(&quot;age &gt; 0 and 1=1&quot;);
            })
            -&gt;where(&quot;id|age&quot;,&quot;&gt;&quot;,0)
            -&gt;whereRaw(&quot;email like :email&quot;,[&quot;email&quot; =&gt; $email.&quot;%&quot;])
            -&gt;fetchSql()
            -&gt;select();
        dump($back);
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561379697950.jpg" alt=""></p>
<p>6.æ›´å¤šå¿«æ·æ–¹æ³•<br>
<img src="https://UserNameZjw.github.io/post-images/1561379891833.jpg" alt=""></p>
<h3 id="è§†å›¾æŸ¥è¯¢">è§†å›¾æŸ¥è¯¢</h3>
<p>å¤šè¡¨æŸ¥è¯¢ï¼Œjoin çš„æ¨èæ›¿ä»£æ–¹æ³•</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        $back = Db::view(&quot;tp a&quot;,&quot;id,nickname&quot;)
            -&gt;view(&quot;tp1 b&quot;,&quot;id,email,nickname&quot;,&quot;a.id = b.id&quot;,&quot;LEFT&quot;)
            -&gt;where(&quot;a.id&quot;,&quot;&gt;&quot;,&quot;5&quot;)
            -&gt;select();

        echo Db::view(&quot;tp a&quot;,&quot;id,nickname&quot;)
            -&gt;view(&quot;tp1 b&quot;,&quot;id,email,nickname&quot;,&quot;a.id = b.id&quot;,&quot;LEFT&quot;)
            -&gt;where(&quot;a.id&quot;,&quot;&gt;&quot;,&quot;5&quot;)
            -&gt;fetchSql()
            -&gt;select();

        dump($back);
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561382496575.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼šå¦‚æœä½¿ç”¨æ•°ç»„å½¢å¼è®¾ç½®åˆ«åï¼Œå¦‚æœè¡¨åæœ‰å‰ç¼€ï¼Œéœ€è¦å†™å‰ç¼€<br>
å¦‚ think_ ä¸ºè¡¨å‰ç¼€ï¼Œéœ€å†™æˆ ['think_tp' =&gt; 'a'] ä¸ç„¶æŠ¥é”™</p>
</blockquote>
<h3 id="å­æŸ¥è¯¢">å­æŸ¥è¯¢</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037569">TP6 å­æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£</a></p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //å…¶å®å­æŸ¥è¯¢ï¼Œå°±æ˜¯åˆ©ç”¨TP æ„é€ å™¨è¿”å› sql è¯­å¥ è€Œä¸æ‰§è¡Œ
        echo &quot;fetchSql() å¯ä»¥ç”¨åœ¨ä»»ä½•sqlæ„é€ ä¸­ï¼Œä¸ä»…é™äº select() &quot;;
        dump(
            Db::name(&quot;tp&quot;)
                -&gt;where(&quot;id&quot;,&quot;&gt;&quot;,&quot;5&quot;)
                -&gt;fetchSql()
                -&gt;select()
        );

        echo &quot;buildSql() ä¸€èˆ¬çº¯ç”¨äºæ„é€ sql è¿”å›ï¼Œåç»­ä¸èƒ½è·Ÿéš select() update() ä¹‹ç±»&lt;br&gt;
                å¹¶ä¸”å¯ä»¥è¿”å›åˆ°å˜é‡ä¸­ï¼Œä½œä¸ºå¤ç”¨ï¼Œæ­¤æ–¹æ³•ä¼šæŠŠ sql è¯­å¥ç”¨ï¼ˆï¼‰åŒ…è£¹èµ·æ¥&quot;;
        dump(
            Db::name(&quot;tp&quot;)
                -&gt;where(&quot;id&quot;,&quot;&gt;&quot;,&quot;5&quot;)
                -&gt;buildSql()
        );

        echo &quot;åˆ©ç”¨é—­åŒ…ç‰¹æ€§ï¼Œä¼šåœ¨sql æ„é€ ä¸­ï¼ŒæŠŠé—­åŒ…å†…å®¹ç”¨ ï¼ˆï¼‰åŒ…è£¹çš„ç‰¹æ€§&quot;;
        dump(
            Db::name(&quot;tp&quot;)
                -&gt;where(&quot;id&quot;,&quot;in&quot;,function ($query){
                    $query-&gt;name(&quot;tp1&quot;)
                    -&gt;where(&quot;id&quot;,&quot;&gt;&quot;,5)
                    -&gt;field(&quot;id&quot;);
                })
                -&gt;fetchSql()
                -&gt;select()
        );
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561384804354.jpg" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ•°æ®åº“è¿æ¥ä¸æ“ä½œ]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-5</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-5">
        </link>
        <updated>2019-06-21T07:23:14.000Z</updated>
        <summary type="html"><![CDATA[<p>æ•°æ®åº“é“¾æ¥é…ç½®<br>
æ•°æ®åº“æ“ä½œ</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ•°æ®åº“é“¾æ¥é…ç½®<br>
æ•°æ®åº“æ“ä½œ</p>
<!-- more -->
<h3 id="è¿æ¥æ•°æ®åº“">è¿æ¥æ•°æ®åº“</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037531">TP6 è¿æ¥æ•°æ®åº“å®˜æ–¹æ–‡æ¡£</a><br>
1.å•é“¾æ¥é…ç½®
ä¿®æ”¹ app\database.php æ–‡ä»¶  ç”±äºé…ç½®é¡¹å¤ªå¤šï¼Œä»…æ‹¿å®˜æ–¹ä¾‹å­å±•ç¤º<br>
é…ç½®ä¸Šæ¯ä¸€é¡¹éƒ½æœ‰æ³¨é‡Šè¯´æ˜ï¼Œéœ€è¦æ³¨æ„çš„å°±æ˜¯æ–‡ä»¶è·¯å¾„è€Œå·²ğŸ¤£ğŸ¤£</p>
<pre><code>return [
    'default'    =&gt;    'mysql',
    'connections'    =&gt;    [
        'mysql'    =&gt;    [
            // æ•°æ®åº“ç±»å‹
            'type'        =&gt; 'mysql',
            // æœåŠ¡å™¨åœ°å€
            'hostname'    =&gt; '127.0.0.1',
            // æ•°æ®åº“å
            'database'    =&gt; 'thinkphp',
            // æ•°æ®åº“ç”¨æˆ·å
            'username'    =&gt; 'root',
            // æ•°æ®åº“å¯†ç 
            'password'    =&gt; '',
            // æ•°æ®åº“è¿æ¥ç«¯å£
            'hostport'    =&gt; '',
            // æ•°æ®åº“è¿æ¥å‚æ•°
            'params'      =&gt; [],
            // æ•°æ®åº“ç¼–ç é»˜è®¤é‡‡ç”¨utf8
            'charset'     =&gt; 'utf8',
            // æ•°æ®åº“è¡¨å‰ç¼€
            'prefix'      =&gt; 'think_',
        ],
    ],
];
</code></pre>
<p>2.å¤šè¿æ¥é…ç½®<br>
ç¯‡å¹…å¤ªé•¿å°±ç›´æ¥æˆªå›¾è¯´æ˜<br>
<img src="https://UserNameZjw.github.io/post-images/1561107241843.png" alt=""><br>
å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒTP6 å¼•å…¥äº† env ç¯å¢ƒå˜é‡æœºåˆ¶ï¼Œå¹¶ä¸”ç¯å¢ƒå˜é‡æœºåˆ¶ä¼˜å…ˆäº database.php é…ç½®<br>
å…³äº evn ï¼Œæˆ‘åœ¨ä¹‹å‰çš„ <a href="https://usernamezjw.github.io/post/thinkphp-6-2/">éƒ¨åˆ†é…ç½®ä¸æ§åˆ¶å™¨</a> ä¸­æœ‰è¯´æ˜ï¼Œæ‰¾åˆ°å¼€å¯å¼€å‘è°ƒè¯•æ¨¡å¼ï¼Œå°±èƒ½çœ‹åˆ°ã€‚
.env ä»£ç  â†“</p>
<pre><code>APP_DEBUG = true

[APP]
DEFAULT_TIMEZONE = Asia/Shanghai

[DATABASE]
TYPE = mysql
HOSTNAME = 127.0.0.1
DATABASE = tp6
USERNAME = root
PASSWORD =
HOSTPORT = 3306
CHARSET = utf8
DEBUG = true

[LANG]
default_lang = zh-cn
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š.env æ–‡ä»¶é‡Œçš„è®¾ç½®ï¼Œä¸ database.php çš„æ–‡ä»¶å‘¼åº”å…³ç³»å¦‚ä¸‹<br>
å¦‚æœæ˜¯å¤šè¿æ¥é…ç½®<br>
è¯·ä¿æŒä¸¤ä¸ªæ–‡ä»¶å†…ç›¸å‘¼åº”ä¸€è‡´<br>
å³ï¼Œ.env æœ‰å‡ ä¸ªé…ç½®ï¼Œdatabase.php å°±æœ‰å‡ ä¸ªé…ç½®<br>
.env é…ç½® åŒç†äº database.php ï¼Œåªéœ€è¦å¤åˆ¶ç›¸åŒéƒ¨åˆ†ï¼Œç„¶ååœ¨ database.php ä¿®æ”¹æ ‡è¯†éƒ¨åˆ†å³å¯
<img src="https://UserNameZjw.github.io/post-images/1561122830109.png" alt=""></p>
</blockquote>
<p>database.phpæ–‡ä»¶ <img src="https://UserNameZjw.github.io/post-images/1561122441280.png" alt=""><br>
.env æ–‡ä»¶ <img src="https://UserNameZjw.github.io/post-images/1561122448342.png" alt=""></p>
<p>åœ¨æ•°æ®æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡ connect() æ–¹æ³•æŒ‡å®šéœ€è¦ä½¿ç”¨çš„æ•°æ®åº“è¿æ¥é…ç½®</p>
<h3 id="æ•°æ®åº“æ“ä½œ">æ•°æ®åº“æ“ä½œ</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037620">TP6 SQLè°ƒè¯•å®˜æ–¹æ–‡æ¡£</a><br>
å¦ï¼Œå¯ä»¥æŸ¥è¯¢ app/vendor/topthink/framework/src/think/db/BaseQuery.php æ–‡ä»¶ï¼Œå¼€å¯æ–°ä¸–ç•Œ</p>
<p>1.å¢<br>
save() å•æ¡æ–°å¢ï¼ŒæˆåŠŸè¿”å›æ–°å¢æ¡æ•°<br>
insert()  å•æ¡æ–°å¢ï¼ŒæˆåŠŸè¿”å›æ–°å¢æ¡æ•°<br>
insertAll()  å¤šæ¡æ–°å¢ï¼ŒæˆåŠŸè¿”å›æ–°å¢æ¡æ•°<br>
insertGetId()  å•æ¡æ–°å¢ï¼ŒæˆåŠŸè¿”å›æ–°å¢æ•°æ®è‡ªå¢ID<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037534">TP6 æ·»åŠ æ•°æ®å®˜æ–¹æ–‡æ¡£</a></p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
//        å•æ¡æ•°æ®æ’å…¥ï¼Œsave() insert() ä¸¤ç§æ–¹æ³•ç­‰åŒæ•ˆæœã€‚
//        ä½¿ç”¨ save() æ–°å¢æ•°æ®
//        $data = ['nickname' =&gt; 'save','email' =&gt; '123@snail.com'];
//        $ins = Db::name('tp')-&gt;save($data);

//        ä½¿ç”¨insert()æ–°å¢æ•°æ®
//        $data = ['nickname' =&gt; 'insert','email' =&gt; '123@snail.com'];
//        $ins = Db::name('tp')-&gt;insert($data);
//
//        å¤šæ¡æ•°æ®æ’å…¥ insertAll()
//        æ•°æ®ç»„åˆä¸ºäºŒç»´æ•°ç»„
//        $data =
//            [
//                ['nickname' =&gt; 'insertAll1','email' =&gt; '123@snail.com'],
//                ['nickname' =&gt; 'insertAll2','email' =&gt; '123@snail.com']
//            ];
        //å•æ¡æ•°æ®æ’å…¥ï¼Œä½†æ˜¯è¿”å›æ’å…¥æ•°æ®è‡ªå¢IDã€‚
        $data = ['nickname' =&gt; 'insertGetId','email' =&gt; '123@snail.com'];
        $ins = Db::name('tp')-&gt;insertGetId($data);

        if($ins){
           return &quot;æ’å…¥æˆåŠŸ&quot;;
        }else{
            return &quot;æ’å…¥å¤±è´¥&quot;;
        }
    }
}
</code></pre>
<p>ç»“æœå›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561125241203.png" alt=""></p>
<p>2.æŸ¥<br>
find()  å•æ¡æŸ¥è¯¢ï¼ŒæˆåŠŸè¿”å›ä¸€ç»´æ•°ç»„<br>
select() å¤šæ¡æŸ¥è¯¢ï¼ŒæˆåŠŸè¿”å›äºŒç»´æ•°ç»„<br>
value()  æŸ¥è¯¢æŸä¸ªå­—æ®µçš„å€¼ï¼ŒæˆåŠŸè¿”å›å­—ç¬¦ä¸²<br>
column()  æŸ¥è¯¢æŸä¸€åˆ—çš„å€¼ï¼ŒæˆåŠŸè¿”å›äºŒç»´æ•°ç»„<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037533">TP6 æŸ¥è¯¢æ•°æ®å®˜æ–¹æ–‡æ¡£</a></p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
//        æŸ¥è¯¢IDä¸º5çš„å•æ¡æ•°æ®ï¼Œè¿”å›ä¸€ç»´æ•°ç»„
//        $data = Db::name(&quot;tp&quot;)-&gt;find(&quot;5&quot;);

//        æŸ¥è¯¢æ•°æ®åº“å†…æ‰€æœ‰æ•°æ®ï¼Œè¿”å›äºŒç»´æ•°ç»„
//        $data = Db::name(&quot;tp&quot;)-&gt;select();

//        æŸ¥è¯¢å•æ¡æŸä¸ªå­—æ®µçš„å€¼ï¼Œè¿”å›å­—ç¬¦ä¸²
//        $data = Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;5&quot;)-&gt;value(&quot;nickname&quot;);

//        æŸ¥è¯¢å¤šæ¡æ•°æ®ï¼Œè¿”å›äºŒç»´æ•°ç»„
        $data = Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;&gt;&quot;,&quot;5&quot;)-&gt;column(&quot;*&quot;,&quot;id&quot;);
        dump($data);
    }
}
</code></pre>
<p>3.æ”¹<br>
save()  å•æ¡ä¿®æ”¹ï¼ŒæˆåŠŸè¿”å›æ¡æ•°<br>
update()  å•/å¤šæ¡ä¿®æ”¹ï¼ŒæˆåŠŸè¿”å›æ¡æ•°<br>
inc() è‡ªå¢<br>
dec()  è‡ªå‡<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037535">TP6 æ›´æ–°æ•°æ®å®˜æ–¹æ–‡æ¡£</a></p>
<ol>
<li>save() ä½¿ç”¨è¯¦è§£</li>
</ol>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //é…ç½®save() ä¿®æ”¹æ•°æ®ï¼Œéœ€è¦æŒ‡å®šåŒ…å«ä¸»é”® id æ‰ä¼šä¿®æ”¹æ•°æ®ï¼Œå¦åˆ™å°†ä¼šæ–°å¢æ•°æ®
        $data = [&quot;id&quot;=&gt;&quot;7&quot;,&quot;nickname&quot; =&gt; &quot;saveUp&quot;];

        //æ‰“å°ä¿®æ”¹å‰æ•°æ®
        echo &quot;ä¿®æ”¹å‰&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(&quot;7&quot;));
        
        //ä¿®æ”¹æ•°æ®
        Db::name(&quot;tp&quot;)-&gt;save($data);

        //æ‰“å°ä¿®æ”¹åæ•°æ®
        echo &quot;ä¿®æ”¹å&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(&quot;7&quot;));
    }
}
</code></pre>
<p>å›¾â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561128218256.png" alt=""><br>
2. update() è¯¦è§£</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //ç»„åˆæ•°æ®å½¢å¼ï¼Œåˆ†åˆ«æ˜¯update()ä½¿ç”¨ï¼Œä»¥åŠdata()ä½¿ç”¨
        $updateUp = [&quot;nickname&quot; =&gt; 'updateUp'];
        $dataUp = [&quot;nickname&quot; =&gt; 'dataUp'];

        //æ‰“å°ä¿®æ”¹å‰æ•°æ®
        echo &quot;æ‰“å°ä¿®æ”¹å‰æ•°æ®&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(7));

        //ä½¿ç”¨data()ä¼ å€¼æ–¹å¼ä¿®æ”¹
        Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;7&quot;)-&gt;data($dataUp)-&gt;update();

        //æ‰“å°data()ä¼ å€¼ä¿®æ”¹åæ•°æ®
        echo &quot;æ‰“å°data()ä¼ å€¼ä¿®æ”¹åæ•°æ®&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(7));

        //åŒæ—¶ä½¿ç”¨data() å’Œ update()ä¼ å€¼æ–¹å¼ï¼Œupdate() æ³•ä¼˜å…ˆçº§äº data() ä¼ å€¼
        Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;7&quot;)-&gt;data($dataUp)-&gt;update($updateUp);

        //æ‰“å°update()ä¼ å€¼ä¿®æ”¹åæ•°æ®
        echo &quot;æ‰“å°update()ä¼ å€¼ä¿®æ”¹åæ•°æ®,å¦‚æœupdate()ä¸ä¼˜å…ˆçº§ï¼Œæ•°æ®åº”è¯¥æ— å˜åŒ–&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(7));
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561129037853.png" alt=""></p>
<ol start="3">
<li>inc() dec() è¯¦è§£</li>
</ol>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        echo &quot;å°†idä¸º1çš„emailè‡ªå¢ä¸€æ¬¡ +2&lt;br&gt;&quot;;
        echo &quot;è‡ªå¢å‰&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(1));
        Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;1&quot;)-&gt;inc(&quot;email&quot;,2)-&gt;update();
        echo &quot;è‡ªå¢å&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(1));


        echo &quot;å°†idä¸º1çš„emailè‡ªå‡ä¸€æ¬¡ -1&lt;br&gt;&quot;;
        Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;1&quot;)-&gt;dec(&quot;email&quot;,1)-&gt;update();
        echo &quot;è‡ªå‡å&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(1));
        
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561184573189.png" alt=""></p>
<p>4.åˆ <br>
delete()  å½±å“æ•°æ®çš„æ¡æ•°ï¼Œæ²¡æœ‰åˆ é™¤è¿”å› 0<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037536">TP6 åˆ é™¤æ•°æ®å®˜æ–¹æ–‡æ¡£</a></p>
<blockquote>
<p>æ³¨æ„ï¼šæ…ç”¨ã€‚ä¸å­˜åœ¨åˆ åº“è·‘è·¯è¯´æ³•<br>
ä»£ç å°±å…äº†ğŸ¤£ğŸ¤£ğŸ¤£<br>
ä¸€åˆ‡æ•°æ®å‡æœ‰å…¶å­˜åœ¨çš„ä»·å€¼</p>
</blockquote>
<p>5.è°ƒè¯•<br>
fetchSql() ç›´æ¥è¿”å›å½“å‰æŸ¥è¯¢æ„é€ å™¨ç»„åˆè¯­å¥ï¼Œéœ€ä¸select() é…åˆä½¿ç”¨<br>
buildSql()  æŠŠå½“å‰æŸ¥è¯¢æ„é€ å™¨ç»„åˆè¯­å¥ä½œä¸ºå­æŸ¥è¯¢è¿”å›ï¼Œä¸¤è¾¹å¸¦æœ‰ <strong>(</strong> æŸ¥è¯¢è¯­å¥ <strong>)</strong> ï¼Œä¸éœ€è¦é…åˆselect()<br>
è¿™ä¸¤ç§æ–¹æ³•ï¼Œå‡ä¸ä¼šæ‰§è¡ŒSQLè¯­å¥</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        $where = [
            [&quot;nickname&quot;,&quot;=&quot;,&quot;Snail&quot;],
            [&quot;nickname&quot;,&quot;=&quot;,&quot;Cry&quot;]
        ];
        dump(Db::name(&quot;tp&quot;)-&gt;whereOr($where)-&gt;buildSql());
        dump(Db::name(&quot;tp&quot;)-&gt;whereOr($where)-&gt;fetchSql()-&gt;select());
    }
}
</code></pre>
<p>å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1561254467131.png" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ–‡ä»¶ä¸‹è½½ç±»ä¸å¯¹è±¡æ³¨å…¥]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-4</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-4">
        </link>
        <updated>2019-06-20T06:26:14.000Z</updated>
        <summary type="html"><![CDATA[<p>æ–‡ä»¶ä¸‹è½½<br>
å¯¹è±¡æ³¨å…¥</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ–‡ä»¶ä¸‹è½½<br>
å¯¹è±¡æ³¨å…¥</p>
<!-- more -->
<h3 id="tp-æ–‡ä»¶ä¸‹è½½">TP æ–‡ä»¶ä¸‹è½½</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037529">TP6 å®˜æ–¹æ–‡ä»¶ä¸‹è½½æ–‡æ¡£</a></p>
<p>1.ä¸‹è½½æœåŠ¡å™¨å­˜åœ¨æ–‡ä»¶</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\response\File;

class Down
{
    public function index(){
        return &quot;è¿™æ˜¯ä¸‹è½½å‰ç½®é¡µé¢ï¼Œä¸‹è½½æ–¹æ³•æ˜¯ down ï¼Œä¸ºäº†æœ‰é¡µé¢å±•ç¤º æ‰€æœ‰å°±æœ‰äº†è¿™ä¸ªæ–¹æ³•ã€‚&lt;br&gt;
                &lt;img src='../../static/image/acg.gy_50.jpg' width='500px'&gt;&lt;hr&gt;
                &lt;a href='dome'&gt;ç‚¹å‡»ä¸‹è½½å£çº¸&lt;/a&gt;&lt;br&gt;&quot;;
    }

    public function dome(){
        //TP çš„ä¸‹è½½æ–¹æ³•å¿…é¡» å­˜åœ¨å®ä½“æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰å°†ä¼šæŠ¥é”™ã€‚
        $file = new File('../public/static/image/acg.gy_50.jpg');
        //è®¾ç½®ä¸‹è½½æ–‡ä»¶åï¼Œè‡ªåŠ¨è¯†åˆ«åç¼€ï¼Œæ— éœ€è®¾ç½®ã€‚
        //return $file-&gt;name(&quot;å£çº¸&quot;);
        // ä½¿ç”¨åŠ©æ‰‹å‡½æ•°å’Œä¸Šé¢çš„ä¸‹è½½æ–‡ä»¶åæ˜¯ä¸€æ ·çš„æ•ˆæœ
        //return download('../public/static/image/acg.gy_50.jpg', 'å£çº¸');
        // è®¾ç½®300ç§’æœ‰æ•ˆæœŸ
        return download('../public/static/image/acg.gy_50.jpg', 'å£çº¸')-&gt;expire(300);
    }
}
</code></pre>
<p>ä¸‹è½½å‰ç½®é¡µé¢<br>
<img src="https://UserNameZjw.github.io/post-images/1561014219005.png" alt=""><br>
ç‚¹å‡»ä¸‹è½½å<br>
<img src="https://UserNameZjw.github.io/post-images/1561014321900.png" alt=""></p>
<p>2.ä¸‹è½½ä¸å­˜åœ¨çš„æ–‡æœ¬<br>
éœ€è¦ç”³æ˜ä¸€ä¸‹ isContent(true)</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\response\File;

class Down
{
    public function index(){
        return &quot;è¿™æ˜¯ä¸‹è½½å‰ç½®é¡µé¢ï¼Œä¸‹è½½æ–¹æ³•æ˜¯ down ï¼Œä¸ºäº†æœ‰é¡µé¢å±•ç¤º æ‰€æœ‰å°±æœ‰äº†è¿™ä¸ªæ–¹æ³•ã€‚&lt;br&gt;
                &lt;img src='../../static/image/acg.gy_50.jpg' width='500px'&gt;&lt;hr&gt;
                &lt;a href='dome'&gt;ç‚¹å‡»ä¸‹è½½å£çº¸&lt;/a&gt;&lt;br&gt;&quot;;
    }

    public function dome(){
        //å¦‚æœä½ ä»…ä»…æ˜¯æƒ³ä¸‹è½½ä¸€äº›å†™å…¥å†…å®¹çš„æ–‡æ¡£ï¼Œéœ€è¦å‘Šè¯‰TP è¿™æ˜¯å¯ä¸‹è½½æ–‡ä»¶ã€‚
        $file = new File('è¿™æ˜¯å†…å®¹ï¼Œå¦‚æœæƒ³ä¸‹è½½æˆ‘ï¼Œéœ€è¦ç”¨åˆ° isContent(true) ');
        return $file-&gt;name(&quot;æµ‹è¯•æ–‡æ¡£.txt&quot;)-&gt;isContent(true);
    }
}
</code></pre>
<p>ä¸‹è½½ç»“æœ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561015047885.png" alt=""></p>
<h3 id="è¯·æ±‚å¯¹è±¡çš„æ³¨å…¥ä¸è°ƒç”¨">è¯·æ±‚å¯¹è±¡çš„æ³¨å…¥ä¸è°ƒç”¨</h3>
<p>1.æ„é€ æ–¹æ³•æ³¨å…¥<br>
æ˜¯æŒ‡æ²¡æœ‰ç»§æ‰¿ BaseController åŸºç±»æƒ…å†µä¸‹ä½¿ç”¨<br>
å¦‚æœç»§æ‰¿äº† BaseController åŸºç±»ï¼Œç›´æ¥ä½¿ç”¨åŒæ ·çš„è°ƒç”¨æ–¹æ³•å³å¯ï¼Œä¸ç”¨å†æ³¨å…¥</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\Request;

class Down
{
    protected $request;

    public function __construct(Request $request)
    {
        $this-&gt;request = $request;
    }

    public function index(){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump($this-&gt;request-&gt;get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump($this-&gt;request-&gt;post(['name'=&gt;'Cry']));

    }
}
</code></pre>
<p>2.æ“ä½œæ–¹æ³•æ³¨å…¥<br>
ä¸ç®¡æœ‰æ²¡æœ‰ç»§æ‰¿ BaseController åŸºç±»ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ­¤æ–¹å¼</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\Request;

class Down
{

    public function index(Request $request){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump($request-&gt;get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump($request-&gt;post(['name'=&gt;'Cry']));

    }
}
</code></pre>
<p>3.é™æ€è°ƒç”¨<br>
é™æ€è°ƒç”¨æ˜¯åˆ©ç”¨TP6 çš„ facade æœºåˆ¶æ¥é™æ€è¯·æ±‚çš„ï¼Œuse çš„æ—¶å€™éœ€è¦æ³¨æ„è·¯å¾„<br>
éœ€è¦<strong>æ‰‹åŠ¨</strong> use  think\facade\Request;<br>
ä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„ï¼Ÿå› ä¸ºç°é˜¶æ®µçš„ ã€Œç¼–è¾‘è½¯ä»¶ã€ ä¸ä¼šè‡ªåŠ¨è¡¥å…¨facade çš„ use è·¯å¾„  ğŸ‘»ğŸ‘»ğŸ‘»</p>
<pre><code>&lt;?php
namespace app\index\controller;

use \think\facade\Request;

class Down
{
    public function index(){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump(Request::get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump(Request::post(['name'=&gt;'Cry']));
    }
}
</code></pre>
<p>4.åŠ©æ‰‹å‡½æ•°<br>
TP6 ä¸€ç›´ä¸ºç”¨æˆ·å°è£…äº†å¾ˆå¤šåŠ©æ‰‹å‡½æ•°ï¼ŒåŸºæœ¬æ¶µç›–äº†å¸¸ç”¨çš„æ‰€æœ‰éœ€æ±‚<br>
ä¹Ÿå°±æ˜¯è¯´ï¼ŒTP6ä¸è¾è¾›è‹¦çš„æŠŠæ¯ä¸€ä¸ªäººçš„å†™æ³•ï¼Œéƒ½å°½é‡å…¼å®¹ğŸ˜‚ğŸ˜‚<br>
æ— éœ€æ³¨å…¥ï¼Œæ— éœ€ç»§æ‰¿ BaseController ï¼Œä»»ä½•é¢å¤–æ“ä½œéƒ½ä¸éœ€è¦ğŸ˜‚ğŸ˜‚
<strong>ä½†æ˜¯å®˜æ–¹å°±æ˜¯ä¸ä¼˜å…ˆæ¨è</strong> ğŸ˜‚ğŸ˜‚ğŸ˜‚<br>
å…¶å®é‡Œé¢æœ‰çš„ä¹Ÿæ˜¯ facade</p>
<pre><code>&lt;?php
namespace app\index\controller;

class Down
{
    public function index(){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump(request()-&gt;get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump(request()-&gt;post(['name'=&gt;'Cry']));
    }
}
</code></pre>
<h3 id="ä¼ªé™æ€">ä¼ªé™æ€</h3>
<p>é»˜è®¤æ”¯æŒ .html ä½œä¸ºåç¼€</p>
<blockquote>
<p>ä¿®æ”¹æ–¹å¼ï¼šapp\config\route.php æ–‡ä»¶ä¸‹ 'url_html_suffix'       =&gt; 'html' ï¼Œå¦‚æœæƒ³å…³é—­ï¼Œæ”¹ä¸º false ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤ä»»ä½•åç¼€éƒ½å¯è®¿é—®ã€‚<br>
å¦‚æœæƒ³æ”¯æŒå¤šåç¼€ 'url_html_suffix'       =&gt; 'html|xml'</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ§åˆ¶å™¨éªŒè¯ä¸å“åº”]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-3</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-3">
        </link>
        <updated>2019-06-16T09:50:37.000Z</updated>
        <summary type="html"><![CDATA[<p>æ§åˆ¶å™¨éªŒè¯<br>
å“åº”</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ§åˆ¶å™¨éªŒè¯<br>
å“åº”</p>
<!-- more -->
<h3 id="controller-åŸºç±»ç»§æ‰¿å¼•ç”¨">Controller åŸºç±»ç»§æ‰¿å¼•ç”¨</h3>
<p>é€šè¿‡ç»§æ‰¿ BaseController åŸºç±»ï¼Œæ³¨å…¥ app ä»¥åŠ request<br>
æœ¬æ–‡ä»…ä¸¾ä¸¤ä¸ªæµ…æ˜¾çš„è°ƒç”¨ä¾‹å­<br>
1.è·å–å½“å‰æ“ä½œå  $action = $this-&gt;request-&gt;action();<br>
2.è·å–å½“å‰åº”ç”¨åŸºç¡€ç›®å½•  $path = $this-&gt;app-&gt;getBasePath();<br>
<img src="https://UserNameZjw.github.io/post-images/1560679805511.png" alt=""><br>
ç®€æ˜“ä»£ç  â†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;

class Index extends BaseController
{
    public function index()
    {
        //è·å–å½“å‰æ“ä½œå
        echo $action = $this-&gt;request-&gt;action();
        echo '&lt;br&gt;è·å–å½“å‰æ“ä½œåä»£ç  ï¼š$action = $this-&gt;request-&gt;action();&lt;br&gt; ';
        // è·å–å½“å‰åº”ç”¨åŸºç¡€ç›®å½•
        echo $path = $this-&gt;app-&gt;getBasePath();
        echo '&lt;br&gt;è·å–å½“å‰åº”ç”¨åŸºç¡€ç›®å½• ï¼š$path = $this-&gt;app-&gt;getBasePath();&lt;br&gt; ';
        echo &quot;ä»¥ä¸Šä¸¤ä¸ªè°ƒç”¨ request app å‡é€šè¿‡åŸºç±» BaseController.php æ³¨å…¥&lt;br&gt;&quot;;
        echo &quot;åªéœ€ç»§æ‰¿ BaseController ç±»å³å¯è°ƒç”¨&quot;;
    }
}
</code></pre>
<p>æ³¨æ„ï¼š<br>
å¦‚æœä½ æ˜¯å¤šåº”ç”¨æ¨¡å¼ï¼Œå¯ä»¥åœ¨ åº”ç”¨ç›®å½•ä¸‹åŒæ ·åˆ›å»ºä¸€ä¸ª BaseController.php åŸºç±»æ–‡ä»¶<br>
ThinkPHP 6 åœ¨å¯»å€çš„æ—¶å€™ï¼Œä¼˜å…ˆå°±è¿‘åŸåˆ™ã€‚</p>
<h3 id="æ§åˆ¶å™¨éªŒè¯">æ§åˆ¶å™¨éªŒè¯</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037629">TP6 å®˜æ–¹å†…ç½®è§„åˆ™</a><br>
1.é€šè¿‡å¼•ç”¨ validate å‡½æ•°ç›´æ¥åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨<br>
Validate(è§„åˆ™,è¿”å›æç¤º)-&gt;check(æ•°æ®)<br>
è¿™ä¸ªç®€å•ï¼Œå°±ä¸åšè¿‡å¤šä»‹ç»</p>
<pre><code>&lt;?php
namespace app\index\controller;

class Validate
{ 
    public function index ()
    {
        //å®šä¹‰éªŒè¯è§„åˆ™
        $rule = [
            'name' =&gt; &quot;require|max:10&quot;,
            'email' =&gt; &quot;email&quot;
        ];

        // å®šä¹‰é”™è¯¯è¿”å›ä¿¡æ¯

        $message = [
            &quot;name&quot; =&gt; [&quot;require&quot; =&gt; 'åç§°ä¸èƒ½ä¸ºç©º','max' =&gt; 'åç§°æœ€å¤§é•¿åº¦ä¸º10'],
            'email' =&gt; 'é‚®ç®±æ ¼å¼é”™è¯¯'
        ];

        // å®šä¹‰æ¨¡æ‹Ÿæ•°æ®
        $data = [
            'name' =&gt; 'Cry',
            'email' =&gt; 'snail@qq.com'
        ];

        // éªŒè¯è§„åˆ™
        // Validate(è§„åˆ™,è¿”å›æç¤º)-&gt;check(æ•°æ®)
        $result = Validate($rule,$message)-&gt;check($data);

        if(!$result){
            // è·å–æŠ¥é”™æ•°æ®
            return Validate()-&gt;getError();
        }else{
            return 'éªŒè¯é€šè¿‡';
        }
    }
}
</code></pre>
<p>2.é€šè¿‡å¼•ç”¨ validate å¯¹è±¡ç›´æ¥åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨<br>
ç»§æ‰¿åŸºç±» BaseController ç±»<br>
$this-&gt;validate(æ•°æ®,éªŒè¯è§„åˆ™,è¿”å›æç¤º);</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;

class Validate extends BaseController
{ 
    public function index ()
    {
        //å®šä¹‰éªŒè¯è§„åˆ™
        $rule = [
            'name' =&gt; &quot;require|max:10&quot;,
            'email' =&gt; &quot;email&quot;
        ];

        // å®šä¹‰é”™è¯¯è¿”å›ä¿¡æ¯

        $message = [
            &quot;name&quot; =&gt; [&quot;require&quot; =&gt; 'åç§°ä¸èƒ½ä¸ºç©º','max' =&gt; 'åç§°æœ€å¤§é•¿åº¦ä¸º10'],
            'email' =&gt; 'é‚®ç®±æ ¼å¼é”™è¯¯'
        ];

        // å®šä¹‰æ¨¡æ‹Ÿæ•°æ®
        $data = [
            'name' =&gt; 'Cry',
            'email' =&gt; 'snail@qq.com'
        ];

        // éªŒè¯è§„åˆ™
        $result = $this-&gt;validate($data,$rule,$message);

        if(!$result){
            // è·å–æŠ¥é”™æ•°æ®
            return Validate()-&gt;getError();
        }else{
            return 'éªŒè¯é€šè¿‡';
        }
    }
}
</code></pre>
<p>3.è‡ªå®šä¹‰éªŒè¯è§„åˆ™<br>
éªŒè¯ä¸‹å›¾è¦æ±‚(å‡ä½¿ç”¨ ThinkPHP6 å†…ç½®è§„åˆ™)<br>
<img src="https://UserNameZjw.github.io/post-images/1560694503550.png" alt=""><br>
1.éœ€è¦é¢å¤–åˆ›å»ºä¸€ä¸ªéªŒè¯æ–‡ä»¶</p>
<blockquote>
<p>åœ¨ app ç›®å½•ä¸‹åˆ›å»º validate æ–‡ä»¶å¤¹ï¼Œç„¶ååˆ›å»º User.php æ–‡ä»¶ä½œä¸ºè‡ªå®šä¹‰è§„åˆ™æ–‡ä»¶ã€‚</p>
</blockquote>
<p>ç›®å½•ï¼šapp\validate\User .php ä»£ç å¦‚ä¸‹ â†“<br>
æ³¨æ„ä»£ç æ ¼å¼ï¼Œä¸éœ€è¦åˆ›å»ºæ–¹æ³•ï¼Œç›´æ¥å†™éªŒè¯è§„åˆ™å’ŒéªŒè¯è¿”å›å³å¯<br>
ç”¨ protected å£°æ˜<br>
rule éªŒè¯å˜é‡ï¼Œmessage è¿”å›å˜é‡</p>
<pre><code>&lt;?php
namespace app\validate;

use think\Validate;

class User extends Validate
{
    protected $rule = [
        'user_name' =&gt; 'require|chsAlphaNum|length:6,10',
        'password' =&gt; 'require|alphaNum|length:6,10',
        'email' =&gt; 'email',
        'mobile' =&gt; 'require|mobile|number|length:11'
    ];

    protected $message = [
        'user_name' =&gt; ['require' =&gt; 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º','chsAlphaNum' =&gt; 'ç”¨æˆ·åå¿…é¡»ä¸ºå­—æ¯å’Œæ•°å­—æˆ–æ±‰å­—','length' =&gt; 'ç”¨æˆ·åé•¿åº¦åº”åœ¨6è‡³10ä½'],
        'password' =&gt; ['require' =&gt; 'å¯†ç ä¸èƒ½ä¸ºç©º','alphaNum' =&gt; 'å¯†ç å¿…é¡»ä¸ºæ•°å­—å’Œå­—æ¯ç»„åˆ','length' =&gt; 'å¯†ç é•¿åº¦åº”åœ¨6è‡³10ä½'],
        'email' =&gt; ['email' =&gt; 'é‚®ç®±æ ¼å¼æœ‰è¯¯'],
        'mobile' =&gt; ['require' =&gt; 'æ‰‹æœºä¸èƒ½ä¸ºç©º','number' =&gt; 'æ‰‹æœºå·å¿…é¡»ä¸ºæ•°å­—','length' =&gt; 'æ‰‹æœºå·é•¿åº¦å¿…é¡»11ä½','mobile' =&gt; 'ä¸æ˜¯å¯ç”¨æ‰‹æœºå·']
    ];
}
</code></pre>
<p>2.åœ¨ app\index\controller\Index.php ä¸‹è°ƒç”¨<br>
å¼•å…¥ User.php ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ â†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\validate\User;

class Index extends BaseController
{
    public function index()
    {
        $data = [
            'user_name' =&gt; 'Cry666è¶…å¸…çš„',
            'password' =&gt; '123456qwe',
            'email' =&gt; 'snail@qq.com',
            'mobile' =&gt; '13112121211'
        ];

        $result = Validate(User::class)-&gt;check($data);

        if(!$result){
            // è·å–æŠ¥é”™æ•°æ®
            return Validate()-&gt;getError();
        }else{
            return 'éªŒè¯é€šè¿‡';
        }
    }
}
</code></pre>
<h3 id="å“åº”">å“åº”</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037526">TP6 å®˜æ–¹å“åº”è¾“å‡º</a><br>
é™¤äº†è·¯ç”±ï¼Œéœ€è¦æ³¨æ„çš„å¯èƒ½å°±æ˜¯é‡å®šå‘äº†</p>
<p>1.é‡å®šå‘<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037528">TP6 å®˜æ–¹é‡å®šå‘</a><br>
åªéœ€è¦è°ƒç”¨ redirect(URL) åŠ©æ‰‹å‡½æ•° å³å¯<br>
ä¸Šä¸€ä¸ªå®˜æ–¹ä¾‹å­ä»£ç ï¼Œä¾‹å­å°†ç›´æ¥è·³è½¬åˆ°TP å®˜ç½‘â†“</p>
<pre><code>&lt;?php
namespace app\controller;

class Index
{
    public function hello()
    {
        return redirect('http://www.thinkphp.cn');
    }
}
</code></pre>
<p>ä¸ªäººä¾‹å­
app/index/controller/Index.php ä»£ç â†“</p>
<pre><code>    public function dome($name = 'Cry')
    {
        return &quot;hello ,&quot;. $name .&quot;! è¿™æ˜¯é‡å®šå‘åçš„ dome é¡µé¢&quot;;
    }

    public function name()
    {
//      ç›´æ¥æ— ä¼ å€¼å®šå‘
//      return redirect(&quot;index/index/dome&quot;);
        return redirect(&quot;dome&quot;);
    }
</code></pre>
<p>æ‰“å¼€åé¡µé¢æ˜¾ç¤ºç»“æœ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560930051407.png" alt=""></p>
<p>2.é‡å®šå‘ä¼ å€¼</p>
<pre><code>    public function dome($name = 'Cry')
    {
        return &quot;hello ,&quot;. $name .&quot;! è¿™æ˜¯é‡å®šå‘åçš„ dome é¡µé¢&quot;;
    }

    public function name()
    {
//        ç›´æ¥ä¼ å€¼å®šå‘
//        1.ç›´æ¥åœ¨ä¸Šæ‹¼æ¥
//        return redirect(&quot;index/index/dome?name=Snail&quot;);
//        æˆ–è€…ç”¨ TP åˆ†éš”ç¬¦ / è¿›è¡Œä¼ å€¼
//        return redirect(&quot;index/index/dome/name/Snail&quot;);

//        2.ä½¿ç”¨ params åŠ©æ‰‹å‡½æ•°é…åˆ
//        return redirect('dome')-&gt;params(['name'=&gt;'Snail']);

//        3.ç›´æ¥ä¼ é€’æ•°ç»„ï¼Œæ¨è
        return redirect('dome',['name'=&gt;'Snail']);
    }
</code></pre>
<p>è®¿é—®ç»“æœâ†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560930782212.png" alt=""><br>
æ³¨æ„ï¼šåŒå‘½åç©ºé—´ä¸‹ï¼Œå¯ä»¥çœç•¥è¯¦ç»†è·¯å¾„ï¼</p>
<p>3.é‡å®šå‘åˆ©ç”¨ session é—ªå­˜æ•°æ®<br>
é—ªå­˜ã€å›æºï¼Œéœ€è¦å€ŸåŠ© session å®ç°ï¼ŒTP6é»˜è®¤ä¸å¼€å¯ session<br>
å¼€å¯æ–¹æ³•ï¼šæŠŠ app/middlware.php ä¸‹çš„ session åˆå§‹åŒ–æ³¨é‡Šåˆ é™¤å³å¯ â†“</p>
<pre><code>&lt;?php

return [
    // å…¨å±€è¯·æ±‚ç¼“å­˜
    // 'think\middleware\CheckRequestCache',
    // å¤šè¯­è¨€åŠ è½½
    // 'think\middleware\LoadLangPack',
    // Sessionåˆå§‹åŒ–
     'think\middleware\SessionInit',
    // é¡µé¢Traceè°ƒè¯•
    // 'think\middleware\TraceDebug',
];
</code></pre>
<p>é—ªå­˜æ•°æ®éœ€è¦å€ŸåŠ© with(å˜é‡å,å˜é‡å€¼) æ–¹æ³•ï¼Œå†™å…¥åˆ° session ç¼“å­˜ ä»£ç å¦‚ä¸‹ â†“</p>
<pre><code>    public function dome()
    {
        //åˆ©ç”¨session åŠ©æ‰‹å‡½æ•° è°ƒç”¨
        $name = session('name');
        return &quot;hello ,&quot;. $name .&quot;! è¿™æ˜¯é‡å®šå‘åçš„ dome é¡µé¢&quot;;
    }

    public function name()
    {
        return redirect('dome')-&gt;with(&quot;name&quot;,&quot;Snail&quot;);
    }
</code></pre>
<blockquote>
<p>æ³¨æ„äº‹é¡¹ï¼šé‡å®šå‘ç›®æ ‡é¡µé¢å¦‚æœæ‰‹åŠ¨åˆ·æ–°ï¼Œå°†ä¼šä¸¢å¤±session ä¼ é€’å€¼ã€‚</p>
</blockquote>
<p>å›¾ä¸€ï¼š<img src="https://UserNameZjw.github.io/post-images/1560932232698.png" alt=""><br>
å›¾äºŒï¼š<img src="https://UserNameZjw.github.io/post-images/1560932251677.png" alt=""></p>
<p>é‡å®šå‘å›æºåˆ©ç”¨ remember() æ–¹æ³•è®°ä½é‡å®šå‘æ¥æºé¡µ</p>
<pre><code>//é‡å®šå‘æŒ‡å‘
    public function dome()
    {
        //åˆ©ç”¨session åŠ©æ‰‹å‡½æ•° è°ƒç”¨
        $name = session('name');
        return &quot;hello ,&quot;. $name .'! è¿™æ˜¯é‡å®šå‘åçš„ dome é¡µé¢&lt;br&gt;&lt;a href=&quot;/index/index/back&quot;&gt;ç‚¹å‡»å›åˆ°æ¥æºåœ°å€&lt;/a&gt;';
    }

    //è®¿é—®é“¾æ¥
    public function name()
    {
        // åˆ¤æ–­sessionå®Œæˆæ ‡è®°æ˜¯å¦å­˜åœ¨
        // ä¸»è¦æ˜¯ç”¨äºå›æºå®Œæˆåæ‰§è¡Œ
        if (session('?back')) {
            // åˆ é™¤session
            session('back', null);
            return 'é‡å®šå‘å®Œæˆï¼Œå›åˆ°åŸç‚¹!';
        } else {
            //åˆ©ç”¨ remember æ–¹æ³•è®°ä½å½“å‰åœ°å€ã€‚
            return redirect('dome')-&gt;with(&quot;name&quot;,&quot;Snail&quot;)-&gt;remember();
        }

    }

    //è®¾ç½®æ ‡è®°ä¸­è½¬æ–¹æ³•
    public function back(){
        //è®¾ç½®åˆ¤æ–­å˜é‡ back
        session('back',true);
        //å›åˆ°åŸå€
        return redirect()-&gt;restore();
    }
</code></pre>
<p>å…·ä½“ç»“æœå›¾ â†“<br>
å›¾ä¸€ï¼š<img src="https://UserNameZjw.github.io/post-images/1560933916857.png" alt=""><br>
å›¾äºŒï¼š<img src="https://UserNameZjw.github.io/post-images/1560933935189.png" alt=""><br>
å›¾ä¸‰ï¼š<img src="https://UserNameZjw.github.io/post-images/1560933943252.png" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼šå›¾ä¸‰æ‰€æè¿°çš„åœºæ™¯ï¼Œåˆ·æ–°é‡å®šå‘ã€Œç›®æ ‡é¡µã€ï¼Œä¼šä¸¢çš„ä¸ä»…ä»…æ•°æ®ï¼Œè¿˜æœ‰å›å®¶çš„è·¯ã€‚</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€éƒ¨åˆ†é…ç½®ä¸æ§åˆ¶å™¨]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-2</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-2">
        </link>
        <updated>2019-06-14T04:36:21.000Z</updated>
        <summary type="html"><![CDATA[<p>ThinkPHP 6.0 éƒ¨åˆ†é…ç½®<br>
ThinkPHP 6.0 æ§åˆ¶å™¨</p>
]]></summary>
        <content type="html"><![CDATA[<p>ThinkPHP 6.0 éƒ¨åˆ†é…ç½®<br>
ThinkPHP 6.0 æ§åˆ¶å™¨</p>
<!-- more -->
<blockquote>
<p>å¦‚æœæ˜¯ Nginx æœåŠ¡å™¨ï¼Œå¹¶ä¸”ç‰ˆæœ¬ä¸æ˜¯å¤ªé«˜ï¼Œä½ éœ€è¦çœ‹ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£ä¸­çš„ Nginx çš„è·¯ç”±è½¬å‘é…ç½®ï¼Œé¿å…ä¸€ä¸‹ä¸å¿…è¦çš„å‘</p>
</blockquote>
<p>å®˜ç½‘å‚è€ƒé“¾æ¥ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037488">TP6 URLè®¿é—®</a><br>
æ‰¾åˆ° ã€ŒNginxã€éƒ¨åˆ† å›¾â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560508162806.png" alt=""></p>
<pre><code>location / { // â€¦..çœç•¥éƒ¨åˆ†ä»£ç 
   if (!-e $request_filename) {
   		rewrite  ^(.*)$  /index.php?s=/$1  last;
    }
}
</code></pre>
<p>å¦‚æœä½ ç”¨çš„æ˜¯è·Ÿæˆ‘ä¸€æ ·çš„ MxSrvs è½¯ä»¶ï¼Œé…ç½®å¦‚ä¸‹â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560508384596.png" alt=""><br>
ç„¶åé‡å¯ Nginx æœåŠ¡å™¨å³å¯ã€‚</p>
<h3 id="å˜åŒ–">å˜åŒ–</h3>
<p>1.æ ¹ç›®å½•æ–‡ä»¶åå˜åŒ–</p>
<blockquote>
<p>ThinkPHP 5 ç‰ˆæœ¬(å›¾å·¦)æ˜¯ application æ–‡ä»¶å¤¹ï¼ŒThinkPHP 6 ç‰ˆæœ¬(å›¾å³)ç›´æ¥å‘½åå°±æ˜¯ app æ–‡ä»¶å¤¹ã€‚
<img src="https://UserNameZjw.github.io/post-images/1560509598577.png" alt=""></p>
</blockquote>
<p>2.é»˜è®¤ç”¨æ¨¡å¼</p>
<blockquote>
<p>ThinkPHP 6 é»˜è®¤æ˜¯å•åº”ç”¨æ¨¡å¼ï¼ŒTP5 ç‰ˆæœ¬é»˜è®¤æ˜¯å¤šåº”ç”¨æ¨¡å¼ã€‚<br>
TP6 çš„å¤šåº”ç”¨æ¨¡å¼éœ€è¦æ‰‹åŠ¨å¼€å¯æ”¯æŒã€‚<br>
å¼€å¯æ–¹æ³•ä¿®æ”¹ config/app.php é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸º  'auto_multi_app'   =&gt; true å³å¯ã€‚<br>
å•ä¾‹æ¨¡å¼ä¸­ï¼Œåœ¨æ§åˆ¶å™¨ç©ºé—´å‘½åä¸­ï¼Œå¯ä»¥çœç•¥æ‰åº”ç”¨å index ï¼ˆä¸¾ä¾‹ï¼‰ã€‚<br>
å‘½åç©ºé—´<br>
TP5 å†™æ³•  <strong>namespace app\index\controller;</strong><br>
TP6 å†™æ³•  <strong>namespace app\controller;</strong>   (å•åº”ç”¨æ¨¡å¼)<br>
æ–‡ä»¶ä½ç½®<br>
TP5 æ–‡ä»¶ä½ç½® <strong>application/index/controller/Index.php</strong><br>
TP6 æ–‡ä»¶ä½ç½® <strong>app/controller/Index.php</strong><br>
å¤šåº”ç”¨å¼€å¯åï¼Œå°±éœ€è¦è·ŸTP5ä¸€æ ·çš„å†™æ³•</p>
</blockquote>
<p>æ³¨æ„ï¼šå¦‚æœå¼€å¯å¤šåº”ç”¨æ¨¡å¼ï¼Œéœ€è¦åˆ é™¤æ‰æ¡†æ¶é»˜è®¤è‡ªå¸¦çš„ controller æ–‡ä»¶å¤¹ï¼Œä¸ç„¶ä¼šä¾ç„¶æ¯æ¬¡è®¿é—®ï¼Œéƒ½é»˜è®¤åˆ° controller ã€‚</p>
<p>3.æ§åˆ¶å™¨å‘½åè§„èŒƒå˜åŒ–</p>
<blockquote>
<p>TP 5 ä¸­éœ€è¦æ§åˆ¶å™¨æ–‡ä»¶åå¿…é¡»é‡‡ç”¨é©¼å³°å‘½åï¼ˆé¦–å­—æ¯å¤§å†™: Indexï¼‰ã€‚<br>
TP6 ä¸­å…¼å®¹äº†æ™®é€šå†™æ³•ï¼Œæ–‡ä»¶åå®Œå…¨å°å†™: index ï¼Œåªéœ€è¦ä½ çš„ç±»åè·Ÿæ–‡ä»¶åä¿æŒä¸€è‡´å³å¯<br>
å‡è®¾ æ–‡ä»¶åä¸º index.php ï¼Œé‚£ä¹ˆç±»çš„å†™æ³•ä¸º class index{ } ã€‚</p>
</blockquote>
<p>4.æ”¯æŒæ§åˆ¶å™¨å¤§é©¼å³°å‘½å  (ä¸¤è€…éƒ½é»˜è®¤æ”¯æŒ)</p>
<blockquote>
<p>ä¸¾ä¾‹ï¼š<br>
æ§åˆ¶å™¨æ–‡ä»¶åä¸º HelloWorld.php ï¼Œç±»åä¿æŒä¸€è‡´ä¸º class HelloWorld { }<br>
æ–‡ä»¶è·¯å¾„ app\index\controller\HelloWorld.php<br>
è®¿é—®åœ°å€ http://localhost/index.php/hello_world<br>
ç°æ”¯æŒ http://localhost/index.php/HelloWorld  è®¿é—®
æ­¤åŠŸèƒ½é»˜è®¤å¼€å¯ï¼Œå¦‚æœæƒ³å…³é—­ï¼Œéœ€è¦ä¿®æ”¹ route.php é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸º url_convert'   =&gt; false  å³å¯ã€‚</p>
</blockquote>
<p>5.æ§åˆ¶å™¨æ–‡ä»¶åé»˜è®¤çœç•¥ controller  åç¼€</p>
<blockquote>
<p>TP3.x ç‰ˆæœ¬ï¼Œå°±æ˜¯ä¸çœç•¥ controller åç¼€ï¼Œå¼€å¯å¯ä»¥ç”¨ä½œå…¼å®¹ä½ç‰ˆæœ¬æ–‡ä»¶æ¥ç”¨ã€‚<br>
é»˜è®¤æ§åˆ¶å™¨æ–‡ä»¶åæ ¼å¼ Index.phpï¼Œå¼€å¯åï¼Œéœ€è¦æŠŠæ§åˆ¶å™¨æ–‡ä»¶åæ ¼å¼å˜æ›´ä¸º IndexController.php<br>
å¼€å¯æ–¹æ³•ï¼Œä¿®æ”¹ route.php é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸º 'controller_suffix'     =&gt; true</p>
</blockquote>
<p>6.é”™è¯¯ä¿¡æ¯</p>
<blockquote>
<p>TP6 ä¸­é»˜è®¤æ²¡æœ‰å¼€å¯é”™è¯¯ä¿¡æ¯<br>
åªéœ€è¦ä¿®æ”¹ config/app.php é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸º 'show_error_msg'   =&gt; true å³å¯æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œé»˜è®¤å…³é—­ã€‚</p>
</blockquote>
<p>7.å¼€å¯å¼€å‘è°ƒè¯•æ¨¡å¼<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037618">TP6 å®˜æ–¹è°ƒè¯•æ¨¡å¼</a><br>
<img src="https://UserNameZjw.github.io/post-images/1560782224176.png" alt=""><br>
æ³¨æ„ï¼šæ˜¯æ–‡ä»¶å .example..env æŠŠ .env ä¹‹å‰çš„å…¨éƒ¨åˆ æ‰ï¼Œä»…ä»…ä¿ç•™ .env ã€‚<br>
ç„¶åæŠ¥é”™å›¾å¦‚ä¸‹â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560782376130.png" alt=""></p>
<h3 id="é…ç½®å°ç»“">é…ç½®å°ç»“</h3>
<p>æœ¬å°ç»“ä»…é™æœ¬æ–‡å‡ºç°ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–å¥½çš„é…ç½®ã€‚<br>
1.å¼€å¯å¤šåº”ç”¨æ¨¡å¼</p>
<blockquote>
<p>ä¿®æ”¹ config/app.php é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸º  'auto_multi_app'   =&gt; true</p>
</blockquote>
<p>2.å…³é—­æ§åˆ¶å™¨å¤§é©¼å³°å‘½åè®¿é—®æ”¯æŒ</p>
<blockquote>
<p>ä¿®æ”¹ route.php é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸º url_convert'   =&gt; false</p>
</blockquote>
<p>3.å¼€å¯é”™è¯¯ä¿¡æ¯</p>
<blockquote>
<p>ä¿®æ”¹ config/app.php é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸º 'show_error_msg'   =&gt; true</p>
</blockquote>
<p>4.å¼€å¯æ§åˆ¶å™¨ä¸¥æ ¼æ¨¡å¼ï¼Œå³æ–‡ä»¶åä¸çœç•¥ Controller</p>
<blockquote>
<p>ä¿®æ”¹ route.php é…ç½®æ–‡ä»¶ä¸­é…ç½®ä¸º 'controller_suffix'     =&gt; true</p>
</blockquote>
<p>5.å¼€å¯å¼€å‘è°ƒè¯•æ¨¡å¼</p>
<blockquote>
<p>åªéœ€è¦æŠŠæ ¹ç›®å½•ä¸‹ .example..env æ–‡ä»¶æ›´åä¸º <strong>.env</strong> å³å¯ã€‚</p>
</blockquote>
<h3 id="é…ç½®æ“ä½œ">é…ç½®æ“ä½œ</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037484">ThinkPHP 6 å®˜æ–¹é…ç½®</a><br>
1.é…ç½®è·å–<br>
æ“ä½œé…ç½®ï¼Œéœ€è¦å¼•å…¥ Config ç±»æ–‡ä»¶</p>
<pre><code>use think\facade\Config;
</code></pre>
<p>2.è¯»å–é…ç½®  Config::get()</p>
<p>è¯»å–ä¸€çº§é…ç½®æ‰€æœ‰å‚æ•°</p>
<pre><code>Config::get('app');
Config::get('route');
</code></pre>
<p>è¯»å–å•ä¸ªé…ç½®</p>
<pre><code>Config::get('app.app_name');
Config::get('route.url_domain_root');
</code></pre>
<p>è¯»å–æ•°ç»„é…ç½®</p>
<pre><code>Config::get('database.default.host');
</code></pre>
<p>3.åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªé…ç½®  Config::has()</p>
<pre><code>Config::has('template');
Config::has('route.route_rule_merge');
</code></pre>
<p>4.ä¿®æ”¹é…ç½®  Config::set()<br>
ä¸åœ¨æ”¯æŒå•ä¸ªé…ç½®æ›´æ–°ï¼Œéœ€è¦æ•°ç»„æ‰¹é‡æ›´æ–°é…ç½®</p>
<pre><code>&lt;?php
namespace app\index\controller;
use think\facade\Config;
class Index
{
    public function index()
    {
        //åŸä¸ºtrue 
        Config::set([&quot;show_error_msg&quot; =&gt; false],'app');
        $a = Config::get(&quot;app&quot;);
        var_dump($a);
    }
}
</code></pre>
<h3 id="æ§åˆ¶å™¨">æ§åˆ¶å™¨</h3>
<p>1.ç»å…¸å‹æ§åˆ¶å™¨(å¤šåº”ç”¨æ¨¡å¼)</p>
<pre><code>&lt;?php
namespace app\index\controller;

class Index
{
    public function index()
    {
        return 'index';
    }
}
</code></pre>
<p>æ–‡ä»¶ä½ç½®ï¼šapp\index\controller\Index.php<br>
è®¿é—®URLï¼šhttp://localhost/index.php/index</p>
<p>2.å¤šçº§æ§åˆ¶å™¨(ç†è®ºæ”¯æŒæ— é™çº§)<br>
æ³¨æ„å¤šçº§æ§åˆ¶çš„å‘½åç©ºé—´å†™æ³•</p>
<pre><code>&lt;?php
namespace app\index\controller\user;

class  Blog 
{
    public function index()
    {
        return 'index';
    }
    
}
</code></pre>
<p>æ–‡ä»¶ä½ç½®ï¼šapp/index/controller/user/Blog.php<br>
è®¿é—®URLï¼šhttp://localhost/index.php/user.blog/index<br>
æ³¨æ„äº‹é¡¹å¦‚ä¸‹â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560519428516.png" alt=""></p>
<p>3.å¼•ç”¨å…¶ä»–æ¨¡å—ç±» éœ€è¦ use å‘½åç©ºé—´</p>
<pre><code>&lt;?php
namespace app\index\controller;
use think\facade\Config;
use app\index\controller\user\Blog;

class Index
{
    public function index()
    {
        $bolg = new Blog();
        return $bolg -&gt;index();
        // return request()-&gt;controller();
    }
}
</code></pre>
<p>4.æ§åˆ¶ç±»ç»§æ‰¿ extends<br>
use ä¸€ä¸‹éœ€è¦ç»§æ‰¿çš„ç±»æ–‡ä»¶<br>
ç„¶åç›´æ¥ç»§æ‰¿ä¾¿å¯ä»¥è°ƒç”¨ç±»æ–¹æ³•</p>
<pre><code>&lt;?php
namespace app\index\controller;
use think\facade\Config;

class Index extends Config
{
    public function index()
    {
        var_dump(Config::get('app'));
        // return request()-&gt;controller();
    }
}
</code></pre>
<p>5.ç©ºæ§åˆ¶å™¨<br>
ç©ºæ§åˆ¶å™¨çš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œå½“è®¿é—®åˆ°ä¸€ä¸ªä¸å­˜åœ¨çš„æ–¹æ³•æ—¶è‡ªåŠ¨è°ƒç”¨ï¼Œå¯ä»¥ä½œä¸ºå½“å‰æ§åˆ¶ä¸‹çš„404é”™è¯¯URLä¼˜åŒ–ä½¿ç”¨ã€‚</p>
<pre><code>&lt;?php
namespace app\index\controller;

class Index
{
    public function __call($method, $args)
    {
        return 'è°ƒç”¨å½“å‰ç©ºæ§åˆ¶å™¨æ–¹æ³•ï¼';
    }

    public function index()
    {
        return 'index';
    }
}
</code></pre>
<p>å½“æˆ‘è®¿é—®ä¸å­˜åœ¨çš„ hello æ–¹æ³•æ—¶â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560522078557.png" alt=""></p>
<h3 id="æ¸²æŸ“è¾“å‡º">æ¸²æŸ“è¾“å‡º</h3>
<p>æ§åˆ¶å™¨ä¸€èˆ¬ä¸éœ€è¦ä»»ä½•è¾“å‡ºï¼Œç›´æ¥ return å³å¯<br>
ä¸è¦åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨ dieã€exit ç­‰ç±»ä¼¼çš„ä¸­æ–­ä»£ç ï¼Œéœ€è¦è°ƒè¯•ï¼Œå¯ä»¥ä½¿ç”¨å†…ç½® halt åŠ©æ‰‹å‡½æ•°ã€‚<br>
éƒ¨åˆ†ç³»ç»Ÿæœ‰æ•ˆè¾“å‡ºâ†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

class Index 
{
    public function hello()
    {
    	// è¾“å‡ºhello,world!
        return 'hello,world!';
    }
    
    public function json()
    {
    	// è¾“å‡ºJSON
        return json($data);
    }
    
    public function read()
    {
    	// æ¸²æŸ“é»˜è®¤æ¨¡æ¿è¾“å‡º
        return view();
    }

}
</code></pre>
<h3 id="è·¯ç”±">è·¯ç”±</h3>
<p>å¤šçº§æ§åˆ¶å™¨å®˜æ–¹æ¨èè®¿é—®æ–¹æ³•ä¸º è‡ªå®šä¹‰é…ç½®è·¯ç”±<br>
ä¸‹èŠ‚å†èŠğŸ¤£ğŸ¤£ğŸ¤£</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€å¤±è¯¯ã€‘Mac ä¸Šå…³äºé“¾æ¥æœ¬åœ°MySQLæ•°æ®åº“çš„æŠ¥é”™2002]]></title>
        <id>https://UserNameZjw.github.io/post/Mac-error</id>
        <link href="https://UserNameZjw.github.io/post/Mac-error">
        </link>
        <updated>2019-06-11T15:10:54.000Z</updated>
        <summary type="html"><![CDATA[<p>ä»¥æ­¤ä¸ºæˆ’<br>
ç»ä¸å†çŠ¯<br>
å†çŠ¯...æˆ‘ä¹Ÿä¸èƒ½å’‹åœ°è‡ªå·±ä¸æ˜¯  ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä»¥æ­¤ä¸ºæˆ’<br>
ç»ä¸å†çŠ¯<br>
å†çŠ¯...æˆ‘ä¹Ÿä¸èƒ½å’‹åœ°è‡ªå·±ä¸æ˜¯  ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
<!-- more -->
<h3 id="è§£å†³-mac-è¿æ¥-mysql-æœ¬åœ°æ•°æ®åº“å‡ºç°-2002-é”™è¯¯">è§£å†³ Mac è¿æ¥ MySQL æœ¬åœ°æ•°æ®åº“å‡ºç° 2002 é”™è¯¯</h3>
<p>ä»…ä»…å°±ä¸€ä¸ªæ³¨æ„äº‹é¡¹ï¼Œé™¤äº†ç¬¬ä¸€æ¬¡é…ç½® Mac ç¯å¢ƒçš„æ—¶å€™å‘äº†æˆ‘ä¸€æŠŠï¼Œç»ˆäºåœ¨æˆ‘æ²¡æŠŠå®ƒå½“å›äº‹çš„æ—¶å€™ï¼Œåˆå‡ºæ¥å‘äº†æˆ‘ä¸€ä¸ªå°æ—¶ï¼Œæœ¬æ¬¡ï¼Œæé†’è‡ªå·±ã€‚<br>
é‡è¦äº‹æƒ…è¯´ä¸‰é</p>
<blockquote>
<p>Mac é“¾æ¥æœ¬åœ°æ•°æ®åº“çš„æ—¶å€™ï¼Œå¿…é¡»ç”¨ 127.0.0.1 è€Œä¸èƒ½ç”¨ localhost<br>
Mac é“¾æ¥æœ¬åœ°æ•°æ®åº“çš„æ—¶å€™ï¼Œå¿…é¡»ç”¨ 127.0.0.1 è€Œä¸èƒ½ç”¨ localhost<br>
Mac é“¾æ¥æœ¬åœ°æ•°æ®åº“çš„æ—¶å€™ï¼Œå¿…é¡»ç”¨ 127.0.0.1 è€Œä¸èƒ½ç”¨ localhost</p>
</blockquote>
<p>æˆ‘æŒ‡çš„æ˜¯åœ¨ config çš„è¿æ¥æ–‡ä»¶ä¸­çš„è®¿é—® æŒ‡å‘
ä¸ç„¶ä¼šæŠ¥é”™...é”™...é”™ï¼ï¼ï¼</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€ä¸‹è½½ä¸å®‰è£…]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-1</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-1">
        </link>
        <updated>2019-06-11T03:12:04.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ¬æ–‡ä»…ä»‹ç»å¦‚ä½•å®‰è£…TP6<br>
ä»…è®°å½•æœ¬äººçš„å®é™…ç»è¿‡<br>
å¦‚æœ‰åæ¥è€…ï¼Œä¸ä¿è¯ç»éªŒå®Œå…¨å¯ä»¥ç…§æ¬</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ¬æ–‡ä»…ä»‹ç»å¦‚ä½•å®‰è£…TP6<br>
ä»…è®°å½•æœ¬äººçš„å®é™…ç»è¿‡<br>
å¦‚æœ‰åæ¥è€…ï¼Œä¸ä¿è¯ç»éªŒå®Œå…¨å¯ä»¥ç…§æ¬</p>
<!-- more -->
<p>é—²è¯ä¸å¤šè¯´ï¼Œç›´æ¥è¿›å…¥ä¸»é¢˜</p>
<h3 id="èµ„æ–™åŠå‚è€ƒ">èµ„æ–™åŠå‚è€ƒ</h3>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037479">TP6å®˜æ–¹æ–‡æ¡£ã€Œé¢„è§ˆç‰ˆã€</a><br>
æœ¬æ–‡ä¸»è¦å‚è€ƒå®˜æ–¹æ–‡æ¡£<br>
ç¬¬ä¸€ç« [å®‰è£…]ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037481">ç¬¬ä¸€ç« é“¾æ¥</a><br>
å®‰è£…å·¥å…· composer ï¼Œå…³äºcomposer ä¸å¤šåšä»‹ç»<br>
composer å®˜ç½‘(å›½å¤–) ï¼š<a href="https://getcomposer.org/">composer å®˜ç½‘é“¾æ¥</a><br>
composer ä¸­å›½é•œåƒå®˜ç½‘ï¼š<a href="https://www.phpcomposer.com/">composer ä¸­å›½é•œåƒå®˜ç½‘é“¾æ¥</a></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆéœ€è¦ä¸­å›½é•œåƒå®˜ç½‘ï¼Œæ˜¯å› ä¸ºã€Œä¸­å›½å›½æƒ…ã€å¯¼è‡´æ— æ³•è®¿é—®åˆ°å›½å¤–ç«™ç‚¹ï¼Œé™¤éå€ŸåŠ©æ¢¯å­<br>
å…¶å®TP6çš„æ–‡æ¡£éå¸¸è¯¦ç»†äº†ï¼ŒåŒ…æ‹¬å…³äº composer çš„å®‰è£…ã€æ›¿æ¢é•œåƒæºã€ä¸‹è½½è½¯ä»¶éƒ½æœ‰è¯¦ç»†æ­¥éª¤è®²è§£ã€‚</p>
</blockquote>
<h3 id="å®é™…ä¸Šæ‰‹">å®é™…ä¸Šæ‰‹</h3>
<p>è™½ç„¶å®˜æ–¹çš„è¯´æ˜éå¸¸è¯¦ç»†ï¼Œä½†ä¹Ÿæ ¹æ®æ¯ä¸ªäººçš„ç”µè„‘ç¯å¢ƒï¼Œä»¥åŠç³»ç»Ÿç‰ˆæœ¬ç­‰ä¸åŒå› ç´ è€Œå—åˆ°ä¸åŒçš„å½±å“ï¼Œä»¥ä¸‹è®°å½•æœ¬äººçš„ä¸Šæ‰‹æƒ…å†µ</p>
<h3 id="ä¸Šæ‰‹ç¯å¢ƒ">ä¸Šæ‰‹ç¯å¢ƒ!</h3>
<p>ç”µè„‘é…ç½®å›¾â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560225219378.png" alt="ç”µè„‘ç¯å¢ƒ"><br>
PHPã€Mysqlã€Nginx é›†æˆç¯å¢ƒè½¯ä»¶ï¼š<a href="http://www.xsrvs.com/">MxSrvs å®˜ç½‘</a><br>
å®˜ç½‘æˆªå›¾â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560225646600.png" alt=""><br>
ä¸€æ¬¾å¾ˆOKçš„ç¯å¢ƒé›†æˆå·¥å…·ï¼Œç®€å•ï¼Œæ»¡è¶³éœ€æ±‚ã€‚<br>
ç¼ºç‚¹ï¼šå¯¹æˆ‘æ¥è¯´ï¼Œå”¯ä¸€çš„ä¸è¶³å°±æ˜¯ä¸‹è½½å®åœ¨æ˜¯å¤ªæ…¢ã€‚ä¸è¿‡å¦‚æœæœ‰æ¢¯å­ï¼Œå¯ä»¥é€šè¿‡è°·æ­Œäº‘ä¸‹è½½ï¼Œé€Ÿåº¦è¿˜æ˜¯OKå¾—ï¼Œæˆ‘å°±æ˜¯æœ¬æ–¹å¼ä¸‹è½½</p>
<h3 id="å®‰è£…-composer">å®‰è£… composer</h3>
<p>è¿™é‡Œæˆ‘æ˜¯ä¹‹å‰å°±æœ‰å®‰è£…è¿‡ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨å°±è¡Œäº†ã€‚<br>
å¯ä»¥ç›´æ¥å¯¹ç…§ç€TP6æ–‡æ¡£ä¸€æ­¥ä¸€æ­¥æ“ä½œã€‚</p>
<h3 id="å®‰è£…tp6">å®‰è£…TP6</h3>
<p>æˆ‘åœ¨è¿™ä¸ªå®‰è£…è¿‡ç¨‹ä¸­ï¼Œè€—è´¹äº†å°†è¿‘åŠä¸ªå°æ—¶çš„æ—¶é—´ï¼Œæ€»ç»“äº†ä¸€ä¸‹åŸå› </p>
<ol>
<li>é•œåƒæºæ›¿æ¢å¤±è´¥</li>
<li>äººå“(åé¢ä»‹ç»)</li>
</ol>
<p>ç¯å¢ƒéœ€æ±‚ï¼š</p>
<blockquote>
<p>å®‰è£…TP6 éœ€è¦ PHP ç‰ˆæœ¬ &gt;= 7.1.0 ã€‚</p>
</blockquote>
<p>å®‰è£…æ­¥éª¤(ä»…ä»‹ç»Mac)</p>
<ol>
<li>æ‰“å¼€ç»ˆç«¯å·¥å…·ï¼Œé¡ºå¸¦æ£€æŸ¥ä¸€ä¸‹ composer ã€‚
åœ¨ç»ˆç«¯é”®å…¥ composer ç„¶åå›è½¦<br>
ä¼šå‡ºç°ä¸‹å›¾ â†“  å³ä»£è¡¨å®‰è£…æ­£ç¡®å¹¶ä¸”å…¨å±€å¯ä½¿ç”¨ composer<br>
<img src="https://UserNameZjw.github.io/post-images/1560226968175.png" alt=""></li>
<li>å®‰è£…å¼€å‘ç‰ˆ(å› ä¸ºç°åœ¨è¿˜æ²¡æœ‰æ­£å¼ç‰ˆğŸ˜ğŸ˜)<br>
å…ˆæ‰¾åˆ°è¦å®‰è£…çš„æ–‡ä»¶å¤¹ç›®å½•ï¼Œé”®å…¥ cd ç„¶åæ–‡ä»¶ç›®å½•è·¯å¾„ï¼Œå›è½¦ã€‚<br>
æˆ‘å®‰è£…çš„æ˜¯ /Users/zjw/Documents/web ç›®å½•ä¸‹<br>
å°æŠ€å·§ï¼Œå¦‚æœåœ¨Mac ä¸Šä¸çŸ¥é“è·¯å¾„ï¼Œåªè¦æŠŠä½ çš„æ–‡ä»¶å¤¹æ‹–è¿›ç»ˆç«¯å°±å¯ã€‚</li>
</ol>
<pre><code>cd /Users/zjw/Documents/web 
</code></pre>
<p>ç„¶åå¤åˆ¶TP6æ–‡æ¡£ä¸­çš„å¼€å‘ç‰ˆå®‰è£…ä»£ç ï¼Œå›è½¦ï¼Œå°±ä¼šè‡ªåŠ¨å®‰è£…äº†ã€‚ä»£ç ä½ç½®ä¸‹å›¾â†“
<img src="https://UserNameZjw.github.io/post-images/1560227622056.png" alt=""><br>
ä»£ç  ï¼š</p>
<pre><code>composer create-project topthink/think=6.0.x-dev tp
</code></pre>
<p>æ³¨æ„äº‹é¡¹ï¼šæœ€åçš„ ã€Œtpã€ ä»£è¡¨ä½ è¦åˆ›å»ºçš„ç”¨æ¥å®‰è£…TP6 çš„æ–‡ä»¶å¤¹åï¼Œè¿™ä¸ªæ˜¯å¯ä»¥éšä¾¿æ›´æ”¹çš„ï¼Œä¾‹å¦‚æˆ‘çš„æ˜¯è¦æ”¾åœ¨ tp6 æ–‡ä»¶å¤¹ä¸‹çš„ï¼Œæ‰€ä»¥ åªéœ€è¦æŠŠæœ€åçš„ ã€Œtpã€æ”¹ä¸ºã€Œtp6ã€å³å¯ã€‚<br>
ç”±äºæ¯ä¸ªäººçš„ç½‘ç»œæƒ…å†µçš„ä¸åŒï¼Œä¸‹è½½æ—¶é—´ä¹Ÿä¸åŒï¼Œæˆ‘åŠ ä¸Šç½‘ç»œä»¥åŠäººå“ï¼ŒæŠ˜è…¾äº†åŠä¸ªå¤šå°æ—¶ã€‚<br>
å®‰è£…å®Œä¹‹åçš„æˆªå›¾â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560228060858.jpg" alt=""></p>
<p>è‡³æ­¤ï¼Œå®‰è£…å®Œæˆã€‚<br>
å½“ç„¶è¿™æ˜¯æ­£å¸¸æµç¨‹ã€‚<br>
ä¸‹é¢æ¥è¯´ä¸‹æˆ‘çš„äººå“é—®é¢˜ã€‚
ä¸ºä»€ä¹ˆå½’ç»“äºäººå“å‘¢ï¼Œæœ‰äººä¼šé—®ï¼ŒæˆåŠŸå°±æ˜¯æˆåŠŸï¼Œå¤±è´¥å°±æ˜¯å¤±è´¥ï¼Œè‚¯å®šæ˜¯æœ‰åŸå› çš„ã€‚<br>
å¯æ˜¯ï¼Œæˆ‘è¯´ä¸€ä¸ªç°è±¡ï¼Œå¦‚æœ‰é›·åŒï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œå¾é“ä¸å­¤ã€‚<br>
æ­£é¢˜ï¼š<br>
ä¸€åˆ‡ä»£ç ï¼Œä¸¥æ ¼æŒ‰ç…§æ•™ç¨‹æµç¨‹æ¥çš„ã€‚åˆ»æ„æŠŠ web ç›®å½•ä¸‹åŸæœ¬åˆ›å»ºçš„ tp6 æ–‡ä»¶å¤¹åˆ é™¤ã€‚<br>
ç„¶è€Œï¼Œæˆ‘ç«Ÿç„¶æœ‰ä¸¤æ¬¡è·‘å®Œä»£ç ï¼Œæ˜¾ç¤ºåˆ›å»ºä»¥åŠä¸‹è½½æˆåŠŸçš„æ—¶å€™ï¼Œå´ä»…ä»…åœ¨ web ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªç©ºçš„ tp6 æ–‡ä»¶å¤¹ï¼Œæ²¡æœ‰ä»»ä½•ä¸œè¥¿ï¼Œæœ€åä¸€æ¬¡çš„æˆåŠŸï¼Œæ­»é©¬å½“ä½œæ´»é©¬åŒ»ï¼Œåˆ é™¤äº†ä¸€ä¸‹ composer çš„ç¼“å­˜æ–‡ä»¶ï¼Œæ¼«é•¿çš„ç­‰å¾…ä¹‹åï¼Œæˆ‘ç»ˆäºå¦‚æ„¿ä»¥å¿çš„çœ‹åˆ°äº†ä¸‹å›¾â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560228518737.jpg" alt=""><br>
çœ‹åˆ°ä¸Šå›¾çš„æ“ä½œæ–¹æ³•ï¼Œä»¥æˆ‘çš„æœ¬åœ°ç¯å¢ƒä¸ºä¾‹<br>
ä¹Ÿå¯ä»¥å‚è€ƒå®˜ç½‘æ–‡æ¡£é‡Œçš„æ–¹æ³•<br>
å…ˆæŠŠæœ¬åœ°ç¯å¢ƒ PHP ç‰ˆæœ¬æ›´æ¢ä¸ºåˆé€‚çš„ç‰ˆæœ¬ï¼ŒMxSrvs æä¾›äº† 7.2.6 ç‰ˆæœ¬ï¼Œå˜æ›´åä¼šè‡ªåŠ¨é‡å¯ã€‚<br>
<img src="https://UserNameZjw.github.io/post-images/1560229809105.png" alt=""><br>
æ¥ä¸‹æ¥æŠŠ Nginx çš„é…ç½®æ–‡ä»¶ æ›´æ”¹ä¸€ä¸‹ã€‚<br>
<img src="https://UserNameZjw.github.io/post-images/1560229920582.png" alt=""><br>
å…·ä½“æ›´æ”¹ä½ç½®ä¸‹å›¾ â†“
<img src="https://UserNameZjw.github.io/post-images/1560230041802.png" alt=""><br>
åœ¨è¿™ä¸¤ä¸ªåœ°æ–¹å¢åŠ ä¸Šä½ çš„ç›®å½•å³å¯ï¼Œç„¶åé‡å¯ä¸€ä¸‹ä½ çš„ Nginx æœåŠ¡å™¨ï¼<br>
æ‰“å¼€æµè§ˆå™¨è¾“å…¥ 127.0.0.1 æˆ–è€… localhost å°±å¯ä»¥çœ‹åˆ° TP ç‰¹æœ‰çš„æ¬¢è¿é¡µäº†<br>
TP éƒ½æ˜¯ä»¥ public æ–‡ä»¶å¤¹ä¸‹çš„ index ä¸ºå•ä¸€å…¥å£çš„ï¼Œåªéœ€è¦æŠŠè·¯å¾„ç²¾ç¡®åˆ° public å°±å¯ä»¥äº†ã€‚</p>
<p>æ„Ÿè°¢äº’è”ç½‘çš„å¼€æ”¾ç²¾ç¥ï¼Œæ‹¯æ•‘äº†æˆ‘ã€‚<br>
å…¶å®ï¼Œå…·ä½“æ˜¯ä¸æ˜¯ç¼“å­˜çš„é—®é¢˜ï¼Œè¿˜æ˜¯ç½‘ç»œçš„é—®é¢˜ï¼Œæˆ‘çœŸçš„æ·±ç©¶ä¸æ¥ï¼Œæ—¢ç„¶æˆåŠŸäº†ï¼Œé‚£å°±å½“æˆç¼“å­˜é—®é¢˜æ¥å¤„ç†å¥½äº†ã€‚ğŸ’€ğŸ’€ğŸ’€</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€é‡å­¦PHPã€‘åºè¨€]]></title>
        <id>https://UserNameZjw.github.io/post/chong-xue-php</id>
        <link href="https://UserNameZjw.github.io/post/chong-xue-php">
        </link>
        <updated>2019-06-10T11:30:58.000Z</updated>
        <summary type="html"><![CDATA[<p>è¿™ä¸ªä¸–ç•Œï¼Œæœ€å…¬å¹³çš„å°±æ˜¯ã€Œä½ ä»˜å‡ºå¤šå°‘åŠªåŠ›ï¼Œç”Ÿæ´»å°±å›æŠ¥ä½ å¤šå°‘æ”¶è·ã€<br>
å¸Œæœ›æœªæ¥çš„è‡ªå·±ï¼Œæ„Ÿè°¢ç°åœ¨åŠªåŠ›çš„è‡ªå·±<br>
è°¨ä»¥æ­¤è®°å½•</p>
]]></summary>
        <content type="html"><![CDATA[<p>è¿™ä¸ªä¸–ç•Œï¼Œæœ€å…¬å¹³çš„å°±æ˜¯ã€Œä½ ä»˜å‡ºå¤šå°‘åŠªåŠ›ï¼Œç”Ÿæ´»å°±å›æŠ¥ä½ å¤šå°‘æ”¶è·ã€<br>
å¸Œæœ›æœªæ¥çš„è‡ªå·±ï¼Œæ„Ÿè°¢ç°åœ¨åŠªåŠ›çš„è‡ªå·±<br>
è°¨ä»¥æ­¤è®°å½•</p>
<!-- more -->
<p>æœ¬ç¯‡å†™åœ¨å³åœ¨ä¸€ä¸ªå°æ—¶åè¿æ¥ç¬¬ä¸€æ¬¡ç›´æ’­è¯¾çš„å‰å¤•ï¼ŒèŠ±è´¹7880ï¼ŒæŠ¥åå‚ä¸ä¸€ä¸ªPhpErè¿›é˜¶ç­ã€‚è¿™åº”è¯¥æ˜¯é™¤äº†å¤§å­¦ï¼Œæˆ‘æ‰€ä¸ºå­¦ä¹ èŠ±è´¹æœ€å¤§çš„ä¸€ç¬”å•é¡¹æ”¯å‡ºï¼Œå¸Œæœ›æˆ‘èƒ½æœ‰æ›´å¤šçš„æ”¶è·ï¼Œæˆ–è€…è¯´ï¼Œæœ‰è®©è‡ªå·±æ»¡æ„çš„æ”¶è·ã€‚<br>
å…¶å®ï¼Œåšè¿™ä¸ªå†³å®šï¼ŒçœŸçš„æ˜¯ä¸ºäº†å¼¥è¡¥æˆ‘è¿™å‡ å¹´ä¸ºäº†è¿™å®‰é€¸çš„å·¥ä½œç¯å¢ƒè€Œä¸æ„¿æ¿€åŠ±è‡ªå·±å­¦ä¹ æ–°çŸ¥è¯†åæœï¼Œå¸Œæœ›å…¶ä»–äººä»¥æ­¤ä¸ºæˆ’ã€‚</p>
<h3 id="èƒŒæ™¯">èƒŒæ™¯</h3>
<ol>
<li>å›¾å®‰é€¸ï¼Œä¸æ€è¿›å–</li>
<li>å‘ç°ä¸ç¤¾ä¼šå¿…é¡»æŠ€èƒ½è„±èŠ‚</li>
<li>çœŸçœŸçš„è¢«ç”Ÿæ´»å‹åŠ›æ‰€è¿«</li>
<li>ä¸æƒ³è®©æœªæ¥çš„è‡ªå·±é„™è§†ç°åœ¨çš„è‡ªå·±</li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://UserNameZjw.github.io/post/hello-gridea</id>
        <link href="https://UserNameZjw.github.io/post/hello-gridea">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="http://hvenotes.fehey.com/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>ğ–¶ğ—‚ğ—‡ğ–½ğ—ˆğ—ğ—Œ</strong> æˆ– <strong>ğ–¬ğ–ºğ–¼ğ–®ğ–²</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>