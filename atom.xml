<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://UserNameZjw.github.io</id>
    <title>ã€Œè°¨è¨€æ…è¡Œã€</title>
    <updated>2019-10-26T14:16:32.793Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://UserNameZjw.github.io"/>
    <link rel="self" href="https://UserNameZjw.github.io/atom.xml"/>
    <subtitle>ä¸€ä½å¹´è¿‘ä¸‰åçš„ä¸­å¹´æ²¹è…»è‚¥èƒ–è€ç”·äººçš„ä¸­å¹´å±æœº</subtitle>
    <logo>https://UserNameZjw.github.io/images/avatar.png</logo>
    <icon>https://UserNameZjw.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, ã€Œè°¨è¨€æ…è¡Œã€</rights>
    <entry>
        <title type="html"><![CDATA[ã€ŒMacã€å‡çº§ macOS Catalina åï¼ŒAlfred å‡ºç°çš„åŒç›®å½•ä»¥åŠæ— æ³•æœç´¢ç³»ç»Ÿè‡ªå¸¦è½¯ä»¶é—®é¢˜]]></title>
        <id>https://UserNameZjw.github.io/post/mac-Alfred</id>
        <link href="https://UserNameZjw.github.io/post/mac-Alfred">
        </link>
        <updated>2019-10-26T11:23:14.000Z</updated>
        <summary type="html"><![CDATA[<p>è§£å†³ Alfred<br>
å‡ºç°çš„åŒç›®å½•<br>
æ— æ³•æœç´¢ç³»ç»Ÿè‡ªå¸¦è½¯ä»¶é—®é¢˜</p>
]]></summary>
        <content type="html"><![CDATA[<p>è§£å†³ Alfred<br>
å‡ºç°çš„åŒç›®å½•<br>
æ— æ³•æœç´¢ç³»ç»Ÿè‡ªå¸¦è½¯ä»¶é—®é¢˜</p>
<!-- more -->
<h4 id="é—®é¢˜ä¸€">é—®é¢˜ä¸€</h4>
<p>å‡çº§ä¹‹åï¼ŒAlfred æœç´¢è½¯ä»¶å‡ºç°åŒç›®å½• å¦‚ä¸‹ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1572089394351.png" alt=""><br>
ä¸»è¦åŸå› æ˜¯å› ä¸ºæœ¬æ¬¡ç³»ç»Ÿå‡çº§ï¼Œæ¶‰åŠç³»ç»Ÿç›˜ç‹¬ç«‹ç©ºé—´</p>
<p>å…·ä½“å¯ä»¥çœ‹ <a href="https://sspai.com/post/57052">å½“ Mac å‡çº§åˆ° Catalina æ—¶ï¼Œè‹¹æœåœ¨ç¡¬ç›˜é‡Œæ–½äº†ç‚¹é­”æ³•</a> è¿™ç¯‡æ–‡ç« ã€‚é‡Œé¢æœ‰è¯¦ç»†è®²åˆ°ï¼Œè¿™æ¬¡å‡çº§ï¼Œè‹¹æœå¯¹äºç³»ç»Ÿè¿›è¡Œçš„å˜æ›´ã€‚</p>
<h4 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•ï¼š</h4>
<p>åªéœ€è¦æ¿€æ´» Alfred æœç´¢æ¡†ï¼Œè¾“å…¥ reload æ¸…é™¤ç¼“å­˜å³å¯  â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1572089761128.jpg" alt=""></p>
<p>æ¸…é™¤ä¹‹åæ•ˆæœ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1572089877111.jpg" alt=""></p>
<h4 id="é—®é¢˜äºŒ">é—®é¢˜äºŒ</h4>
<p>å‡çº§ä¹‹åï¼Œ Alfred æ— æ³•æœç´¢åˆ°ç³»ç»Ÿè‡ªå¸¦è½¯ä»¶  å¦‚ä¸‹ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1572090063059.jpg" alt=""></p>
<h4 id="è§£å†³æ–¹æ³•-2">è§£å†³æ–¹æ³•ï¼š</h4>
<p>æ‰“å¼€ Alfred çš„ Preferences, å®šä½åˆ° Features-Default Results ä¸­çš„ Search Scope<br>
ç‚¹å‡»æ·»åŠ (+), æŠŠ /System/Applications æ·»åŠ è¿›å»<br>
æ­¥éª¤ä¸€ ï¼š<br>
<img src="https://UserNameZjw.github.io/post-images/1572090146737.jpg" alt=""><br>
æ­¥éª¤äºŒï¼š<br>
<img src="https://UserNameZjw.github.io/post-images/1572090203013.jpg" alt=""><br>
æ­¥éª¤ä¸‰ï¼š<br>
<img src="https://UserNameZjw.github.io/post-images/1572090328673.jpg" alt=""><br>
æ­¥éª¤å››ï¼š<br>
<img src="https://UserNameZjw.github.io/post-images/1572090345745.jpg" alt=""></p>
<p>æ“ä½œå®Œæ¯•ï¼Œæ•ˆæœå¦‚ä¸‹ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1572090385546.jpg" alt=""></p>
<p>è‡³æ­¤ï¼Œå‡çº§ macOS Catalina å¯¹äº Alfred å¸¦æ¥çš„æ¯”è¾ƒä¸¥é‡çš„ä¸¤ä¸ªå½±å“å®Œå…¨è§£å†³ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒåšæŒã€æ˜¯æœ€éš¾çš„]]></title>
        <id>https://UserNameZjw.github.io/post/Talk-01</id>
        <link href="https://UserNameZjw.github.io/post/Talk-01">
        </link>
        <updated>2019-08-30T07:04:55.000Z</updated>
        <summary type="html"><![CDATA[<p>çªç„¶å‘ç°<br>
åšæŒçœŸçš„å¾ˆéš¾<br>
æ›´éš¾çš„æ˜¯ä¸åšæŒ<br>
è€Œæ˜¯ä¸åšæŒè¿˜è‡ªä»¥ä¸ºæ˜¯</p>
]]></summary>
        <content type="html"><![CDATA[<p>çªç„¶å‘ç°<br>
åšæŒçœŸçš„å¾ˆéš¾<br>
æ›´éš¾çš„æ˜¯ä¸åšæŒ<br>
è€Œæ˜¯ä¸åšæŒè¿˜è‡ªä»¥ä¸ºæ˜¯</p>
<!-- more -->
<h3 id="å‰è¨€æœ‰æ—¶å€™äººæ€»æ˜¯åçŸ¥åè§‰">å‰è¨€ï¼šæœ‰æ—¶å€™ï¼Œäººæ€»æ˜¯åçŸ¥åè§‰</h3>
<p>æœ€è¿‘è¯´å¿™ï¼Œå…¶å®ç®—æ˜¯ä¸€ä¸ªç¨å¾®åˆç†çš„å€Ÿå£ã€‚ç¡®å®æœ‰ç‚¹ï¼Œä½†æ˜¯ç¡®å®æ˜¯æ²¡æœ‰è¾¾åˆ°å®Œå…¨å……è£•çš„åœ°æ­¥ï¼Œä¾ç„¶æœ‰æ—¶é—´å»åˆ·å‰§ï¼Œå¹¶ä¸”ï¼Œå›å½’äº†æ¸¸æˆğŸ’€ğŸ’€ğŸ’€</p>
<h3 id="å‰å› ">å‰å› </h3>
<p>æˆ‘åçŸ¥åè§‰åˆ°ä»€ä¹ˆåœ°æ­¥å‘¢ï¼Ÿç¬¬ä¸€æœŸè¯¾ç¨‹ï¼Œæ²¡æœ‰å®Œå…¨è·Ÿå®Œï¼Œå› ä¸ºåæœŸè®²çš„é¡¹ç›®æ˜¯ERPã€‚å¹¶ä¸æ˜¯è¯´ERPæ²¡æœ‰éš¾åº¦ï¼Œæˆ–è€…è¯´ï¼Œæ²¡æœ‰æŠ€æœ¯å«é‡ã€‚è€Œæ˜¯æœ‰ä¸ªå…ˆå…¥ä¸ºä¸»çš„è§‚å¿µï¼Œé‚£å°±æ˜¯ã€Œæˆ‘åšè¿‡ã€ï¼ï¼ï¼</p>
<p>æˆ‘è™½ç„¶æ²¡æœ‰å®Œå…¨ç³»ç»Ÿçš„åšè¿‡éå¸¸å¤§çš„ERPï¼Œä½†è‡ªå·±é¼“æ£è¿‡ä¸€ä¸ªï¼Œå®Œå…¨ç”±ä¸€ä¸ªäººæå®šçš„ERPï¼Œå°èµ„ç§ä¼ï¼Œæ²¡æœ‰é‚£ç§æˆç†Ÿçš„ä¸šåŠ¡é€»è¾‘éœ€æ±‚ï¼Œéœ€æ±‚è‡ªå®šï¼ˆå¾ˆéšæ„çš„é‚£ç§ï¼Œé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œå°±æä»€ä¹ˆéœ€æ±‚ï¼‰ï¼Œè¯´çœŸçš„ï¼Œè¿™ä¸€å—ï¼Œè¶…çº§çƒ¦çš„ï¼Œéšæ„æ”¹ï¼Œéšæ„æï¼Œå¹¶ä¸”å·¥æœŸéœ€æ±‚ç´§å¼ ã€‚</p>
<p>å¯èƒ½ï¼Œç¡®å®æ˜¯è¿™æ ·çš„éœ€ä¸æ±‚çš„å…³ç³»ï¼ŒæŠŠæˆ‘å…»æˆäº†ä¸€ä¸ªæ¯”è¾ƒæ¯›èºï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å¦¥åçš„æ€§æ ¼ï¼Œå¯¹ä»£ç å¦¥åï¼Œå¯¹éœ€æ±‚å¦¥åï¼Œå¯¹ç”Ÿæ´»å¦¥åã€‚å¥½åƒæå‰æ­¥å…¥äº†è€å¹´ç”Ÿæ´»ã€‚</p>
<p>å°¤å…¶æ˜¯ï¼Œé¡¹ç›®å®Œå…¨æˆç†Ÿï¼Œæ²¡æœ‰æ–°éœ€æ±‚çš„ä¸€ä¸ªé˜¶æ®µæœŸã€‚æˆ‘ç«Ÿç„¶å¹³å‡ä¸‹æ¥ï¼Œä¸€å¤©çš„ä»£ç ç¼–è¾‘é‡ï¼Œå¤§æ¦‚ä¸è¶…è¿‡50è¡Œï¼Œè¿™æ ·çš„ç¯å¢ƒçŠ¶æ€ï¼ŒæŒç»­äº†å°†è¿‘ä¿©æœˆï¼Œæœ‰ç‚¹å¥”æºƒã€‚å˜å¾—æ›´è‡ªé—­ï¼Œæ²¡æœ‰éœ€æ±‚æ²Ÿé€šï¼Œæ²¡æœ‰ä¸šåŠ¡æ²Ÿé€šï¼Œç”šè‡³ï¼Œè¿è€æ¿ï¼Œéƒ½å¾ˆå°‘ç›¸äº’è§é¢äº†ã€‚ä»¥å‰ï¼Œè¿˜æ˜¯å¾ˆé¢‘ç¹çš„ï¼ŒåŸºæœ¬æ¯ä¸ªæ˜ŸæœŸéƒ½ä¼šæ ¸å¯¹ä¸€ä¸‹éœ€æ±‚ä¸è¿›åº¦ã€‚çŒ›åœ°åœæ­¢ï¼Œç”Ÿæ´»çŠ¶æ€å·¨å˜çš„æ„Ÿè§‰ã€‚</p>
<h3 id="è¿‘å†µ">è¿‘å†µ</h3>
<p>æœ€è¿‘ä¸€ä¸ªåŠæœˆï¼Œç”±äº TP6.0 æš‚æœªç¨³å®šï¼Œå¹¶ä¸”æœåŠ¡å™¨çš„ç¯å¢ƒé…ç½®ï¼Œä¹Ÿä¸æ”¯æŒä½¿ç”¨ TP6.0 ,æ‰€ä»¥å°±å¼€å§‹ç”¨ TP5.1 é‡å†™ERPã€‚</p>
<ol>
<li>å­¦å®Œ TP6.0 éœ€è¦ä¸€ä¸ªè‡ªæˆ‘ä½¿ç”¨ä»¥åŠç†Ÿç»ƒåœ°è¿‡ç¨‹</li>
<li>ä½¿ç”¨ TP5.1 ä¹Ÿå¯ä»¥æ˜ç™½ 5.1 å’Œ 6.0 çš„åŒºåˆ«</li>
<li>ç°åœ¨ç”¨çš„æ˜¯å°ä¼—æ¡†æ¶</li>
<li>ä¸æƒ³ç»™åæ¥äººç•™ä¸‹ä¸€ä¸ªçƒ‚æ‘Šå­</li>
</ol>
<blockquote>
<p>æ²¡æœ‰å­¦è¿‡ TP5.1<br>
å°ä¼—æ¡†æ¶å¤ªå°ä¼—ï¼Œç½‘ä¸ŠåŸºæœ¬æ‰¾ä¸åˆ°æ•™ç¨‹<br>
æŠŠæœåŠ¡å™¨ PHP ç‰ˆæœ¬å‡çº§åˆ°5.6<br>
è‡³å°‘ä»¥åç¦»èŒäº¤æ¥ï¼Œåªéœ€è¦æ‰¾ä¸ªæ‡‚TP 5.1 å³å¯</p>
</blockquote>
<p>æ–°çš„é¡¹ç›®ï¼Œç®—æ˜¯è‡ªå·±ç»™è‡ªå·±çš„æŒ‘æˆ˜ï¼ŒTP5.1 + LAYUI ï¼Œæœ¬èº«å¯¹å‰ç«¯çŸ¥è¯†å°±æœ‰é™ï¼Œæ‰€ä»¥å°±é€‰æ‹©äº†LAYUIï¼Œè¿™ä¸ªå¯¹åç«¯æåº¦å‹å¥½çš„UIï¼Œé¡ºå¸¦æ„Ÿè°¢ä¸€ä¸‹ <a href="https://www.layui.com/">LAYUI</a>  ã€‚</p>
<p>ä¸€ä¸ªåŠæœˆï¼ŒåŸºæœ¬å®Œæˆäº†ä¸€ä¸ªéƒ¨é—¨ä¸‹çš„æ­£å¸¸è¿è¥æ‰€éœ€æ¨¡å—ï¼Œå·²ç»åœ¨è¿è¡Œã€‚ç”¨TP æ„é€ å™¨æ”¹é€ äº†æ‰€æœ‰çš„SQLè¯­å¥ï¼Œå‰ç«¯UIï¼Œä»¥åŠè®¿é—®æ–¹å¼ï¼Œå±•ç¤ºæ–¹å¼ï¼Œæ“ä½œæ–¹å¼ï¼Œéƒ½å°½æœ€å¤§èƒ½åŠ›ï¼Œæ”¹æˆä½¿ç”¨ LAYUI ã€‚</p>
<p>å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°è¿‡å‡ ä¸ªå¡å£³è¶…é•¿æ—¶é—´çš„å‰ç«¯é—®é¢˜ã€‚å­¦è‰ºä¸ç²¾ï¼ï¼ï¼</p>
<p>ä¸è¿‡å¥½åœ¨ï¼Œè§£å†³çš„éƒ½è¿˜æŒºå¥½ï¼Œè‡³å°‘ï¼Œä»£ç åœ¨ç°åœ¨çš„æˆ‘çœ‹æ¥ï¼Œæ¯”å‡ å¹´å‰å†™çš„å¼ºå¾ˆå¤šã€‚</p>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<ol>
<li>è‡ªä»¥ä¸ºæ˜¯</li>
<li>è´ªå¤š</li>
<li>ä¸è‡ªæ§</li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€å…³è”æ¨¡å‹]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-10</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-10">
        </link>
        <updated>2019-07-10T01:23:37.000Z</updated>
        <summary type="html"><![CDATA[<p>ä¸€å¯¹ä¸€å…³è”<br>
ä¸€å¯¹å¤šå…³è”</p>
]]></summary>
        <content type="html"><![CDATA[<p>ä¸€å¯¹ä¸€å…³è”<br>
ä¸€å¯¹å¤šå…³è”</p>
<!-- more -->
<h3 id="å‰è¨€æœ¬æ–‡ä»…ä»‹ç»æœ€å¸¸ç”¨çš„ä¸¤ä¸ªå…³è”ä¸€å¯¹ä¸€å…³è”ä¸€å¯¹å¤šå…³è”">å‰è¨€ï¼šæœ¬æ–‡ä»…ä»‹ç»æœ€å¸¸ç”¨çš„ä¸¤ä¸ªå…³è”ã€Œä¸€å¯¹ä¸€å…³è”ã€ã€Œä¸€å¯¹å¤šå…³è”ã€ã€‚</h3>
<p>å‚è€ƒèµ„æ–™ ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037599">TP6 æ¨¡å‹å…³è”å®˜æ–¹æ–‡æ¡£</a></p>
<h3 id="ä¸€å¯¹ä¸€å…³è”">ä¸€å¯¹ä¸€å…³è”</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037600">TP6 ä¸€å¯¹ä¸€å…³è”å®˜æ–¹æ–‡æ¡£</a></p>
<ol>
<li>hasOne() æ­£å‘å…³è”ï¼Œç”¨äºä¸»è¡¨å…³è”ä»è¡¨ã€‚</li>
<li>belongsTo() åå‘å…³è”ï¼Œç”¨äºä»è¡¨åå‘å…³è”ä¸»è¡¨ã€‚</li>
</ol>
<p>å…³è”æŸ¥è¯¢<br>
èŒƒä¾‹ï¼šæ•™å¸ˆè¡¨ æ­£å‘å…³è” ç§‘ç›®è¡¨<br>
hasOne()åŸºç¡€ç”¨æ³•<br>
æ•™å¸ˆè¡¨æ–‡ä»¶ Teacher.php â†“</p>
<pre><code>&lt;?php

namespace app\index\model;

use think\Model;

class Teacher extends Model
{
    //å®šä¹‰ Teacher è¡¨å…³è”åˆ°ç§‘ç›®è¡¨
    public function Course()
    {
        return $this-&gt;hasOne(Course::class,'tid','tid');
    }
}
</code></pre>
<p>æ§åˆ¶å™¨ Index.php æ–‡ä»¶ â†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Teacher;

class Index extends BaseController
{
    public function index()
    {
        $teacher = new Teacher();
        $data = $teacher-&gt;find(1);
        //æ‰“å°è¾“å‡ºè€å¸ˆæ•™æˆç§‘ç›®
        dump($data-&gt;course-&gt;cname);
    }
}
</code></pre>
<p>æ•ˆæœå›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1566975888151.jpg" alt=""></p>
<p>èŒƒä¾‹ï¼šç§‘ç›®è¡¨ åå‘å…³è” æ•™å¸ˆè¡¨<br>
belongsTo() åŸºç¡€ç”¨æ³•<br>
ç§‘ç›®è¡¨æ–‡ä»¶ Course.php â†“</p>
<pre><code>&lt;?php

namespace app\index\model;

use think\Model;

class Course extends Model
{
    public function Teacher()
    {
        return $this-&gt;belongsTo(Teacher::class,'tid','tid');
    }
}
</code></pre>
<p>æ§åˆ¶å™¨ Index.php æ–‡ä»¶ â†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Course;

class Index extends BaseController
{
    public function index()
    {
        $course = new Course();
        $data = $course-&gt;find(1);
        //æ‰“å°è¾“å‡ºæ•™æˆç§‘ç›®è€å¸ˆ
        dump($data-&gt;teacher-&gt;tname);
    }
}
</code></pre>
<p>æ•ˆæœå›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1566977263372.jpg" alt=""></p>
<p>æ ¹æ®å…³è”æ•°æ®æŸ¥è¯¢<br>
èŒƒä¾‹ï¼šæŸ¥è¯¢è€å¸ˆ id = 2 çš„å§“åä¸æ‰€æ•™ç§‘ç›®<br>
hasWhere() åŸºç¡€ç”¨æ³•<br>
æ§åˆ¶å™¨ Index.php æ–‡ä»¶ â†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Course;

class Index extends BaseController
{
    public function index()
    {
        $course = new Course();
        //æ ¹æ®å…³è”æ•°æ®ï¼ŒæŸ¥è¯¢ è€å¸ˆè¡¨ id = 2  æ‰€æ•™è¯¾ç¨‹ å¯¹åº”çš„tid,ç§‘ç›®åç§°ï¼Œå’Œè€å¸ˆçš„åç§°
        $data = $course-&gt;hasWhere('teacher',['id' =&gt; '2'],'course.*,teacher.*')-&gt;select()-&gt;toArray();

        //é—­åŒ…æŸ¥è¯¢
        $data1 = $course-&gt;hasWhere('teacher',function ($query){
            $query-&gt;where([['id','=','2']]);
        },'course.*,teacher.*')-&gt;select()-&gt;toArray();
        //æ‰“å°è¾“å‡º
        dump($data);
        dump($data1);
    }
}
</code></pre>
<p>æ•ˆæœå›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1567040169011.jpg" alt=""></p>
<p>ä¸€å¯¹ä¸€å…³è”æ›´æ–°ä»¥æˆ–ä¿å­˜<br>
save()  å­˜åœ¨å°±æ›´æ–°ï¼Œä¸å­˜åœ¨å°±æ–°å¢<br>
æ›´æ–°èŒƒä¾‹ï¼šæ›´æ–°ç§‘ç›®è¡¨ id = 1 çš„ä»»è¯¾è€å¸ˆä¸º SnaiL<br>
æ§åˆ¶å™¨ Index.php æ–‡ä»¶â†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Course;

class Index extends BaseController
{
    public function index()
    {
        $course = new Course();
        $data  = $course-&gt;find(1);
        echo 'æ›´æ–°å‰&lt;br&gt;';
        dump($data-&gt;teacher-&gt;tname);
        $data-&gt;teacher-&gt;save(['tname' =&gt; 'SnaiL']);

        echo 'æ›´æ–°å&lt;br&gt;';
        $data  = $course-&gt;find(1);
        dump($data-&gt;teacher-&gt;tname);
    }
}
</code></pre>
<p>æ•ˆæœå›¾â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1567043018401.jpg" alt=""></p>
<p>æ–°å¢èŒƒä¾‹ï¼šæ–°å¢ [ç‰©ç†] ç§‘ç›®ï¼Œä»»è¯¾è€å¸ˆä¸º MaMaKa</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Teacher;

class Index extends BaseController
{
    public function index()
    {
        $teacher = new Teacher();
        $data = ['tname' =&gt; 'MaMaKa','tid' =&gt; '01'];

        $id = $teacher-&gt;insertGetId($data);
        $teach = $teacher-&gt;find($id);
        $teach-&gt;course()-&gt;save(['cname' =&gt; 'ç‰©ç†','cid' =&gt; '01']);

        $rs = $teacher-&gt;find($id);
        dump($rs-&gt;course-&gt;cname);
    }
}
</code></pre>
<p>æ•ˆæœå›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1567058142293.jpg" alt=""></p>
<h3 id="ä¸€å¯¹å¤šå…³è”">ä¸€å¯¹å¤šå…³è”</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037601">TP6 ä¸€å¯¹å¤šå…³è”å®˜æ–¹æ–‡æ¡£</a></p>
<ol>
<li>ä¸€åˆ‡æ“ä½œï¼Œå¯¹æ ‡ä¸€å¯¹ä¸€å…³è”èŒƒä¾‹ğŸ˜‚ğŸ˜‚ğŸ˜‚</li>
<li>ä¸æ˜¯æˆ‘æ‡’ï¼Œè€Œæ˜¯æˆ‘çœŸçš„æ‡’</li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ¨¡æ¿ä½¿ç”¨]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-9</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-9">
        </link>
        <updated>2019-07-08T05:47:17.000Z</updated>
        <summary type="html"><![CDATA[<p>TP6 æ¨¡(mu)æ¿åŸºæœ¬ä½¿ç”¨</p>
]]></summary>
        <content type="html"><![CDATA[<p>TP6 æ¨¡(mu)æ¿åŸºæœ¬ä½¿ç”¨</p>
<!-- more -->
<h3 id="å‰è¨€ä¸€">å‰è¨€ä¸€ï¼š</h3>
<p>TP5.1 æ–‡æ¡£ä»…åšå‚è€ƒï¼Œå› ä¸º TP6 é‡Œï¼Œä¸å†æ”¯æŒ $this çš„å†™æ³•</p>
<pre><code>$this-&gt;assign('name', 'thinkphp');
return $this-&gt;fetch();
</code></pre>
<p>å»ºè®®æ”¹ä¸ºé™æ€è°ƒç”¨ use think\facade\View;  çš„ç”¨æ³•</p>
<pre><code>&lt;?php
namespace app\admin\controller;

use app\BaseController;
use think\facade\View;

class Index extends BaseController
{
    public function index()
    {
        View::assign([
            'name' =&gt; 'ThinkPHP',
        ]);
        return View::fetch();
    }
}
</code></pre>
<h3 id="å‰è¨€äºŒ">å‰è¨€äºŒï¼š</h3>
<p>TP6 æœ€æ–°ç‰ˆ view æ¶æ„ï¼Œå·²ç»ç”±åº”ç”¨ç›®å½•ä¸‹åˆ›å»º view ç›®å½•ï¼Œæå‡åˆ°æ ¹ç›®å½•ä¸‹çš„ view<br>
æ–°æ—§å¯¹æ¯”å›¾ï¼ˆå·¦ã€Œæ–°ã€| å³ã€Œæ—§ã€ï¼‰<br>
<img src="https://UserNameZjw.github.io/post-images/1563331585741.jpg" alt=""></p>
<h3 id="æ­£æ–‡">æ­£æ–‡</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp5_1/354069">TP5.1 æ¨¡æ¿ å®˜æ–¹æ–‡æ¡£</a></p>
<blockquote>
<p>å› ä¸º TP6 è¿˜åœ¨å¼€å‘ä¸­ï¼Œå†åŠ ä¸Š TP6 æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿è§„åˆ™ï¼Œæ‰€ä»¥æš‚æ—¶åˆ°å†™æ–‡ä¸ºæ­¢ï¼Œè¿˜æ²¡æœ‰æ¨¡æ¿çš„è¯¦ç»†ä»‹ç»</p>
</blockquote>
<h3 id="æ¨¡æ¿å˜é‡èµ‹å€¼åŠè¾“å‡ºæ¼”ç¤º">æ¨¡æ¿å˜é‡èµ‹å€¼åŠè¾“å‡ºæ¼”ç¤º</h3>
<p>Controller ä¸‹ Index.php çš„ index() æ–¹æ³•ä»£ç  â†“</p>
<pre><code>&lt;?php
namespace app\admin\controller;

use app\BaseController;
use think\facade\View;

class Index extends BaseController
{
    public function index()
    {
        View::assign([
            //ç®€å•èµ‹å€¼
            'name' =&gt; 'ThinkPHP',
            //æ•°ç»„èµ‹å€¼
            'data' =&gt; ['name' =&gt; 'Cry','name2' =&gt; 'Snail'],
            //äºŒç»´æ•°ç»„
            'list' =&gt; [
                ['name' =&gt; 'Cry'],
                ['name' =&gt; 'Snail']
            ]
        ]);
        return View::fetch();
    }
}
</code></pre>
<p>å¯¹åº”çš„ HTML æ¨¡æ¿ä»£ç   â†“</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
ç®€å•èµ‹å€¼è°ƒç”¨
&lt;!--litera æ˜¯ç”¨æ¥åŸæ ·è¾“å‡ºçš„--&gt;
{literal}
    æ¨¡æ¿è¾“å‡º {$name}
{/literal}
&lt;br&gt;
{$name}
&lt;hr&gt;

æ•°ç»„èµ‹å€¼è°ƒç”¨
{literal}
    æ¨¡æ¿è¾“å‡º {$data.name}/{$data.name2}
{/literal}
&lt;br&gt;
{$data.name}/{$data.name2}
&lt;hr&gt;

äºŒç»´æ•°ç»„å¾ªç¯ ä¸¤ç§æ–¹å¼ foreach | volist &lt;br&gt;

foreach æ¨¡æ¿ä½¿ç”¨ &lt;br&gt;
{literal}
    {foreach $list as $key=&gt;$vo }&lt;br&gt;
        {$vo.name}&lt;br&gt;
    {/foreach}&lt;br&gt;
{/literal}
&lt;br&gt;
foreach çš„ key ä» 0 èµ·å§‹ &lt;br&gt;
{foreach $list as $key=&gt;$vo }
    {$key} &gt;&gt; {$vo.name}&lt;br&gt;
{/foreach}
&lt;hr&gt;

volist æ¨¡æ¿ä½¿ç”¨ &lt;br&gt;
{literal}
    {volist name='list' id='vo' k='i' }&lt;br&gt;
        {$vo.name}&lt;br&gt;
    {/volist}&lt;br&gt;
{/literal}
&lt;br&gt;
volist çš„ key ä» 1 èµ·å§‹ &lt;br&gt;
{volist name='list' id='vo' k='i' }
    {$i} &gt;&gt; {$vo.name}&lt;br&gt;
{/volist}

&lt;hr&gt;
ä½¿ç”¨å‡½æ•° {literal} {:å‡½æ•°å} {/literal}&lt;br&gt;
ä½¿ç”¨ MD5() å‡½æ•°åŠ å¯† $data.name &lt;br&gt;
å¦‚ {literal} {:MD5($data.name)} / {$data.name | md5} {/literal} &lt;br&gt;
åŠ å¯†å {:MD5($data.name)} / {$data.name | md5}
&lt;hr&gt;
é»˜è®¤å€¼ default &lt;br&gt;
{literal} {$data.names|default=&quot;æ²¡æœ‰å­—ç¬¦ä¸²çš„æ—¶å€™å‡ºç°æˆ‘&quot;} {/literal} &lt;br&gt;
{$data.names|default=&quot;æ²¡æœ‰å­—ç¬¦ä¸²çš„æ—¶å€™å‡ºç°æˆ‘&quot;}

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>è¾“å‡ºå›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1563335694394.jpg" alt=""></p>
<h3 id="å†…ç½®æ ‡ç­¾">å†…ç½®æ ‡ç­¾</h3>
<p>å‚è€ƒèµ„æ–™ ï¼š<a href="https://www.kancloud.cn/manual/thinkphp5_1/354083">TP5.1 å†…ç½®æ ‡ç­¾ å®˜æ–¹æ–‡æ¡£</a><br>
è‡ªç”±æ‰©å±•ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€è·¯ç”±åŸºç¡€ä½¿ç”¨]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-8</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-8">
        </link>
        <updated>2019-07-06T06:37:20.000Z</updated>
        <summary type="html"><![CDATA[<p>è·¯ç”±åŸºç¡€å®šä¹‰<br>
é™æ€è·¯ç”±<br>
åŠ¨æ€è·¯ç”±</p>
]]></summary>
        <content type="html"><![CDATA[<p>è·¯ç”±åŸºç¡€å®šä¹‰<br>
é™æ€è·¯ç”±<br>
åŠ¨æ€è·¯ç”±</p>
<!-- more -->
<h3 id="å‰è¨€æœ¬ç¯‡ä¾‹å­å‡åœ¨å¤šåº”ç”¨æ¨¡å¼æ‰§è¡Œ">å‰è¨€ï¼šæœ¬ç¯‡ä¾‹å­ï¼Œå‡åœ¨å¤šåº”ç”¨æ¨¡å¼æ‰§è¡Œ</h3>
<h3 id="è·¯ç”±é¡»çŸ¥">è·¯ç”±é¡»çŸ¥</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037494">TP6 è·¯ç”±ä»‹ç»å®˜æ–¹æ–‡æ¡£</a></p>
<p>é¡»çŸ¥ä¸€:</p>
<blockquote>
<p>TP6 ä¼šè‡ªåŠ¨åŠ è½½ route ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ï¼ŒæŠŠæ‰€æœ‰çš„è·¯ç”±è§„åˆ™éƒ½å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œå’Œå†™åœ¨å¤šä¸ªæ–‡ä»¶é‡Œï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ã€‚<br>
åŒºåˆ†å¤šä¸ªæ–‡ä»¶æ¥å†™ï¼Œä»…ä¸ºäº†ç»´æŠ¤æ›´æ–¹ä¾¿ã€‚</p>
</blockquote>
<p>é¡»çŸ¥äºŒ:</p>
<blockquote>
<p>ç”±äº TP6 é»˜è®¤å•åº”ç”¨æ¨¡å¼<br>
æ‰€ä»¥ TP6 çš„ã€Œå•åº”ç”¨ã€æ¨¡å¼ä¸ã€Œå¤šåº”ç”¨ã€æ¨¡å¼çš„è·¯ç”±ç›®å½•æ¶æ„ä¸å®Œå…¨ä¸€æ ·<br>
<img src="https://UserNameZjw.github.io/post-images/1562395791000.jpg" alt=""></p>
</blockquote>
<p>é¡»çŸ¥ä¸‰:</p>
<blockquote>
<p>æ¯ä¸ªå•ç‹¬åº”ç”¨ï¼Œéƒ½å¯ä»¥è¿›è¡Œå•ç‹¬çš„è·¯ç”±é…ç½®<br>
åªéœ€è¦åœ¨åº”ç”¨ç›®å½•ä¸‹åˆ›å»º /config/route.php æ–‡ä»¶è¿›è¡Œè·¯ç”±é…ç½®<br>
åœ¨å•åº”ç”¨å…³é—­è·¯ç”±åŠŸèƒ½ï¼Œåªéœ€è¦åœ¨ /congif/app.php è®¾ç½® 'with_route'    =&gt;    false<br>
indexåº”ç”¨ä¸‹ï¼Œç›®å½•ç»“æ„ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1562397139681.jpg" alt=""><br>
ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒåŸºæœ¬ä¸éœ€è¦</p>
</blockquote>
<h3 id="è·¯ç”±å®šä¹‰">è·¯ç”±å®šä¹‰</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037495">TP6 è·¯ç”±å®šä¹‰ å®˜æ–¹æ–‡æ¡£</a></p>
<p>æ–‡ä»¶è·¯å¾„(å¤šåº”ç”¨æ¨¡å¼)<br>
<img src="https://UserNameZjw.github.io/post-images/1562398229469.jpg" alt=""></p>
<p>1.åŸºç¡€ä½¿ç”¨<br>
index.php ä»£ç  â†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;

class Index extends BaseController
{
    public function snail($name = &quot;Cry&quot;,$username = &quot;è·¯ç”±æµ‹è¯•&quot;){
        return &quot;æ£’æ£’å“’~~&quot;.$name.&quot;æ­å–œä½ ,&quot;.$username.&quot;,è·³è½¬æˆåŠŸ&quot;;
    }
}
</code></pre>
<p>è·¯ç”±å®šä¹‰ä»£ç  â†“</p>
<pre><code>&lt;?php
use think\facade\Route;

//åŸºç¡€è®¾ç½®ï¼Œget è®¿é—®
Route::rule(&quot;snail1&quot;,&quot;index/index/snail&quot;,&quot;get&quot;);
</code></pre>
<p>2.è·¯ç”±åŠ¨æ€ä¼ å€¼<br>
åŠ¨æ€ä¼ å€¼ä»£ç  â†“</p>
<pre><code>&lt;?php
use think\facade\Route;

//åŸºç¡€è®¾ç½®ï¼ŒåŠ¨æ€ä¼ å‚
//ä¸¤ç§æ–¹æ³•ç­‰åŒ
Route::rule(&quot;snail1/:name/:username&quot;,&quot;index/index/snail&quot;,&quot;get&quot;);

Route::rule(&quot;snail1/&lt;name&gt;/&lt;username&gt;&quot;,&quot;index/index/snail&quot;,&quot;get&quot;);
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1562400693593.jpg" alt=""></p>
<blockquote>
<ol>
<li>è·¯ç”±åŠ¨æ€ä¼ å‚ï¼Œè·¯ç”±ä¼šè‡ªåŠ¨å¯¹åº”ç»‘å®šä¼ å€¼ï¼Œä½†ä¸å¯é¡ºåºé”™ä¹±</li>
<li>è·¯ç”±ä¸­å®šä¹‰çš„ /:name/:username å‚æ•°ï¼Œä¸ºå¿…ä¼ å‚æ•°ï¼Œå¦‚æœç¼ºå°‘ï¼Œåˆ™æŠ¥é”™</li>
</ol>
</blockquote>
<p>3.åŠ¨æ€ä¼ å€¼ï¼Œå¯é€‰å‚æ•°</p>
<pre><code>&lt;?php
use think\facade\Route;

//åŸºç¡€è®¾ç½®ï¼ŒåŠ¨æ€ä¼ å‚
//ä¸¤ç§æ–¹æ³•ç­‰åŒ
Route::rule(&quot;snail1/:name/:username/[:nickname]&quot;,&quot;index/index/snail&quot;,&quot;get&quot;);

Route::rule(&quot;snail1/&lt;name&gt;/&lt;username&gt;/&lt;nickname?&gt;&quot;,&quot;index/index/snail&quot;,&quot;get&quot;);
</code></pre>
<blockquote>
<p>åœ¨ä¸ä¼  nickname å˜é‡æƒ…å†µä¸‹ï¼Œä¹Ÿä¸ä¼šæŠ¥é”™</p>
</blockquote>
<p>4.è·¯ç”±å‚æ•°<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037499">TP6 è·¯ç”±å‚æ•° å®˜æ–¹æ–‡æ¡£</a></p>
<ol>
<li>è°ƒç”¨æ–¹æ³•åè®¾ç½®</li>
</ol>
<pre><code>&lt;?php
use think\facade\Route;

//ä»…å…è®¸ html ä¸ shtml åç¼€è®¿é—®
Route::rule(&quot;snail1/:name/:username/[:nickname]&quot;,&quot;index/index/snail&quot;,&quot;get&quot;)-&gt;ext(&quot;html|shtml&quot;);

//ç¦æ­¢æ‰æ— åç¼€è®¿é—®
Route::rule(&quot;snail1/&lt;name&gt;/&lt;username&gt;/&lt;nickname?&gt;&quot;,&quot;index/index/snail&quot;,&quot;get&quot;)-&gt;denyExt(&quot;&quot;);
</code></pre>
<ol start="2">
<li>option æ‰¹é‡è®¾ç½®</li>
</ol>
<pre><code>&lt;?php
use think\facade\Route;

Route::rule(&quot;snail1/&lt;name&gt;/&lt;username&gt;/&lt;nickname?&gt;&quot;,&quot;index/index/snail&quot;,&quot;get&quot;)
    -&gt;option([
        //ç¦æ­¢ç©ºåç¼€
        &quot;deny_ext&quot; =&gt; &quot;&quot;,
        //ä»…å…è®¸ html ä¸ shtml åç¼€
        &quot;ext&quot; =&gt; &quot;html|shtml&quot;,
        //ç¦æ­¢https è®¿é—®
        &quot;https&quot; =&gt; false,
        //è®¾ç½®è®¿é—®åŸŸå
        &quot;domain&quot; =&gt; &quot;127.0.0.1&quot;
    ]);
</code></pre>
<blockquote>
<p>option() æ•°ç»„æ ¼å¼æ•°æ®</p>
</blockquote>
<p>5.è·¯ç”±åˆ†ç»„<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037500">TP6 è·¯ç”±åˆ†ç»„ å®˜æ–¹æ–‡æ¡£</a><br>
ç®€åŒ–è·¯ç”±å®šä¹‰ï¼Œæé«˜è·¯ç”±åŒ¹é…æ•ˆç‡</p>
<pre><code>&lt;?php
use think\facade\Route;

Route::group(&quot;snail1&quot;,function(){
    Route::rule(&quot;:name&quot;,&quot;index/index/snail&quot;);
    Route::rule(&quot;:username&quot;,&quot;index/index/snail&quot;);
})
    -&gt;ext(&quot;html|shtml&quot;)
    -&gt;https(false)
    -&gt;pattern([
        &quot;name&quot; =&gt; &quot;\d+&quot;,
        &quot;username&quot; =&gt; &quot;\w+&quot;
    ])
    ;
</code></pre>
<p>6.æ³¨è§£è·¯ç”±<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037502">TP6 æ³¨è§£è·¯ç”± å®˜æ–¹æ–‡æ¡£</a><br>
æ³¨æ„ï¼šéœ€è¦è¿›å…¥åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹ç„¶åå†æ‰§è¡Œ</p>
<pre><code>composer require topthink/think-annotation 
</code></pre>
<p>æ³¨è§£è·¯ç”±ï¼Œå¯ä»¥ç›´æ¥åœ¨ã€Œæ§åˆ¶å™¨ã€æ–‡ä»¶å†…å†™<br>
æ³¨è§£è·¯ç”±éœ€è¦ use think\annotation\Route;<br>
ä»¥ä¸‹æ˜¯ index.php æ–‡ä»¶ä»£ç  â†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\annotation\Route;

class Index extends BaseController
{
    public function index(){
        return &quot;Index&quot;;
    }

    /**
     * @param string $name
     * @param string $username
     * @param string $nickname
     * @return string
     * @Route(&quot;snail1/:name/:username/[:nickname]&quot;,method=&quot;GET&quot;,https=0,ext=&quot;html|shtml&quot;,deny_ext=&quot;&quot;)
     */

    public function snail($name = &quot;Cry&quot;,$username = &quot;è·¯ç”±æµ‹è¯•&quot;,$nickname = &quot;&quot;){
        return &quot;æ£’æ£’å“’~~name=&quot;.$name.&quot;,æ­å–œä½ ,username=&quot;.$username.&quot;,è·³è½¬æˆåŠŸ,nickname=&quot;.$nickname;
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1562563051363.jpg" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ¨¡å‹ å¢ã€åˆ ã€æ”¹ã€æŸ¥]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-7</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-7">
        </link>
        <updated>2019-06-27T03:05:14.000Z</updated>
        <summary type="html"><![CDATA[<p>æ¨¡å‹çš„ å¢ã€åˆ ã€æ”¹ã€æŸ¥</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ¨¡å‹çš„ å¢ã€åˆ ã€æ”¹ã€æŸ¥</p>
<!-- more -->
<h3 id="å®šä¹‰">å®šä¹‰</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037580">TP6 æ¨¡å‹å®šä¹‰å®˜ç½‘æ–‡æ¡£</a><br>
app\index\controller\Index.php ä»£ç </p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $user = new Tp();
        $arr = $user-&gt;getId(2);
        dump($arr);
    }

}
</code></pre>
<p>app\index\model\Tp.php ä»£ç </p>
<pre><code>&lt;?php

namespace app\index\model;

use think\Model;

class Tp extends Model
{
    public function getUser($where = null){
        $arr = $this-&gt;where( ($where = null) ? &quot; id &gt;0 &quot; : $where);
        return $arr;
    }

    public function getId($id){

        $this-&gt;model = $this-&gt;getUser();
        return $this-&gt;model-&gt;find($id)-&gt;toArray();
    }

}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561606176769.png" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>æ¨¡å‹å®šä¹‰ï¼Œæœ€å¥½åœ¨å„è‡ªçš„åº”ç”¨ä¸‹çš„ model æ–‡ä»¶å¤¹ä¸‹ï¼Œ å¦‚ index æ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªåº”ç”¨</li>
<li>æ¨¡å‹å…¶å®å°±æ˜¯ Db:: ç±»çš„ä¸€ä¸ªå¢å¼ºï¼ŒDb:: ç±»çš„æ‰€æœ‰è¯­æ³•ï¼Œéƒ½å¯ä»¥åœ¨ model ä½¿ç”¨</li>
<li>æ¨¡å‹ä¸­è¿”å›çš„æ•°æ®å‡æ˜¯ ã€Œå¯¹è±¡ã€ æ ¼å¼ï¼Œè°ƒç”¨å…ƒç´ éœ€è¦ç”¨ç®­å¤´æŒ‡å‘ -&gt;</li>
<li>å¦‚æœéœ€è¦è¿”å›æ•°ç»„ï¼Œå¯ä»¥åœ¨æ¨¡å‹ä¸­ï¼Œè°ƒç”¨ toArray() è¿”å›æ•°ç»„å½¢å¼</li>
</ol>
</blockquote>
<h3 id="æ¨¡å‹å­—æ®µ">æ¨¡å‹å­—æ®µ</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037581">TP6 æ¨¡å‹å­—æ®µå®˜æ–¹æ–‡æ¡£</a></p>
<blockquote>
<p>å¦‚æœ‰éœ€æ±‚ï¼Œè‡ªè¡Œå‚è€ƒ</p>
</blockquote>
<h3 id="å¢">å¢</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037582">TP6 æ¨¡å‹-&gt;æ–°å¢ å®˜æ–¹æ–‡æ¡£</a></p>
<ol>
<li>save()  å•æ¡æ’å…¥æ•°æ®ï¼ŒæˆåŠŸè¿”å›true</li>
<li>saveAll() æ‰¹é‡æ’å…¥æ•°æ®ï¼ŒæˆåŠŸè¿”å›æ•°æ®é›†</li>
<li>é™æ€è°ƒç”¨ create() æˆåŠŸè¿”å›å¯¹è±¡æ•°æ®</li>
</ol>
<p>save() åŸºç¡€ç”¨æ³•ä»£ç </p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $user = new Tp();
        $data = [
            &quot;nickname&quot; =&gt; &quot;modelSave&quot;,
            &quot;email&quot; =&gt; &quot;modelSave@qq.com&quot;,
            &quot;age&quot; =&gt; 18
        ];
        $back = $user-&gt;save($data);
        dump($back);
    }

}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561607584749.jpg" alt=""></p>
<p>save() è·å–è‡ªå¢ä¸»é”®<br>
åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™ä¸ªçœŸçš„ç¹ç<br>
å¦‚æœä»…ä»…æ˜¯éœ€è¦è¿”å›ä¸»é”®ï¼Œå¯ä»¥ç›´æ¥ç”¨Db:: å†™æ³•è°ƒç”¨ insertGetId()</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $user = new Tp();
        $user-&gt;nickname = &quot;modelSave&quot;;
        $user-&gt;email = &quot;modelSave@qq.com&quot;;
        $user-&gt;age = 19;
        $user-&gt;save();
        //æ‰“å°å¯¹è±¡ id ä¸»é”®
        dump($user-&gt;id);
        //è¿”å›å¯¹è±¡
        return $user;
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561609920487.jpg" alt=""></p>
<p>saveAll() ä½¿ç”¨æ–¹æ³•</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $tp = new Tp();
        $data =
            [
                [
                    &quot;nickname&quot; =&gt; &quot;modelSave1&quot;,
                    &quot;email&quot; =&gt; &quot;modelSave@qq.com1&quot;,
                    &quot;age&quot; =&gt; 11
                ],
                [
                    &quot;nickname&quot; =&gt; &quot;modelSave2&quot;,
                    &quot;email&quot; =&gt; &quot;modelSave@qq.com2&quot;,
                    &quot;age&quot; =&gt; 12
                ],
                [
                    &quot;nickname&quot; =&gt; &quot;modelSave3&quot;,
                    &quot;email&quot; =&gt; &quot;modelSave@qq.com3&quot;,
                    &quot;age&quot; =&gt; 13
                ],
            ];
        $back = $tp-&gt;saveAll($data);
        //è¿”å›å¯¹è±¡
        return $back;
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561613350850.jpg" alt=""></p>
<p>é™æ€è°ƒç”¨ create()</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $data = [
            &quot;nickname&quot; =&gt; &quot;modelSave&quot;,
            &quot;email&quot; =&gt; &quot;modelSave@qq.com&quot;,
            &quot;age&quot; =&gt; 18
        ];
        //é™æ€è°ƒç”¨ï¼Œç¼–è¾‘å™¨ä¸æç¤ºå“¦
        $tp = Tp::create($data);
        //è¿”å›å¯¹è±¡
        return $tp;
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561612590741.jpg" alt=""></p>
<p>ç­›é€‰æ’å…¥</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $data = [
            &quot;nickname&quot; =&gt; &quot;ç­›é€‰æ’å…¥&quot;,
            &quot;email&quot; =&gt; &quot;ä¸è®¸æ’å…¥&quot;
        ];
        $tp = Tp::create($data,[&quot;nickname&quot;]);
        dump($tp);
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561809721324.jpg" alt=""></p>
<blockquote>
<ol>
<li>å…³äºè‡ªåŠ¨ç­›é€‰ä»¥åŠè‡ªåŠ¨æ’å…¥ï¼Œéƒ½ä¼šæœ‰ä¸ªæ“ä½œæ—¶é—´ï¼Œå¯ä»¥åœ¨ config/database/php è®¾ç½®</li>
<li>é»˜è®¤é…ç½® 'auto_timestamp'  =&gt; true æ„æ€æ˜¯è‡ªåŠ¨å®Œæˆã€‚å¦‚æœéœ€è¦ç‰¹åˆ«æŒ‡å®šï¼Œå¯ä»¥æŒ‰ç…§æ³¨é‡Šé…ç½®</li>
<li>create ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ•°ç»„å½¢å¼ï¼Œæ˜¯å…è®¸æ’å…¥çš„å­—æ®µ</li>
</ol>
</blockquote>
<p>æ€»ç»“ï¼šå°½é‡ç”¨ create() é™æ€æ–¹å¼æ–°å¢å•æ¡æ•°æ®ï¼Œæ‰¹é‡æ’å…¥é€‰æ‹© saveAll() ï¼Œæ‰€æœ‰æ’å…¥æ–¹æ³•ï¼Œå‡è‡ªåŠ¨å®Œæˆç­›é€‰ã€‚</p>
<h3 id="æ”¹">æ”¹</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037583">TP6 æ¨¡å‹-&gt; æ›´æ–° å®˜æ–¹æ–‡æ¡£</a></p>
<ol>
<li>save() ä½¿ç”¨æ–¹æ³•è‡ªè¡Œé¢†ä¼šï¼ŒæˆåŠŸè¿”å›true</li>
<li>saveAll() ä½¿ç”¨æ–¹æ³•åŒsave()ï¼ŒæˆåŠŸè¿”å›å¯¹è±¡æ•°æ®é›†</li>
<li>é™æ€è°ƒç”¨ update()  æˆåŠŸè¿”å›å¯¹è±¡æ•°æ®</li>
</ol>
<p>save() ä¸ saveAll() ä¸åšè¯¦è§£ ğŸ¤£ğŸ¤£ğŸ¤£</p>
<p>é™æ€è°ƒç”¨ update()</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        //å¦‚æœå˜æ›´æ•°æ®ä¸­æœ‰ä¸»é”®ï¼Œå¯ä»¥å…å†™ç¬¬äºŒå‚æ•° $where æ¡ä»¶
        $data = [
            &quot;nickname&quot; =&gt; &quot;upName&quot;,
            &quot;email&quot; =&gt; &quot;upEmail&quot;,
            &quot;id&quot; =&gt; 26
        ];
        return Tp::update($data);
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561617295249.jpg" alt=""></p>
<p>ç­›é€‰ä¿®æ”¹</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        $data = [
            &quot;nickname&quot; =&gt; &quot;ç­›é€‰æ’å…¥&quot;,
            &quot;email&quot; =&gt; &quot;ä¸è®¸æ’å…¥&quot;
        ];
        $tp = Tp::update($data,[&quot;id&quot; =&gt; 26],[&quot;email&quot;]);
        return $tp;
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561812024566.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>å•æ¡ä¿®æ”¹ï¼Œä¾ç„¶æ¨èé™æ€è°ƒç”¨ update() ï¼Œå¤šæ¡æ¨è saveAll()</li>
<li>å¦‚æœä¿®æ”¹æ•°æ®ä¸­åŒ…å«å”¯ä¸€ä¸»é”®ï¼Œå¯ä»¥ä¸ä¼ é€’æ¡ä»¶å‚æ•°</li>
<li>æ¡ä»¶å‚æ•°ï¼Œæ•°ç»„å½¢å¼ ['id' =&gt; 26]</li>
<li>ç­›é€‰ä¿®æ”¹ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ•°ç»„å½¢å¼ï¼Œæ˜¯å…è®¸çš„å­—æ®µ</li>
</ol>
</blockquote>
<h3 id="æŸ¥">æŸ¥</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037585">TP6 æ¨¡å‹-&gt; æŸ¥è¯¢ å®˜æ–¹æ–‡æ¡£</a></p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        //å¯ä»¥ç”¨ Db ç±»æ‰€æœ‰å†™æ³•
        //é™æ€æŸ¥è¯¢
        echo &quot;æŸ¥è¯¢å•æ¡ find() é»˜è®¤æ¡ä»¶æŸ¥è¯¢æ˜¯å”¯ä¸€ä¸»é”® è¿”å›å¯¹è±¡&lt;br&gt;
               ç”¨toArray() è½¬æ•°ç»„æ ¼å¼&quot;;
        dump(Tp::find(26)-&gt;toArray());
        //æŸ¥è¯¢å¤šæ¡
        echo &quot;æŸ¥è¯¢å¤šæ¡ select() é»˜è®¤æ¡ä»¶æŸ¥è¯¢æ˜¯å”¯ä¸€ä¸»é”® è¿”å›å¯¹è±¡&lt;br&gt;
               ç”¨toArray() è½¬æ•°ç»„æ ¼å¼&quot;;
        dump(Tp::select([23,24])-&gt;toArray());

        //æŸ¥è¯¢å•æ¡
        echo &quot;æŸ¥è¯¢å•æ¡ find() é»˜è®¤æ¡ä»¶æŸ¥è¯¢æ˜¯å”¯ä¸€ä¸»é”® è¿”å›å¯¹è±¡&lt;br&gt;
               ç”¨toArray() è½¬æ•°ç»„æ ¼å¼&quot;;
        $tp = new Tp();
        dump($tp-&gt;find(26)-&gt;toArray());

        echo &quot;æŸ¥è¯¢å•æ¡ select() é»˜è®¤æ¡ä»¶æŸ¥è¯¢æ˜¯å”¯ä¸€ä¸»é”® è¿”å›å¯¹è±¡&lt;br&gt;
               ç”¨toArray() è½¬æ•°ç»„æ ¼å¼&quot;;
        dump($tp-&gt;select([23,24])-&gt;toArray());
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561619193582.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>ä¸ç®¡æ˜¯åœ¨ã€Œæ§åˆ¶å™¨ã€è¿˜æ˜¯åœ¨ã€Œæ¨¡å‹ã€ä¸­ï¼Œå‡æ”¯æŒ Db ç±»çš„æ‰€æœ‰å†™æ³•</li>
<li>ã€Œæ§åˆ¶å™¨ã€æ¨èé™æ€å†™æ³•ï¼Œå¦‚ Tp::where()-&gt;find()</li>
<li>ã€Œæ¨¡å‹ã€æ¨èå†™æ³•ï¼Œå¦‚ $this-&gt;where()-&gt;find()</li>
</ol>
</blockquote>
<p>å­—æ®µåŠ¨æ€æŸ¥è¯¢</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        //å¦‚æœæŸ¥è¯¢ä¸ºç©ºï¼Œä¸èƒ½æ¥toArray()
        $tp = Tp::getByNickname(&quot;snail&quot;)-&gt;toArray();
        dump($tp);

        $tp = Tp::getByAge(&quot;12&quot;)-&gt;toArray();
        dump($tp);

        $tp = Tp::getByEmail(&quot;668346&quot;)-&gt;toArray();
        dump($tp);
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561818889487.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>getBy æ¥ä½ çš„å­—æ®µï¼Œæ³¨æ„é©¼å³°å†™æ³•</li>
<li>ä¾‹ï¼šæŸ¥è¯¢ nickname å­—æ®µ éœ€è¦å†™æˆ getByNickname</li>
<li>æ¯”å¯¹ä½¿ç”¨çš„æ˜¯ = è¿ç®—ç¬¦</li>
<li>è¿”å›ç»“æœéƒ½æ˜¯å•æ¡æŸ¥è¯¢</li>
</ol>
</blockquote>
<h3 id="åˆ ">åˆ </h3>
<p>delete() æˆåŠŸè¿”å› true/false<br>
é™æ€è°ƒç”¨ destroy()<br>
é—­åŒ…æ¡ä»¶åˆ é™¤</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\index\model\Tp;

class Index extends BaseController
{
    public function index()
    {
        //ä¸‰ç§åˆ é™¤æ–¹æ³•
        // åŠ¨æ€ delete()
        $tp = new Tp();
        $back = $tp-&gt;where(&quot;id&quot;,&quot;=&quot;,18)-&gt;delete();

        //é™æ€è°ƒç”¨
        $del = Tp::destroy([26,27]);
        echo $del;

        //é—­åŒ…æ¡ä»¶åˆ é™¤
        echo Tp::destroy(function ($query){
            $query-&gt;where(&quot;id&quot;,&quot;&gt;&quot;,&quot;20&quot;);
        });
    }
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>æ¨èé—­åŒ…åˆ é™¤</li>
<li>å•ç‹¬ä½¿ç”¨ destroy() åˆ é™¤ï¼Œä¼ å…¥ä¸»é”®ID ï¼Œæ•°ç»„å½¢å¼</li>
</ol>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ•°æ®åº“é“¾å¼æ“ä½œ]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-6</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-6">
        </link>
        <updated>2019-06-23T02:04:17.000Z</updated>
        <summary type="html"><![CDATA[<p>åŸç”ŸæŸ¥è¯¢  èšåˆæŸ¥è¯¢<br>
é«˜çº§æŸ¥è¯¢  è§†å›¾æŸ¥è¯¢<br>
å­æŸ¥è¯¢</p>
]]></summary>
        <content type="html"><![CDATA[<p>åŸç”ŸæŸ¥è¯¢  èšåˆæŸ¥è¯¢<br>
é«˜çº§æŸ¥è¯¢  è§†å›¾æŸ¥è¯¢<br>
å­æŸ¥è¯¢</p>
<!-- more -->
<h3 id="åŸç”ŸæŸ¥è¯¢">åŸç”ŸæŸ¥è¯¢</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037570">TP6 åŸç”ŸæŸ¥è¯¢å®˜æ–¹æ–‡æ¡£</a><br>
åŸç”ŸæŸ¥è¯¢å¯ä»¥è¯´æ˜¯è®©äººåˆçˆ±åˆæ¨<br>
ç®€å•çš„è¯­å¥ç”¨ä¸åˆ°ï¼Œå¤æ‚çš„è¯­å¥ç”¨TP6 çš„æ„é€ å™¨åˆæ›´éº»çƒ¦ï¼Œå¯¼è‡´æ— æ³•å½»åº•æŠ›å¼ƒåŸç”Ÿ<br>
query() å¯æ‰§è¡Œä»»ä½•åŸç”Ÿè¯­å¥<br>
execute() ä»…ç”¨äºæ›´æ–°ä»¥åŠå†™å…¥æ•°æ®ï¼Œä¸å¯åšå…¶ä»–ç”¨å¤„</p>
<blockquote>
<p>å› ä¸ºexecute() åœ¨SQLè¯­å¥æ— é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œä»…è¿”å›å—å½±å“æ¡æ•°ï¼Œå¦åˆ™è¿”å›false</p>
</blockquote>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //ä¸‹é¢ç”¨åŸç”ŸæŸ¥è¯¢ think_tp è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®
        $sql = &quot; SELECT * FROM think_tp &quot;;
        dump(Db::query($sql));

        //ç”¨execute() æ‰§è¡ŒæŸ¥è¯¢è¯­å¥
        dump(Db::execute($sql));
    }
}
</code></pre>
<p>å›¾â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561256581994.png" alt=""></p>
<h3 id="èšåˆæŸ¥è¯¢">èšåˆæŸ¥è¯¢</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037564">TP6 èšåˆæŸ¥è¯¢å®˜æ–¹æ–‡æ¡£</a><br>
åœ¨æŸ¥è¯¢ä¸­ï¼Œç»å¸¸ç”¨åˆ°ä¸€äº›éœ€è¦ç»Ÿè®¡æ•°æ®<br>
count()	ç»Ÿè®¡æ•°é‡ï¼Œå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„å­—æ®µåï¼ˆå¯é€‰ï¼‰<br>
max()	è·å–æœ€å¤§å€¼ï¼Œå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„å­—æ®µåï¼ˆå¿…é¡»ï¼‰<br>
min()	è·å–æœ€å°å€¼ï¼Œå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„å­—æ®µåï¼ˆå¿…é¡»ï¼‰<br>
avg()	è·å–å¹³å‡å€¼ï¼Œå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„å­—æ®µåï¼ˆå¿…é¡»ï¼‰<br>
sum()	è·å–æ€»å’Œï¼Œå‚æ•°æ˜¯è¦ç»Ÿè®¡çš„å­—æ®µåï¼ˆå¿…é¡»ï¼‰</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //æŸ¥è¯¢ think_tp è¡¨æ•°æ®æ€»æ¡æ•°
        echo &quot;count() æŸ¥è¯¢æ€»æ¡æ•°&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;count());

        echo &quot;æŸ¥è¯¢ age æœ€å¤§å€¼&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;max(&quot;age&quot;));

        echo &quot;æŸ¥è¯¢ age æœ€å°å€¼&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;min(&quot;age&quot;));

        echo &quot;æŸ¥è¯¢ age å¹³å‡å€¼&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;avg(&quot;age&quot;));

        echo &quot;æŸ¥è¯¢ age æ€»å’Œ&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;sum(&quot;age&quot;));
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561257598179.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼šmax() min() æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œæ˜¯å¦å¼€å¯å¼ºåˆ¶è½¬æ¢ï¼Œå› ä¸ºæœ‰æ—¶å€™ï¼ŒæŸ¥è¯¢çš„å­—æ®µå¹¶ä¸éƒ½æ˜¯æ•°å€¼<br>
ç¬¬äºŒå€¼é»˜è®¤ä¸º true ï¼Œå¯ä¼ å…¥ false å…³é—­å¼ºåˆ¶è½¬æ¢</p>
</blockquote>
<h3 id="é«˜çº§æŸ¥è¯¢">é«˜çº§æŸ¥è¯¢</h3>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037566">TP6 é«˜çº§æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£</a></p>
<p>1.å¿«æ·æŸ¥è¯¢<br>
å¿«æ·æŸ¥è¯¢æ–¹å¼æ˜¯ä¸€ç§å¤šå­—æ®µç›¸åŒæŸ¥è¯¢æ¡ä»¶çš„ç®€åŒ–å†™æ³•<br>
| ä»£è¡¨ or ï¼Œ&amp; ä»£è¡¨ and</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //å¿«æ·æŸ¥è¯¢ | ä»£è¡¨or ï¼Œ&amp; ä»£è¡¨ and
        $back = Db::name(&quot;tp&quot;)
            -&gt;where(&quot;id|email&quot;,&quot;like&quot;,&quot;12%&quot;)
            -&gt;where(&quot;id&amp;age&quot;,&quot;&gt;&quot;,&quot;9&quot;)
            -&gt;select();

        echo Db::name(&quot;tp&quot;)
            -&gt;where(&quot;id|emali&quot;,&quot;like&quot;,&quot;12%&quot;)
            -&gt;where(&quot;id&amp;age&quot;,&quot;&gt;&quot;,&quot;9&quot;)
            -&gt;fetchSql()
            -&gt;select();

        dump($back);

    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561359487306.jpg" alt=""></p>
<p>2.æ‰¹é‡ï¼ˆå­—æ®µï¼‰æŸ¥è¯¢</p>
<p>åŸºç¡€ç”¨æ³•</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        $back = Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;&gt;&quot;,&quot;4&quot;]
            ])
            -&gt;select();

        echo Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;&gt;&quot;,&quot;4&quot;]
            ])
            -&gt;fetchSql()
            -&gt;select();

        dump($back);

    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561360542975.jpg" alt=""></p>
<p>exp BUGç–‘é—®<br>
æ­¤BUGï¼ˆæš‚åšBUGçœ‹ï¼‰å‘Šè¯‰æˆ‘ä»¬ï¼Œå­—æ®µä¸å­—æ®µæ¯”å¯¹ï¼Œå¿…é¡»exp<br>
whereExp()</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        $back = Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;&gt;&quot;,&quot;age&quot;]
            ])
            -&gt;select();
        echo Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;&gt;&quot;,&quot;age&quot;]
            ])
            -&gt;fetchSql()
            -&gt;select();
        
        $back2 = Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;exp&quot;,Db::raw(&quot;&gt;age&quot;)]
            ])
            -&gt;select();
        echo &quot;&lt;br&gt;&quot;.Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;email&quot;,&quot;like&quot;,&quot;123%&quot;],
                [&quot;id&quot;,&quot;exp&quot;,Db::raw(&quot;&gt;age&quot;)]
            ])
            -&gt;fetchSql()
            -&gt;select();

        dump($back);
        dump($back2);
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561363274133.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼šexp å¿…é¡»é…åˆ Db::raw() ä½¿ç”¨</p>
</blockquote>
<p>3.æ•°ç»„ç»„åˆæ–¹å¼ï¼Œç›´æ¥å˜é‡ç»„åˆ</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //æ•°ç»„æŸ¥è¯¢æ–¹å¼ï¼Œå˜é‡ç›´æ¥ç»„åˆ
        $email = &quot;Sn&quot;;
        $nick = &quot;s&quot;;
        $back = Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;],
                [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
            ])
            -&gt;select();

        echo Db::name(&quot;tp&quot;)
            -&gt;where([
                [&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;],
                [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
            ])
            -&gt;fetchSql()
            -&gt;select();
        dump($back);
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561366312794.jpg" alt=""></p>
<p>4.é—­åŒ…æŸ¥è¯¢</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //é—­åŒ…æŸ¥è¯¢
        $email = &quot;Sn&quot;;
        $nick = &quot;s&quot;;
        $back = Db::name(&quot;tp&quot;)
            -&gt;where(function ($query) use ($email,$nick){
                $query-&gt;where([
                        [&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;],
                        [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
                ]);
            })
            -&gt;select();

        echo Db::name(&quot;tp&quot;)
            -&gt;where(function ($query) use ($email,$nick){
                $query-&gt;where([
                    [&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;],
                    [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
                ]);
            })
            -&gt;fetchSql()
            -&gt;select();
        dump($back);
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561367263604.jpg" alt=""></p>
<p>5.æ··åˆæŸ¥è¯¢<br>
åªè¦ç¬¦åˆè¯­æ³•è§„åˆ™çš„å†™æ³•ï¼Œéƒ½èƒ½åŒæ—¶ä¸€èµ·å†™</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //æ··åˆæŸ¥è¯¢
        $email = &quot;Sn&quot;;
        $nick = &quot;s&quot;;
        $back = Db::name(&quot;tp&quot;)
            //å˜é‡ç»„åˆå†™æ³•
            -&gt;where(&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;)
            //é—­åŒ…å†™æ³•
            -&gt;where(function ($query) use ($email){
                $query-&gt;where([
                    [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
                ])
                //å­—ç¬¦ä¸²å†™æ³•
                -&gt;whereOr(&quot;age &gt; 0 and 1=1&quot;);
            })
            //å¿«æ·å†™æ³•
            -&gt;where(&quot;id|age&quot;,&quot;&gt;&quot;,0)
            //å­—ç¬¦ä¸²æ¡ä»¶æŸ¥è¯¢ï¼Œç»‘å®šå†™æ³•
            -&gt;whereRaw(&quot;email like :email&quot;,[&quot;email&quot; =&gt; $email.&quot;%&quot;])
            -&gt;select();

        echo Db::name(&quot;tp&quot;)
            -&gt;where(&quot;nickname&quot;,&quot;like&quot;,$nick.&quot;%&quot;)
            -&gt;where(function ($query) use ($email){
                $query-&gt;where([
                    [&quot;email&quot;,&quot;like&quot;,$email.&quot;%&quot;]
                ])
                    -&gt;whereOr(&quot;age &gt; 0 and 1=1&quot;);
            })
            -&gt;where(&quot;id|age&quot;,&quot;&gt;&quot;,0)
            -&gt;whereRaw(&quot;email like :email&quot;,[&quot;email&quot; =&gt; $email.&quot;%&quot;])
            -&gt;fetchSql()
            -&gt;select();
        dump($back);
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561379697950.jpg" alt=""></p>
<p>6.æ›´å¤šå¿«æ·æ–¹æ³•<br>
<img src="https://UserNameZjw.github.io/post-images/1561379891833.jpg" alt=""></p>
<h3 id="è§†å›¾æŸ¥è¯¢">è§†å›¾æŸ¥è¯¢</h3>
<p>å¤šè¡¨æŸ¥è¯¢ï¼Œjoin çš„æ¨èæ›¿ä»£æ–¹æ³•</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        $back = Db::view(&quot;tp a&quot;,&quot;id,nickname&quot;)
            -&gt;view(&quot;tp1 b&quot;,&quot;id,email,nickname&quot;,&quot;a.id = b.id&quot;,&quot;LEFT&quot;)
            -&gt;where(&quot;a.id&quot;,&quot;&gt;&quot;,&quot;5&quot;)
            -&gt;select();

        echo Db::view(&quot;tp a&quot;,&quot;id,nickname&quot;)
            -&gt;view(&quot;tp1 b&quot;,&quot;id,email,nickname&quot;,&quot;a.id = b.id&quot;,&quot;LEFT&quot;)
            -&gt;where(&quot;a.id&quot;,&quot;&gt;&quot;,&quot;5&quot;)
            -&gt;fetchSql()
            -&gt;select();

        dump($back);
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561382496575.jpg" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼šå¦‚æœä½¿ç”¨æ•°ç»„å½¢å¼è®¾ç½®åˆ«åï¼Œå¦‚æœè¡¨åæœ‰å‰ç¼€ï¼Œéœ€è¦å†™å‰ç¼€<br>
å¦‚ think_ ä¸ºè¡¨å‰ç¼€ï¼Œéœ€å†™æˆ ['think_tp' =&gt; 'a'] ä¸ç„¶æŠ¥é”™</p>
</blockquote>
<h3 id="å­æŸ¥è¯¢">å­æŸ¥è¯¢</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037569">TP6 å­æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£</a></p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //å…¶å®å­æŸ¥è¯¢ï¼Œå°±æ˜¯åˆ©ç”¨TP æ„é€ å™¨è¿”å› sql è¯­å¥ è€Œä¸æ‰§è¡Œ
        echo &quot;fetchSql() å¯ä»¥ç”¨åœ¨ä»»ä½•sqlæ„é€ ä¸­ï¼Œä¸ä»…é™äº select() &quot;;
        dump(
            Db::name(&quot;tp&quot;)
                -&gt;where(&quot;id&quot;,&quot;&gt;&quot;,&quot;5&quot;)
                -&gt;fetchSql()
                -&gt;select()
        );

        echo &quot;buildSql() ä¸€èˆ¬çº¯ç”¨äºæ„é€ sql è¿”å›ï¼Œåç»­ä¸èƒ½è·Ÿéš select() update() ä¹‹ç±»&lt;br&gt;
                å¹¶ä¸”å¯ä»¥è¿”å›åˆ°å˜é‡ä¸­ï¼Œä½œä¸ºå¤ç”¨ï¼Œæ­¤æ–¹æ³•ä¼šæŠŠ sql è¯­å¥ç”¨ï¼ˆï¼‰åŒ…è£¹èµ·æ¥&quot;;
        dump(
            Db::name(&quot;tp&quot;)
                -&gt;where(&quot;id&quot;,&quot;&gt;&quot;,&quot;5&quot;)
                -&gt;buildSql()
        );

        echo &quot;åˆ©ç”¨é—­åŒ…ç‰¹æ€§ï¼Œä¼šåœ¨sql æ„é€ ä¸­ï¼ŒæŠŠé—­åŒ…å†…å®¹ç”¨ ï¼ˆï¼‰åŒ…è£¹çš„ç‰¹æ€§&quot;;
        dump(
            Db::name(&quot;tp&quot;)
                -&gt;where(&quot;id&quot;,&quot;in&quot;,function ($query){
                    $query-&gt;name(&quot;tp1&quot;)
                    -&gt;where(&quot;id&quot;,&quot;&gt;&quot;,5)
                    -&gt;field(&quot;id&quot;);
                })
                -&gt;fetchSql()
                -&gt;select()
        );
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561384804354.jpg" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ•°æ®åº“è¿æ¥ä¸æ“ä½œ]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-5</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-5">
        </link>
        <updated>2019-06-21T07:23:14.000Z</updated>
        <summary type="html"><![CDATA[<p>æ•°æ®åº“é“¾æ¥é…ç½®<br>
æ•°æ®åº“æ“ä½œ</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ•°æ®åº“é“¾æ¥é…ç½®<br>
æ•°æ®åº“æ“ä½œ</p>
<!-- more -->
<h3 id="è¿æ¥æ•°æ®åº“">è¿æ¥æ•°æ®åº“</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037531">TP6 è¿æ¥æ•°æ®åº“å®˜æ–¹æ–‡æ¡£</a><br>
1.å•é“¾æ¥é…ç½®<br>
ä¿®æ”¹ app\database.php æ–‡ä»¶  ç”±äºé…ç½®é¡¹å¤ªå¤šï¼Œä»…æ‹¿å®˜æ–¹ä¾‹å­å±•ç¤º<br>
é…ç½®ä¸Šæ¯ä¸€é¡¹éƒ½æœ‰æ³¨é‡Šè¯´æ˜ï¼Œéœ€è¦æ³¨æ„çš„å°±æ˜¯æ–‡ä»¶è·¯å¾„è€Œå·²ğŸ¤£ğŸ¤£</p>
<pre><code>return [
    'default'    =&gt;    'mysql',
    'connections'    =&gt;    [
        'mysql'    =&gt;    [
            // æ•°æ®åº“ç±»å‹
            'type'        =&gt; 'mysql',
            // æœåŠ¡å™¨åœ°å€
            'hostname'    =&gt; '127.0.0.1',
            // æ•°æ®åº“å
            'database'    =&gt; 'thinkphp',
            // æ•°æ®åº“ç”¨æˆ·å
            'username'    =&gt; 'root',
            // æ•°æ®åº“å¯†ç 
            'password'    =&gt; '',
            // æ•°æ®åº“è¿æ¥ç«¯å£
            'hostport'    =&gt; '',
            // æ•°æ®åº“è¿æ¥å‚æ•°
            'params'      =&gt; [],
            // æ•°æ®åº“ç¼–ç é»˜è®¤é‡‡ç”¨utf8
            'charset'     =&gt; 'utf8',
            // æ•°æ®åº“è¡¨å‰ç¼€
            'prefix'      =&gt; 'think_',
        ],
    ],
];
</code></pre>
<p>2.å¤šè¿æ¥é…ç½®<br>
ç¯‡å¹…å¤ªé•¿å°±ç›´æ¥æˆªå›¾è¯´æ˜<br>
<img src="https://UserNameZjw.github.io/post-images/1561107241843.png" alt=""><br>
å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒTP6 å¼•å…¥äº† env ç¯å¢ƒå˜é‡æœºåˆ¶ï¼Œå¹¶ä¸”ç¯å¢ƒå˜é‡æœºåˆ¶ä¼˜å…ˆäº database.php é…ç½®<br>
å…³äº evn ï¼Œæˆ‘åœ¨ä¹‹å‰çš„ <a href="https://usernamezjw.github.io/post/thinkphp-6-2/">éƒ¨åˆ†é…ç½®ä¸æ§åˆ¶å™¨</a> ä¸­æœ‰è¯´æ˜ï¼Œæ‰¾åˆ°å¼€å¯å¼€å‘è°ƒè¯•æ¨¡å¼ï¼Œå°±èƒ½çœ‹åˆ°ã€‚<br>
.env ä»£ç  â†“</p>
<pre><code>APP_DEBUG = true

[APP]
DEFAULT_TIMEZONE = Asia/Shanghai

[DATABASE]
TYPE = mysql
HOSTNAME = 127.0.0.1
DATABASE = tp6
USERNAME = root
PASSWORD =
HOSTPORT = 3306
CHARSET = utf8
DEBUG = true

[LANG]
default_lang = zh-cn
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š.env æ–‡ä»¶é‡Œçš„è®¾ç½®ï¼Œä¸ database.php çš„æ–‡ä»¶å‘¼åº”å…³ç³»å¦‚ä¸‹<br>
å¦‚æœæ˜¯å¤šè¿æ¥é…ç½®<br>
è¯·ä¿æŒä¸¤ä¸ªæ–‡ä»¶å†…ç›¸å‘¼åº”ä¸€è‡´<br>
å³ï¼Œ.env æœ‰å‡ ä¸ªé…ç½®ï¼Œdatabase.php å°±æœ‰å‡ ä¸ªé…ç½®<br>
.env é…ç½® åŒç†äº database.php ï¼Œåªéœ€è¦å¤åˆ¶ç›¸åŒéƒ¨åˆ†ï¼Œç„¶ååœ¨ database.php ä¿®æ”¹æ ‡è¯†éƒ¨åˆ†å³å¯<br>
<img src="https://UserNameZjw.github.io/post-images/1561122830109.png" alt=""></p>
</blockquote>
<p>database.phpæ–‡ä»¶ <img src="https://UserNameZjw.github.io/post-images/1561122441280.png" alt=""><br>
.env æ–‡ä»¶ <img src="https://UserNameZjw.github.io/post-images/1561122448342.png" alt=""></p>
<p>åœ¨æ•°æ®æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡ connect() æ–¹æ³•æŒ‡å®šéœ€è¦ä½¿ç”¨çš„æ•°æ®åº“è¿æ¥é…ç½®</p>
<h3 id="æ•°æ®åº“æ“ä½œ">æ•°æ®åº“æ“ä½œ</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037620">TP6 SQLè°ƒè¯•å®˜æ–¹æ–‡æ¡£</a><br>
å¦ï¼Œå¯ä»¥æŸ¥è¯¢ app/vendor/topthink/framework/src/think/db/BaseQuery.php æ–‡ä»¶ï¼Œå¼€å¯æ–°ä¸–ç•Œ</p>
<p>1.å¢<br>
save() å•æ¡æ–°å¢ï¼ŒæˆåŠŸè¿”å›æ–°å¢æ¡æ•°<br>
insert()  å•æ¡æ–°å¢ï¼ŒæˆåŠŸè¿”å›æ–°å¢æ¡æ•°<br>
insertAll()  å¤šæ¡æ–°å¢ï¼ŒæˆåŠŸè¿”å›æ–°å¢æ¡æ•°<br>
insertGetId()  å•æ¡æ–°å¢ï¼ŒæˆåŠŸè¿”å›æ–°å¢æ•°æ®è‡ªå¢ID<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037534">TP6 æ·»åŠ æ•°æ®å®˜æ–¹æ–‡æ¡£</a></p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
//        å•æ¡æ•°æ®æ’å…¥ï¼Œsave() insert() ä¸¤ç§æ–¹æ³•ç­‰åŒæ•ˆæœã€‚
//        ä½¿ç”¨ save() æ–°å¢æ•°æ®
//        $data = ['nickname' =&gt; 'save','email' =&gt; '123@snail.com'];
//        $ins = Db::name('tp')-&gt;save($data);

//        ä½¿ç”¨insert()æ–°å¢æ•°æ®
//        $data = ['nickname' =&gt; 'insert','email' =&gt; '123@snail.com'];
//        $ins = Db::name('tp')-&gt;insert($data);
//
//        å¤šæ¡æ•°æ®æ’å…¥ insertAll()
//        æ•°æ®ç»„åˆä¸ºäºŒç»´æ•°ç»„
//        $data =
//            [
//                ['nickname' =&gt; 'insertAll1','email' =&gt; '123@snail.com'],
//                ['nickname' =&gt; 'insertAll2','email' =&gt; '123@snail.com']
//            ];
        //å•æ¡æ•°æ®æ’å…¥ï¼Œä½†æ˜¯è¿”å›æ’å…¥æ•°æ®è‡ªå¢IDã€‚
        $data = ['nickname' =&gt; 'insertGetId','email' =&gt; '123@snail.com'];
        $ins = Db::name('tp')-&gt;insertGetId($data);

        if($ins){
           return &quot;æ’å…¥æˆåŠŸ&quot;;
        }else{
            return &quot;æ’å…¥å¤±è´¥&quot;;
        }
    }
}
</code></pre>
<p>ç»“æœå›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561125241203.png" alt=""></p>
<p>2.æŸ¥<br>
find()  å•æ¡æŸ¥è¯¢ï¼ŒæˆåŠŸè¿”å›ä¸€ç»´æ•°ç»„<br>
select() å¤šæ¡æŸ¥è¯¢ï¼ŒæˆåŠŸè¿”å›äºŒç»´æ•°ç»„<br>
value()  æŸ¥è¯¢æŸä¸ªå­—æ®µçš„å€¼ï¼ŒæˆåŠŸè¿”å›å­—ç¬¦ä¸²<br>
column()  æŸ¥è¯¢æŸä¸€åˆ—çš„å€¼ï¼ŒæˆåŠŸè¿”å›äºŒç»´æ•°ç»„<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037533">TP6 æŸ¥è¯¢æ•°æ®å®˜æ–¹æ–‡æ¡£</a></p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
//        æŸ¥è¯¢IDä¸º5çš„å•æ¡æ•°æ®ï¼Œè¿”å›ä¸€ç»´æ•°ç»„
//        $data = Db::name(&quot;tp&quot;)-&gt;find(&quot;5&quot;);

//        æŸ¥è¯¢æ•°æ®åº“å†…æ‰€æœ‰æ•°æ®ï¼Œè¿”å›äºŒç»´æ•°ç»„
//        $data = Db::name(&quot;tp&quot;)-&gt;select();

//        æŸ¥è¯¢å•æ¡æŸä¸ªå­—æ®µçš„å€¼ï¼Œè¿”å›å­—ç¬¦ä¸²
//        $data = Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;5&quot;)-&gt;value(&quot;nickname&quot;);

//        æŸ¥è¯¢å¤šæ¡æ•°æ®ï¼Œè¿”å›äºŒç»´æ•°ç»„
        $data = Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;&gt;&quot;,&quot;5&quot;)-&gt;column(&quot;*&quot;,&quot;id&quot;);
        dump($data);
    }
}
</code></pre>
<p>3.æ”¹<br>
save()  å•æ¡ä¿®æ”¹ï¼ŒæˆåŠŸè¿”å›æ¡æ•°<br>
update()  å•/å¤šæ¡ä¿®æ”¹ï¼ŒæˆåŠŸè¿”å›æ¡æ•°<br>
inc() è‡ªå¢<br>
dec()  è‡ªå‡<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037535">TP6 æ›´æ–°æ•°æ®å®˜æ–¹æ–‡æ¡£</a></p>
<ol>
<li>save() ä½¿ç”¨è¯¦è§£</li>
</ol>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //é…ç½®save() ä¿®æ”¹æ•°æ®ï¼Œéœ€è¦æŒ‡å®šåŒ…å«ä¸»é”® id æ‰ä¼šä¿®æ”¹æ•°æ®ï¼Œå¦åˆ™å°†ä¼šæ–°å¢æ•°æ®
        $data = [&quot;id&quot;=&gt;&quot;7&quot;,&quot;nickname&quot; =&gt; &quot;saveUp&quot;];

        //æ‰“å°ä¿®æ”¹å‰æ•°æ®
        echo &quot;ä¿®æ”¹å‰&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(&quot;7&quot;));
        
        //ä¿®æ”¹æ•°æ®
        Db::name(&quot;tp&quot;)-&gt;save($data);

        //æ‰“å°ä¿®æ”¹åæ•°æ®
        echo &quot;ä¿®æ”¹å&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(&quot;7&quot;));
    }
}
</code></pre>
<p>å›¾â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561128218256.png" alt=""><br>
2. update() è¯¦è§£</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        //ç»„åˆæ•°æ®å½¢å¼ï¼Œåˆ†åˆ«æ˜¯update()ä½¿ç”¨ï¼Œä»¥åŠdata()ä½¿ç”¨
        $updateUp = [&quot;nickname&quot; =&gt; 'updateUp'];
        $dataUp = [&quot;nickname&quot; =&gt; 'dataUp'];

        //æ‰“å°ä¿®æ”¹å‰æ•°æ®
        echo &quot;æ‰“å°ä¿®æ”¹å‰æ•°æ®&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(7));

        //ä½¿ç”¨data()ä¼ å€¼æ–¹å¼ä¿®æ”¹
        Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;7&quot;)-&gt;data($dataUp)-&gt;update();

        //æ‰“å°data()ä¼ å€¼ä¿®æ”¹åæ•°æ®
        echo &quot;æ‰“å°data()ä¼ å€¼ä¿®æ”¹åæ•°æ®&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(7));

        //åŒæ—¶ä½¿ç”¨data() å’Œ update()ä¼ å€¼æ–¹å¼ï¼Œupdate() æ³•ä¼˜å…ˆçº§äº data() ä¼ å€¼
        Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;7&quot;)-&gt;data($dataUp)-&gt;update($updateUp);

        //æ‰“å°update()ä¼ å€¼ä¿®æ”¹åæ•°æ®
        echo &quot;æ‰“å°update()ä¼ å€¼ä¿®æ”¹åæ•°æ®,å¦‚æœupdate()ä¸ä¼˜å…ˆçº§ï¼Œæ•°æ®åº”è¯¥æ— å˜åŒ–&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(7));
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561129037853.png" alt=""></p>
<ol start="3">
<li>inc() dec() è¯¦è§£</li>
</ol>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        echo &quot;å°†idä¸º1çš„emailè‡ªå¢ä¸€æ¬¡ +2&lt;br&gt;&quot;;
        echo &quot;è‡ªå¢å‰&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(1));
        Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;1&quot;)-&gt;inc(&quot;email&quot;,2)-&gt;update();
        echo &quot;è‡ªå¢å&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(1));


        echo &quot;å°†idä¸º1çš„emailè‡ªå‡ä¸€æ¬¡ -1&lt;br&gt;&quot;;
        Db::name(&quot;tp&quot;)-&gt;where(&quot;id&quot;,&quot;1&quot;)-&gt;dec(&quot;email&quot;,1)-&gt;update();
        echo &quot;è‡ªå‡å&quot;;
        dump(Db::name(&quot;tp&quot;)-&gt;find(1));
        
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561184573189.png" alt=""></p>
<p>4.åˆ <br>
delete()  å½±å“æ•°æ®çš„æ¡æ•°ï¼Œæ²¡æœ‰åˆ é™¤è¿”å› 0<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037536">TP6 åˆ é™¤æ•°æ®å®˜æ–¹æ–‡æ¡£</a></p>
<blockquote>
<p>æ³¨æ„ï¼šæ…ç”¨ã€‚ä¸å­˜åœ¨åˆ åº“è·‘è·¯è¯´æ³•<br>
ä»£ç å°±å…äº†ğŸ¤£ğŸ¤£ğŸ¤£<br>
ä¸€åˆ‡æ•°æ®å‡æœ‰å…¶å­˜åœ¨çš„ä»·å€¼</p>
</blockquote>
<p>5.è°ƒè¯•<br>
fetchSql() ç›´æ¥è¿”å›å½“å‰æŸ¥è¯¢æ„é€ å™¨ç»„åˆè¯­å¥ï¼Œéœ€ä¸select() é…åˆä½¿ç”¨<br>
buildSql()  æŠŠå½“å‰æŸ¥è¯¢æ„é€ å™¨ç»„åˆè¯­å¥ä½œä¸ºå­æŸ¥è¯¢è¿”å›ï¼Œä¸¤è¾¹å¸¦æœ‰ <strong>(</strong> æŸ¥è¯¢è¯­å¥ <strong>)</strong> ï¼Œä¸éœ€è¦é…åˆselect()<br>
è¿™ä¸¤ç§æ–¹æ³•ï¼Œå‡ä¸ä¼šæ‰§è¡ŒSQLè¯­å¥</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use think\facade\Db;

class Index extends BaseController
{
    public function index()
    {
        $where = [
            [&quot;nickname&quot;,&quot;=&quot;,&quot;Snail&quot;],
            [&quot;nickname&quot;,&quot;=&quot;,&quot;Cry&quot;]
        ];
        dump(Db::name(&quot;tp&quot;)-&gt;whereOr($where)-&gt;buildSql());
        dump(Db::name(&quot;tp&quot;)-&gt;whereOr($where)-&gt;fetchSql()-&gt;select());
    }
}
</code></pre>
<p>å›¾ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561254467131.png" alt=""></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ–‡ä»¶ä¸‹è½½ç±»ä¸å¯¹è±¡æ³¨å…¥]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-4</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-4">
        </link>
        <updated>2019-06-20T06:26:14.000Z</updated>
        <summary type="html"><![CDATA[<p>æ–‡ä»¶ä¸‹è½½<br>
å¯¹è±¡æ³¨å…¥</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ–‡ä»¶ä¸‹è½½<br>
å¯¹è±¡æ³¨å…¥</p>
<!-- more -->
<h3 id="tp-æ–‡ä»¶ä¸‹è½½">TP æ–‡ä»¶ä¸‹è½½</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037529">TP6 å®˜æ–¹æ–‡ä»¶ä¸‹è½½æ–‡æ¡£</a></p>
<p>1.ä¸‹è½½æœåŠ¡å™¨å­˜åœ¨æ–‡ä»¶</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\response\File;

class Down
{
    public function index(){
        return &quot;è¿™æ˜¯ä¸‹è½½å‰ç½®é¡µé¢ï¼Œä¸‹è½½æ–¹æ³•æ˜¯ down ï¼Œä¸ºäº†æœ‰é¡µé¢å±•ç¤º æ‰€æœ‰å°±æœ‰äº†è¿™ä¸ªæ–¹æ³•ã€‚&lt;br&gt;
                &lt;img src='../../static/image/acg.gy_50.jpg' width='500px'&gt;&lt;hr&gt;
                &lt;a href='dome'&gt;ç‚¹å‡»ä¸‹è½½å£çº¸&lt;/a&gt;&lt;br&gt;&quot;;
    }

    public function dome(){
        //TP çš„ä¸‹è½½æ–¹æ³•å¿…é¡» å­˜åœ¨å®ä½“æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰å°†ä¼šæŠ¥é”™ã€‚
        $file = new File('../public/static/image/acg.gy_50.jpg');
        //è®¾ç½®ä¸‹è½½æ–‡ä»¶åï¼Œè‡ªåŠ¨è¯†åˆ«åç¼€ï¼Œæ— éœ€è®¾ç½®ã€‚
        //return $file-&gt;name(&quot;å£çº¸&quot;);
        // ä½¿ç”¨åŠ©æ‰‹å‡½æ•°å’Œä¸Šé¢çš„ä¸‹è½½æ–‡ä»¶åæ˜¯ä¸€æ ·çš„æ•ˆæœ
        //return download('../public/static/image/acg.gy_50.jpg', 'å£çº¸');
        // è®¾ç½®300ç§’æœ‰æ•ˆæœŸ
        return download('../public/static/image/acg.gy_50.jpg', 'å£çº¸')-&gt;expire(300);
    }
}
</code></pre>
<p>ä¸‹è½½å‰ç½®é¡µé¢<br>
<img src="https://UserNameZjw.github.io/post-images/1561014219005.png" alt=""><br>
ç‚¹å‡»ä¸‹è½½å<br>
<img src="https://UserNameZjw.github.io/post-images/1561014321900.png" alt=""></p>
<p>2.ä¸‹è½½ä¸å­˜åœ¨çš„æ–‡æœ¬<br>
éœ€è¦ç”³æ˜ä¸€ä¸‹ isContent(true)</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\response\File;

class Down
{
    public function index(){
        return &quot;è¿™æ˜¯ä¸‹è½½å‰ç½®é¡µé¢ï¼Œä¸‹è½½æ–¹æ³•æ˜¯ down ï¼Œä¸ºäº†æœ‰é¡µé¢å±•ç¤º æ‰€æœ‰å°±æœ‰äº†è¿™ä¸ªæ–¹æ³•ã€‚&lt;br&gt;
                &lt;img src='../../static/image/acg.gy_50.jpg' width='500px'&gt;&lt;hr&gt;
                &lt;a href='dome'&gt;ç‚¹å‡»ä¸‹è½½å£çº¸&lt;/a&gt;&lt;br&gt;&quot;;
    }

    public function dome(){
        //å¦‚æœä½ ä»…ä»…æ˜¯æƒ³ä¸‹è½½ä¸€äº›å†™å…¥å†…å®¹çš„æ–‡æ¡£ï¼Œéœ€è¦å‘Šè¯‰TP è¿™æ˜¯å¯ä¸‹è½½æ–‡ä»¶ã€‚
        $file = new File('è¿™æ˜¯å†…å®¹ï¼Œå¦‚æœæƒ³ä¸‹è½½æˆ‘ï¼Œéœ€è¦ç”¨åˆ° isContent(true) ');
        return $file-&gt;name(&quot;æµ‹è¯•æ–‡æ¡£.txt&quot;)-&gt;isContent(true);
    }
}
</code></pre>
<p>ä¸‹è½½ç»“æœ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561015047885.png" alt=""></p>
<h3 id="è¯·æ±‚å¯¹è±¡çš„æ³¨å…¥ä¸è°ƒç”¨">è¯·æ±‚å¯¹è±¡çš„æ³¨å…¥ä¸è°ƒç”¨</h3>
<p>1.æ„é€ æ–¹æ³•æ³¨å…¥<br>
æ˜¯æŒ‡æ²¡æœ‰ç»§æ‰¿ BaseController åŸºç±»æƒ…å†µä¸‹ä½¿ç”¨<br>
å¦‚æœç»§æ‰¿äº† BaseController åŸºç±»ï¼Œç›´æ¥ä½¿ç”¨åŒæ ·çš„è°ƒç”¨æ–¹æ³•å³å¯ï¼Œä¸ç”¨å†æ³¨å…¥</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\Request;

class Down
{
    protected $request;

    public function __construct(Request $request)
    {
        $this-&gt;request = $request;
    }

    public function index(){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump($this-&gt;request-&gt;get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump($this-&gt;request-&gt;post(['name'=&gt;'Cry']));

    }
}
</code></pre>
<p>2.æ“ä½œæ–¹æ³•æ³¨å…¥<br>
ä¸ç®¡æœ‰æ²¡æœ‰ç»§æ‰¿ BaseController åŸºç±»ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ­¤æ–¹å¼</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\Request;

class Down
{

    public function index(Request $request){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump($request-&gt;get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump($request-&gt;post(['name'=&gt;'Cry']));

    }
}
</code></pre>
<p>3.é™æ€è°ƒç”¨<br>
é™æ€è°ƒç”¨æ˜¯åˆ©ç”¨TP6 çš„ facade æœºåˆ¶æ¥é™æ€è¯·æ±‚çš„ï¼Œuse çš„æ—¶å€™éœ€è¦æ³¨æ„è·¯å¾„<br>
éœ€è¦<strong>æ‰‹åŠ¨</strong> use  think\facade\Request;<br>
ä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„ï¼Ÿå› ä¸ºç°é˜¶æ®µçš„ ã€Œç¼–è¾‘è½¯ä»¶ã€ ä¸ä¼šè‡ªåŠ¨è¡¥å…¨facade çš„ use è·¯å¾„  ğŸ‘»ğŸ‘»ğŸ‘»</p>
<pre><code>&lt;?php
namespace app\index\controller;

use \think\facade\Request;

class Down
{
    public function index(){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump(Request::get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump(Request::post(['name'=&gt;'Cry']));
    }
}
</code></pre>
<p>4.åŠ©æ‰‹å‡½æ•°<br>
TP6 ä¸€ç›´ä¸ºç”¨æˆ·å°è£…äº†å¾ˆå¤šåŠ©æ‰‹å‡½æ•°ï¼ŒåŸºæœ¬æ¶µç›–äº†å¸¸ç”¨çš„æ‰€æœ‰éœ€æ±‚<br>
ä¹Ÿå°±æ˜¯è¯´ï¼ŒTP6ä¸è¾è¾›è‹¦çš„æŠŠæ¯ä¸€ä¸ªäººçš„å†™æ³•ï¼Œéƒ½å°½é‡å…¼å®¹ğŸ˜‚ğŸ˜‚<br>
æ— éœ€æ³¨å…¥ï¼Œæ— éœ€ç»§æ‰¿ BaseController ï¼Œä»»ä½•é¢å¤–æ“ä½œéƒ½ä¸éœ€è¦ğŸ˜‚ğŸ˜‚<br>
<strong>ä½†æ˜¯å®˜æ–¹å°±æ˜¯ä¸ä¼˜å…ˆæ¨è</strong> ğŸ˜‚ğŸ˜‚ğŸ˜‚<br>
å…¶å®é‡Œé¢æœ‰çš„ä¹Ÿæ˜¯ facade</p>
<pre><code>&lt;?php
namespace app\index\controller;

class Down
{
    public function index(){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump(request()-&gt;get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump(request()-&gt;post(['name'=&gt;'Cry']));
    }
}
</code></pre>
<h3 id="ä¼ªé™æ€">ä¼ªé™æ€</h3>
<p>é»˜è®¤æ”¯æŒ .html ä½œä¸ºåç¼€</p>
<blockquote>
<p>ä¿®æ”¹æ–¹å¼ï¼šapp\config\route.php æ–‡ä»¶ä¸‹ 'url_html_suffix'       =&gt; 'html' ï¼Œå¦‚æœæƒ³å…³é—­ï¼Œæ”¹ä¸º false ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤ä»»ä½•åç¼€éƒ½å¯è®¿é—®ã€‚<br>
å¦‚æœæƒ³æ”¯æŒå¤šåç¼€ 'url_html_suffix'       =&gt; 'html|xml'</p>
</blockquote>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ã€ŒThinkPHP 6.0ã€æ§åˆ¶å™¨éªŒè¯ä¸å“åº”]]></title>
        <id>https://UserNameZjw.github.io/post/thinkphp-6-3</id>
        <link href="https://UserNameZjw.github.io/post/thinkphp-6-3">
        </link>
        <updated>2019-06-16T09:50:37.000Z</updated>
        <summary type="html"><![CDATA[<p>æ§åˆ¶å™¨éªŒè¯<br>
å“åº”</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ§åˆ¶å™¨éªŒè¯<br>
å“åº”</p>
<!-- more -->
<h3 id="controller-åŸºç±»ç»§æ‰¿å¼•ç”¨">Controller åŸºç±»ç»§æ‰¿å¼•ç”¨</h3>
<p>é€šè¿‡ç»§æ‰¿ BaseController åŸºç±»ï¼Œæ³¨å…¥ app ä»¥åŠ request<br>
æœ¬æ–‡ä»…ä¸¾ä¸¤ä¸ªæµ…æ˜¾çš„è°ƒç”¨ä¾‹å­<br>
1.è·å–å½“å‰æ“ä½œå  $action = $this-&gt;request-&gt;action();<br>
2.è·å–å½“å‰åº”ç”¨åŸºç¡€ç›®å½•  $path = $this-&gt;app-&gt;getBasePath();<br>
<img src="https://UserNameZjw.github.io/post-images/1560679805511.png" alt=""><br>
ç®€æ˜“ä»£ç  â†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;

class Index extends BaseController
{
    public function index()
    {
        //è·å–å½“å‰æ“ä½œå
        echo $action = $this-&gt;request-&gt;action();
        echo '&lt;br&gt;è·å–å½“å‰æ“ä½œåä»£ç  ï¼š$action = $this-&gt;request-&gt;action();&lt;br&gt; ';
        // è·å–å½“å‰åº”ç”¨åŸºç¡€ç›®å½•
        echo $path = $this-&gt;app-&gt;getBasePath();
        echo '&lt;br&gt;è·å–å½“å‰åº”ç”¨åŸºç¡€ç›®å½• ï¼š$path = $this-&gt;app-&gt;getBasePath();&lt;br&gt; ';
        echo &quot;ä»¥ä¸Šä¸¤ä¸ªè°ƒç”¨ request app å‡é€šè¿‡åŸºç±» BaseController.php æ³¨å…¥&lt;br&gt;&quot;;
        echo &quot;åªéœ€ç»§æ‰¿ BaseController ç±»å³å¯è°ƒç”¨&quot;;
    }
}
</code></pre>
<p>æ³¨æ„ï¼š<br>
å¦‚æœä½ æ˜¯å¤šåº”ç”¨æ¨¡å¼ï¼Œå¯ä»¥åœ¨ åº”ç”¨ç›®å½•ä¸‹åŒæ ·åˆ›å»ºä¸€ä¸ª BaseController.php åŸºç±»æ–‡ä»¶<br>
ThinkPHP 6 åœ¨å¯»å€çš„æ—¶å€™ï¼Œä¼˜å…ˆå°±è¿‘åŸåˆ™ã€‚</p>
<h3 id="æ§åˆ¶å™¨éªŒè¯">æ§åˆ¶å™¨éªŒè¯</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037629">TP6 å®˜æ–¹å†…ç½®è§„åˆ™</a><br>
1.é€šè¿‡å¼•ç”¨ validate å‡½æ•°ç›´æ¥åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨<br>
Validate(è§„åˆ™,è¿”å›æç¤º)-&gt;check(æ•°æ®)<br>
è¿™ä¸ªç®€å•ï¼Œå°±ä¸åšè¿‡å¤šä»‹ç»</p>
<pre><code>&lt;?php
namespace app\index\controller;

class Validate
{ 
    public function index ()
    {
        //å®šä¹‰éªŒè¯è§„åˆ™
        $rule = [
            'name' =&gt; &quot;require|max:10&quot;,
            'email' =&gt; &quot;email&quot;
        ];

        // å®šä¹‰é”™è¯¯è¿”å›ä¿¡æ¯

        $message = [
            &quot;name&quot; =&gt; [&quot;require&quot; =&gt; 'åç§°ä¸èƒ½ä¸ºç©º','max' =&gt; 'åç§°æœ€å¤§é•¿åº¦ä¸º10'],
            'email' =&gt; 'é‚®ç®±æ ¼å¼é”™è¯¯'
        ];

        // å®šä¹‰æ¨¡æ‹Ÿæ•°æ®
        $data = [
            'name' =&gt; 'Cry',
            'email' =&gt; 'snail@qq.com'
        ];

        // éªŒè¯è§„åˆ™
        // Validate(è§„åˆ™,è¿”å›æç¤º)-&gt;check(æ•°æ®)
        $result = Validate($rule,$message)-&gt;check($data);

        if(!$result){
            // è·å–æŠ¥é”™æ•°æ®
            return Validate()-&gt;getError();
        }else{
            return 'éªŒè¯é€šè¿‡';
        }
    }
}
</code></pre>
<p>2.é€šè¿‡å¼•ç”¨ validate å¯¹è±¡ç›´æ¥åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨<br>
ç»§æ‰¿åŸºç±» BaseController ç±»<br>
$this-&gt;validate(æ•°æ®,éªŒè¯è§„åˆ™,è¿”å›æç¤º);</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;

class Validate extends BaseController
{ 
    public function index ()
    {
        //å®šä¹‰éªŒè¯è§„åˆ™
        $rule = [
            'name' =&gt; &quot;require|max:10&quot;,
            'email' =&gt; &quot;email&quot;
        ];

        // å®šä¹‰é”™è¯¯è¿”å›ä¿¡æ¯

        $message = [
            &quot;name&quot; =&gt; [&quot;require&quot; =&gt; 'åç§°ä¸èƒ½ä¸ºç©º','max' =&gt; 'åç§°æœ€å¤§é•¿åº¦ä¸º10'],
            'email' =&gt; 'é‚®ç®±æ ¼å¼é”™è¯¯'
        ];

        // å®šä¹‰æ¨¡æ‹Ÿæ•°æ®
        $data = [
            'name' =&gt; 'Cry',
            'email' =&gt; 'snail@qq.com'
        ];

        // éªŒè¯è§„åˆ™
        $result = $this-&gt;validate($data,$rule,$message);

        if(!$result){
            // è·å–æŠ¥é”™æ•°æ®
            return Validate()-&gt;getError();
        }else{
            return 'éªŒè¯é€šè¿‡';
        }
    }
}
</code></pre>
<p>3.è‡ªå®šä¹‰éªŒè¯è§„åˆ™<br>
éªŒè¯ä¸‹å›¾è¦æ±‚(å‡ä½¿ç”¨ ThinkPHP6 å†…ç½®è§„åˆ™)<br>
<img src="https://UserNameZjw.github.io/post-images/1560694503550.png" alt=""><br>
1.éœ€è¦é¢å¤–åˆ›å»ºä¸€ä¸ªéªŒè¯æ–‡ä»¶</p>
<blockquote>
<p>åœ¨ app ç›®å½•ä¸‹åˆ›å»º validate æ–‡ä»¶å¤¹ï¼Œç„¶ååˆ›å»º User.php æ–‡ä»¶ä½œä¸ºè‡ªå®šä¹‰è§„åˆ™æ–‡ä»¶ã€‚</p>
</blockquote>
<p>ç›®å½•ï¼šapp\validate\User .php ä»£ç å¦‚ä¸‹ â†“<br>
æ³¨æ„ä»£ç æ ¼å¼ï¼Œä¸éœ€è¦åˆ›å»ºæ–¹æ³•ï¼Œç›´æ¥å†™éªŒè¯è§„åˆ™å’ŒéªŒè¯è¿”å›å³å¯<br>
ç”¨ protected å£°æ˜<br>
rule éªŒè¯å˜é‡ï¼Œmessage è¿”å›å˜é‡</p>
<pre><code>&lt;?php
namespace app\validate;

use think\Validate;

class User extends Validate
{
    protected $rule = [
        'user_name' =&gt; 'require|chsAlphaNum|length:6,10',
        'password' =&gt; 'require|alphaNum|length:6,10',
        'email' =&gt; 'email',
        'mobile' =&gt; 'require|mobile|number|length:11'
    ];

    protected $message = [
        'user_name' =&gt; ['require' =&gt; 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º','chsAlphaNum' =&gt; 'ç”¨æˆ·åå¿…é¡»ä¸ºå­—æ¯å’Œæ•°å­—æˆ–æ±‰å­—','length' =&gt; 'ç”¨æˆ·åé•¿åº¦åº”åœ¨6è‡³10ä½'],
        'password' =&gt; ['require' =&gt; 'å¯†ç ä¸èƒ½ä¸ºç©º','alphaNum' =&gt; 'å¯†ç å¿…é¡»ä¸ºæ•°å­—å’Œå­—æ¯ç»„åˆ','length' =&gt; 'å¯†ç é•¿åº¦åº”åœ¨6è‡³10ä½'],
        'email' =&gt; ['email' =&gt; 'é‚®ç®±æ ¼å¼æœ‰è¯¯'],
        'mobile' =&gt; ['require' =&gt; 'æ‰‹æœºä¸èƒ½ä¸ºç©º','number' =&gt; 'æ‰‹æœºå·å¿…é¡»ä¸ºæ•°å­—','length' =&gt; 'æ‰‹æœºå·é•¿åº¦å¿…é¡»11ä½','mobile' =&gt; 'ä¸æ˜¯å¯ç”¨æ‰‹æœºå·']
    ];
}
</code></pre>
<p>2.åœ¨ app\index\controller\Index.php ä¸‹è°ƒç”¨<br>
å¼•å…¥ User.php ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ â†“</p>
<pre><code>&lt;?php
namespace app\index\controller;

use app\BaseController;
use app\validate\User;

class Index extends BaseController
{
    public function index()
    {
        $data = [
            'user_name' =&gt; 'Cry666è¶…å¸…çš„',
            'password' =&gt; '123456qwe',
            'email' =&gt; 'snail@qq.com',
            'mobile' =&gt; '13112121211'
        ];

        $result = Validate(User::class)-&gt;check($data);

        if(!$result){
            // è·å–æŠ¥é”™æ•°æ®
            return Validate()-&gt;getError();
        }else{
            return 'éªŒè¯é€šè¿‡';
        }
    }
}
</code></pre>
<h3 id="å“åº”">å“åº”</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037526">TP6 å®˜æ–¹å“åº”è¾“å‡º</a><br>
é™¤äº†è·¯ç”±ï¼Œéœ€è¦æ³¨æ„çš„å¯èƒ½å°±æ˜¯é‡å®šå‘äº†</p>
<p>1.é‡å®šå‘<br>
å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037528">TP6 å®˜æ–¹é‡å®šå‘</a><br>
åªéœ€è¦è°ƒç”¨ redirect(URL) åŠ©æ‰‹å‡½æ•° å³å¯<br>
ä¸Šä¸€ä¸ªå®˜æ–¹ä¾‹å­ä»£ç ï¼Œä¾‹å­å°†ç›´æ¥è·³è½¬åˆ°TP å®˜ç½‘â†“</p>
<pre><code>&lt;?php
namespace app\controller;

class Index
{
    public function hello()
    {
        return redirect('http://www.thinkphp.cn');
    }
}
</code></pre>
<p>ä¸ªäººä¾‹å­<br>
app/index/controller/Index.php ä»£ç â†“</p>
<pre><code>    public function dome($name = 'Cry')
    {
        return &quot;hello ,&quot;. $name .&quot;! è¿™æ˜¯é‡å®šå‘åçš„ dome é¡µé¢&quot;;
    }

    public function name()
    {
//      ç›´æ¥æ— ä¼ å€¼å®šå‘
//      return redirect(&quot;index/index/dome&quot;);
        return redirect(&quot;dome&quot;);
    }
</code></pre>
<p>æ‰“å¼€åé¡µé¢æ˜¾ç¤ºç»“æœ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560930051407.png" alt=""></p>
<p>2.é‡å®šå‘ä¼ å€¼</p>
<pre><code>    public function dome($name = 'Cry')
    {
        return &quot;hello ,&quot;. $name .&quot;! è¿™æ˜¯é‡å®šå‘åçš„ dome é¡µé¢&quot;;
    }

    public function name()
    {
//        ç›´æ¥ä¼ å€¼å®šå‘
//        1.ç›´æ¥åœ¨ä¸Šæ‹¼æ¥
//        return redirect(&quot;index/index/dome?name=Snail&quot;);
//        æˆ–è€…ç”¨ TP åˆ†éš”ç¬¦ / è¿›è¡Œä¼ å€¼
//        return redirect(&quot;index/index/dome/name/Snail&quot;);

//        2.ä½¿ç”¨ params åŠ©æ‰‹å‡½æ•°é…åˆ
//        return redirect('dome')-&gt;params(['name'=&gt;'Snail']);

//        3.ç›´æ¥ä¼ é€’æ•°ç»„ï¼Œæ¨è
        return redirect('dome',['name'=&gt;'Snail']);
    }
</code></pre>
<p>è®¿é—®ç»“æœâ†“<br>
<img src="https://UserNameZjw.github.io/post-images/1560930782212.png" alt=""><br>
æ³¨æ„ï¼šåŒå‘½åç©ºé—´ä¸‹ï¼Œå¯ä»¥çœç•¥è¯¦ç»†è·¯å¾„ï¼</p>
<p>3.é‡å®šå‘åˆ©ç”¨ session é—ªå­˜æ•°æ®<br>
é—ªå­˜ã€å›æºï¼Œéœ€è¦å€ŸåŠ© session å®ç°ï¼ŒTP6é»˜è®¤ä¸å¼€å¯ session<br>
å¼€å¯æ–¹æ³•ï¼šæŠŠ app/middlware.php ä¸‹çš„ session åˆå§‹åŒ–æ³¨é‡Šåˆ é™¤å³å¯ â†“</p>
<pre><code>&lt;?php

return [
    // å…¨å±€è¯·æ±‚ç¼“å­˜
    // 'think\middleware\CheckRequestCache',
    // å¤šè¯­è¨€åŠ è½½
    // 'think\middleware\LoadLangPack',
    // Sessionåˆå§‹åŒ–
     'think\middleware\SessionInit',
    // é¡µé¢Traceè°ƒè¯•
    // 'think\middleware\TraceDebug',
];
</code></pre>
<p>é—ªå­˜æ•°æ®éœ€è¦å€ŸåŠ© with(å˜é‡å,å˜é‡å€¼) æ–¹æ³•ï¼Œå†™å…¥åˆ° session ç¼“å­˜ ä»£ç å¦‚ä¸‹ â†“</p>
<pre><code>    public function dome()
    {
        //åˆ©ç”¨session åŠ©æ‰‹å‡½æ•° è°ƒç”¨
        $name = session('name');
        return &quot;hello ,&quot;. $name .&quot;! è¿™æ˜¯é‡å®šå‘åçš„ dome é¡µé¢&quot;;
    }

    public function name()
    {
        return redirect('dome')-&gt;with(&quot;name&quot;,&quot;Snail&quot;);
    }
</code></pre>
<blockquote>
<p>æ³¨æ„äº‹é¡¹ï¼šé‡å®šå‘ç›®æ ‡é¡µé¢å¦‚æœæ‰‹åŠ¨åˆ·æ–°ï¼Œå°†ä¼šä¸¢å¤±session ä¼ é€’å€¼ã€‚</p>
</blockquote>
<p>å›¾ä¸€ï¼š<img src="https://UserNameZjw.github.io/post-images/1560932232698.png" alt=""><br>
å›¾äºŒï¼š<img src="https://UserNameZjw.github.io/post-images/1560932251677.png" alt=""></p>
<p>é‡å®šå‘å›æºåˆ©ç”¨ remember() æ–¹æ³•è®°ä½é‡å®šå‘æ¥æºé¡µ</p>
<pre><code>//é‡å®šå‘æŒ‡å‘
    public function dome()
    {
        //åˆ©ç”¨session åŠ©æ‰‹å‡½æ•° è°ƒç”¨
        $name = session('name');
        return &quot;hello ,&quot;. $name .'! è¿™æ˜¯é‡å®šå‘åçš„ dome é¡µé¢&lt;br&gt;&lt;a href=&quot;/index/index/back&quot;&gt;ç‚¹å‡»å›åˆ°æ¥æºåœ°å€&lt;/a&gt;';
    }

    //è®¿é—®é“¾æ¥
    public function name()
    {
        // åˆ¤æ–­sessionå®Œæˆæ ‡è®°æ˜¯å¦å­˜åœ¨
        // ä¸»è¦æ˜¯ç”¨äºå›æºå®Œæˆåæ‰§è¡Œ
        if (session('?back')) {
            // åˆ é™¤session
            session('back', null);
            return 'é‡å®šå‘å®Œæˆï¼Œå›åˆ°åŸç‚¹!';
        } else {
            //åˆ©ç”¨ remember æ–¹æ³•è®°ä½å½“å‰åœ°å€ã€‚
            return redirect('dome')-&gt;with(&quot;name&quot;,&quot;Snail&quot;)-&gt;remember();
        }

    }

    //è®¾ç½®æ ‡è®°ä¸­è½¬æ–¹æ³•
    public function back(){
        //è®¾ç½®åˆ¤æ–­å˜é‡ back
        session('back',true);
        //å›åˆ°åŸå€
        return redirect()-&gt;restore();
    }
</code></pre>
<p>å…·ä½“ç»“æœå›¾ â†“<br>
å›¾ä¸€ï¼š<img src="https://UserNameZjw.github.io/post-images/1560933916857.png" alt=""><br>
å›¾äºŒï¼š<img src="https://UserNameZjw.github.io/post-images/1560933935189.png" alt=""><br>
å›¾ä¸‰ï¼š<img src="https://UserNameZjw.github.io/post-images/1560933943252.png" alt=""></p>
<blockquote>
<p>æ³¨æ„ï¼šå›¾ä¸‰æ‰€æè¿°çš„åœºæ™¯ï¼Œåˆ·æ–°é‡å®šå‘ã€Œç›®æ ‡é¡µã€ï¼Œä¼šä¸¢çš„ä¸ä»…ä»…æ•°æ®ï¼Œè¿˜æœ‰å›å®¶çš„è·¯ã€‚</p>
</blockquote>
]]></content>
    </entry>
</feed>