<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>ã€ŒThinkPHP 6.0ã€æ–‡ä»¶ä¸‹è½½ç±»ä¸å¯¹è±¡æ³¨å…¥ | ã€Œè°¨è¨€æ…è¡Œã€</title>
<meta name="description" content="ä¸€ä½å¹´è¿‘ä¸‰åçš„ä¸­å¹´æ²¹è…»è‚¥èƒ–è€ç”·äººçš„ä¸­å¹´å±æœº">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://UserNameZjw.github.io/favicon.ico?v=1561819165521">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://UserNameZjw.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://UserNameZjw.github.io">
        <img src="https://UserNameZjw.github.io/images/avatar.png?v=1561819165521" class="site-logo">
        <h1 class="site-title">ã€Œè°¨è¨€æ…è¡Œã€</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      ä¸€ä½å¹´è¿‘ä¸‰åçš„ä¸­å¹´æ²¹è…»è‚¥èƒ–è€ç”·äººçš„ä¸­å¹´å±æœº
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://UserNameZjw.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">ã€ŒThinkPHP 6.0ã€æ–‡ä»¶ä¸‹è½½ç±»ä¸å¯¹è±¡æ³¨å…¥</h2>
            <div class="post-date">2019-06-20</div>
            
              <div class="feature-container" style="background-image: url('https://UserNameZjw.github.io/post-images/thinkphp-6-4.jpg')">
              </div>
            
            <div class="post-content">
              <p>æ–‡ä»¶ä¸‹è½½<br>
å¯¹è±¡æ³¨å…¥</p>
<!-- more -->
<h3 id="tp-æ–‡ä»¶ä¸‹è½½">TP æ–‡ä»¶ä¸‹è½½</h3>
<p>å‚è€ƒèµ„æ–™ï¼š<a href="https://www.kancloud.cn/manual/thinkphp6_0/1037529">TP6 å®˜æ–¹æ–‡ä»¶ä¸‹è½½æ–‡æ¡£</a></p>
<p>1.ä¸‹è½½æœåŠ¡å™¨å­˜åœ¨æ–‡ä»¶</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\response\File;

class Down
{
    public function index(){
        return &quot;è¿™æ˜¯ä¸‹è½½å‰ç½®é¡µé¢ï¼Œä¸‹è½½æ–¹æ³•æ˜¯ down ï¼Œä¸ºäº†æœ‰é¡µé¢å±•ç¤º æ‰€æœ‰å°±æœ‰äº†è¿™ä¸ªæ–¹æ³•ã€‚&lt;br&gt;
                &lt;img src='../../static/image/acg.gy_50.jpg' width='500px'&gt;&lt;hr&gt;
                &lt;a href='dome'&gt;ç‚¹å‡»ä¸‹è½½å£çº¸&lt;/a&gt;&lt;br&gt;&quot;;
    }

    public function dome(){
        //TP çš„ä¸‹è½½æ–¹æ³•å¿…é¡» å­˜åœ¨å®ä½“æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰å°†ä¼šæŠ¥é”™ã€‚
        $file = new File('../public/static/image/acg.gy_50.jpg');
        //è®¾ç½®ä¸‹è½½æ–‡ä»¶åï¼Œè‡ªåŠ¨è¯†åˆ«åç¼€ï¼Œæ— éœ€è®¾ç½®ã€‚
        //return $file-&gt;name(&quot;å£çº¸&quot;);
        // ä½¿ç”¨åŠ©æ‰‹å‡½æ•°å’Œä¸Šé¢çš„ä¸‹è½½æ–‡ä»¶åæ˜¯ä¸€æ ·çš„æ•ˆæœ
        //return download('../public/static/image/acg.gy_50.jpg', 'å£çº¸');
        // è®¾ç½®300ç§’æœ‰æ•ˆæœŸ
        return download('../public/static/image/acg.gy_50.jpg', 'å£çº¸')-&gt;expire(300);
    }
}
</code></pre>
<p>ä¸‹è½½å‰ç½®é¡µé¢<br>
<img src="https://UserNameZjw.github.io/post-images/1561014219005.png" alt=""><br>
ç‚¹å‡»ä¸‹è½½å<br>
<img src="https://UserNameZjw.github.io/post-images/1561014321900.png" alt=""></p>
<p>2.ä¸‹è½½ä¸å­˜åœ¨çš„æ–‡æœ¬<br>
éœ€è¦ç”³æ˜ä¸€ä¸‹ isContent(true)</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\response\File;

class Down
{
    public function index(){
        return &quot;è¿™æ˜¯ä¸‹è½½å‰ç½®é¡µé¢ï¼Œä¸‹è½½æ–¹æ³•æ˜¯ down ï¼Œä¸ºäº†æœ‰é¡µé¢å±•ç¤º æ‰€æœ‰å°±æœ‰äº†è¿™ä¸ªæ–¹æ³•ã€‚&lt;br&gt;
                &lt;img src='../../static/image/acg.gy_50.jpg' width='500px'&gt;&lt;hr&gt;
                &lt;a href='dome'&gt;ç‚¹å‡»ä¸‹è½½å£çº¸&lt;/a&gt;&lt;br&gt;&quot;;
    }

    public function dome(){
        //å¦‚æœä½ ä»…ä»…æ˜¯æƒ³ä¸‹è½½ä¸€äº›å†™å…¥å†…å®¹çš„æ–‡æ¡£ï¼Œéœ€è¦å‘Šè¯‰TP è¿™æ˜¯å¯ä¸‹è½½æ–‡ä»¶ã€‚
        $file = new File('è¿™æ˜¯å†…å®¹ï¼Œå¦‚æœæƒ³ä¸‹è½½æˆ‘ï¼Œéœ€è¦ç”¨åˆ° isContent(true) ');
        return $file-&gt;name(&quot;æµ‹è¯•æ–‡æ¡£.txt&quot;)-&gt;isContent(true);
    }
}
</code></pre>
<p>ä¸‹è½½ç»“æœ â†“<br>
<img src="https://UserNameZjw.github.io/post-images/1561015047885.png" alt=""></p>
<h3 id="è¯·æ±‚å¯¹è±¡çš„æ³¨å…¥ä¸è°ƒç”¨">è¯·æ±‚å¯¹è±¡çš„æ³¨å…¥ä¸è°ƒç”¨</h3>
<p>1.æ„é€ æ–¹æ³•æ³¨å…¥<br>
æ˜¯æŒ‡æ²¡æœ‰ç»§æ‰¿ BaseController åŸºç±»æƒ…å†µä¸‹ä½¿ç”¨<br>
å¦‚æœç»§æ‰¿äº† BaseController åŸºç±»ï¼Œç›´æ¥ä½¿ç”¨åŒæ ·çš„è°ƒç”¨æ–¹æ³•å³å¯ï¼Œä¸ç”¨å†æ³¨å…¥</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\Request;

class Down
{
    protected $request;

    public function __construct(Request $request)
    {
        $this-&gt;request = $request;
    }

    public function index(){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump($this-&gt;request-&gt;get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump($this-&gt;request-&gt;post(['name'=&gt;'Cry']));

    }
}
</code></pre>
<p>2.æ“ä½œæ–¹æ³•æ³¨å…¥<br>
ä¸ç®¡æœ‰æ²¡æœ‰ç»§æ‰¿ BaseController åŸºç±»ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ­¤æ–¹å¼</p>
<pre><code>&lt;?php
namespace app\index\controller;

use think\Request;

class Down
{

    public function index(Request $request){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump($request-&gt;get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump($request-&gt;post(['name'=&gt;'Cry']));

    }
}
</code></pre>
<p>3.é™æ€è°ƒç”¨<br>
é™æ€è°ƒç”¨æ˜¯åˆ©ç”¨TP6 çš„ facade æœºåˆ¶æ¥é™æ€è¯·æ±‚çš„ï¼Œuse çš„æ—¶å€™éœ€è¦æ³¨æ„è·¯å¾„<br>
éœ€è¦<strong>æ‰‹åŠ¨</strong> use  think\facade\Request;<br>
ä¸ºä»€ä¹ˆéœ€è¦æ³¨æ„ï¼Ÿå› ä¸ºç°é˜¶æ®µçš„ ã€Œç¼–è¾‘è½¯ä»¶ã€ ä¸ä¼šè‡ªåŠ¨è¡¥å…¨facade çš„ use è·¯å¾„  ğŸ‘»ğŸ‘»ğŸ‘»</p>
<pre><code>&lt;?php
namespace app\index\controller;

use \think\facade\Request;

class Down
{
    public function index(){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump(Request::get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump(Request::post(['name'=&gt;'Cry']));
    }
}
</code></pre>
<p>4.åŠ©æ‰‹å‡½æ•°<br>
TP6 ä¸€ç›´ä¸ºç”¨æˆ·å°è£…äº†å¾ˆå¤šåŠ©æ‰‹å‡½æ•°ï¼ŒåŸºæœ¬æ¶µç›–äº†å¸¸ç”¨çš„æ‰€æœ‰éœ€æ±‚<br>
ä¹Ÿå°±æ˜¯è¯´ï¼ŒTP6ä¸è¾è¾›è‹¦çš„æŠŠæ¯ä¸€ä¸ªäººçš„å†™æ³•ï¼Œéƒ½å°½é‡å…¼å®¹ğŸ˜‚ğŸ˜‚<br>
æ— éœ€æ³¨å…¥ï¼Œæ— éœ€ç»§æ‰¿ BaseController ï¼Œä»»ä½•é¢å¤–æ“ä½œéƒ½ä¸éœ€è¦ğŸ˜‚ğŸ˜‚
<strong>ä½†æ˜¯å®˜æ–¹å°±æ˜¯ä¸ä¼˜å…ˆæ¨è</strong> ğŸ˜‚ğŸ˜‚ğŸ˜‚<br>
å…¶å®é‡Œé¢æœ‰çš„ä¹Ÿæ˜¯ facade</p>
<pre><code>&lt;?php
namespace app\index\controller;

class Down
{
    public function index(){
        //åˆ©ç”¨ get() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        //æ³¨æ„ï¼Œæˆ‘çš„æœåŠ¡å™¨å› ä¸ºæ˜¯ Nginx æ‰€ä»¥åšäº†URL é‡å†™ï¼Œ
        //é‡å†™çš„æ—¶å€™ ä¼šæŠŠè·¯å¾„ä¹Ÿä½œä¸ºGETå˜é‡ä¼ è¿‡æ¥ã€‚æ‰€ä»¥æ‰“å°å€¼ä¼šå¤šä¸€ä¸ªå½“å‰è·¯å¾„
        dump(request()-&gt;get());

        //åˆ©ç”¨ post() æ–¹æ³• æµ‹è¯•æ˜¯å¦æ³¨å…¥æˆåŠŸ
        echo &quot;&lt;hr&gt;&quot;;
        dump(request()-&gt;post(['name'=&gt;'Cry']));
    }
}
</code></pre>
<h3 id="ä¼ªé™æ€">ä¼ªé™æ€</h3>
<p>é»˜è®¤æ”¯æŒ .html ä½œä¸ºåç¼€</p>
<blockquote>
<p>ä¿®æ”¹æ–¹å¼ï¼šapp\config\route.php æ–‡ä»¶ä¸‹ 'url_html_suffix'       =&gt; 'html' ï¼Œå¦‚æœæƒ³å…³é—­ï¼Œæ”¹ä¸º false ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤ä»»ä½•åç¼€éƒ½å¯è®¿é—®ã€‚<br>
å¦‚æœæƒ³æ”¯æŒå¤šåç¼€ 'url_html_suffix'       =&gt; 'html|xml'</p>
</blockquote>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://UserNameZjw.github.io/tag/js73X3rii" class="tag">
                    ThinkPHP
                  </a>
                
                  <a href="https://UserNameZjw.github.io/tag/ot5L6E5ha" class="tag">
                    ThinkPHP 6.0
                  </a>
                
                  <a href="https://UserNameZjw.github.io/tag/uFYHgUoyG" class="tag">
                    PHP
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://UserNameZjw.github.io/post/thinkphp-6-3">
                  <h3 class="post-title">
                    ã€ŒThinkPHP 6.0ã€æ§åˆ¶å™¨éªŒè¯ä¸å“åº”
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '19e99227bee7425b84fe',
        clientSecret: 'fd6e22f86390c0075ff9db20e16c5221d27dbf9f',
        repo: 'UserNameZjw.github.io',
        owner: 'UserNameZjw',
        admin: ['UserNameZjw'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
